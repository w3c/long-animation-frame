<!doctype html><html lang="en">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
  <title>Long Animation Frames API</title>
  <meta content="ED" name="w3c-status">
  <link href="https://www.w3.org/StyleSheets/TR/2021/W3C-ED" rel="stylesheet">
  <meta content="Bikeshed version 742f3d674, updated Mon Nov 4 14:56:54 2024 -0800" name="generator">
  <link href="https://w3c.github.io/long-animation-frames/" rel="canonical">
  <meta content="dark light" name="color-scheme">
  <link href="https://www.w3.org/StyleSheets/TR/2021/dark.css" media="(prefers-color-scheme: dark)" rel="stylesheet" type="text/css">
<style>
dl {
    margin-left: 2em;
}
</style>
<style>/* Boilerplate: style-autolinks */
.css.css, .property.property, .descriptor.descriptor {
    color: var(--a-normal-text);
    font-size: inherit;
    font-family: inherit;
}
.css::before, .property::before, .descriptor::before {
    content: "‘";
}
.css::after, .property::after, .descriptor::after {
    content: "’";
}
.property, .descriptor {
    /* Don't wrap property and descriptor names */
    white-space: nowrap;
}
.type { /* CSS value <type> */
    font-style: italic;
}
pre .property::before, pre .property::after {
    content: "";
}
[data-link-type="property"]::before,
[data-link-type="propdesc"]::before,
[data-link-type="descriptor"]::before,
[data-link-type="value"]::before,
[data-link-type="function"]::before,
[data-link-type="at-rule"]::before,
[data-link-type="selector"]::before,
[data-link-type="maybe"]::before {
    content: "‘";
}
[data-link-type="property"]::after,
[data-link-type="propdesc"]::after,
[data-link-type="descriptor"]::after,
[data-link-type="value"]::after,
[data-link-type="function"]::after,
[data-link-type="at-rule"]::after,
[data-link-type="selector"]::after,
[data-link-type="maybe"]::after {
    content: "’";
}

[data-link-type].production::before,
[data-link-type].production::after,
.prod [data-link-type]::before,
.prod [data-link-type]::after {
    content: "";
}

[data-link-type=element],
[data-link-type=element-attr] {
    font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
    font-size: .9em;
}
[data-link-type=element]::before { content: "<" }
[data-link-type=element]::after  { content: ">" }

[data-link-type=biblio] {
    white-space: pre;
}

@media (prefers-color-scheme: dark) {
    :root {
        --selflink-text: black;
        --selflink-bg: silver;
        --selflink-hover-text: white;
    }
}
</style>
<style>/* Boilerplate: style-colors */
/* Any --*-text not paired with a --*-bg is assumed to have a transparent bg */
:root {
    color-scheme: light dark;

    --text: black;
    --bg: white;

    --unofficial-watermark: url(https://www.w3.org/StyleSheets/TR/2016/logos/UD-watermark);

    --logo-bg: #1a5e9a;
    --logo-active-bg: #c00;
    --logo-text: white;

    --tocnav-normal-text: #707070;
    --tocnav-normal-bg: var(--bg);
    --tocnav-hover-text: var(--tocnav-normal-text);
    --tocnav-hover-bg: #f8f8f8;
    --tocnav-active-text: #c00;
    --tocnav-active-bg: var(--tocnav-normal-bg);

    --tocsidebar-text: var(--text);
    --tocsidebar-bg: #f7f8f9;
    --tocsidebar-shadow: rgba(0,0,0,.1);
    --tocsidebar-heading-text: hsla(203,20%,40%,.7);

    --toclink-text: var(--text);
    --toclink-underline: #3980b5;
    --toclink-visited-text: var(--toclink-text);
    --toclink-visited-underline: #054572;

    --heading-text: #005a9c;

    --hr-text: var(--text);

    --algo-border: #def;

    --del-text: red;
    --del-bg: transparent;
    --ins-text: #080;
    --ins-bg: transparent;

    --a-normal-text: #034575;
    --a-normal-underline: #bbb;
    --a-visited-text: var(--a-normal-text);
    --a-visited-underline: #707070;
    --a-hover-bg: rgba(75%, 75%, 75%, .25);
    --a-active-text: #c00;
    --a-active-underline: #c00;

    --blockquote-border: silver;
    --blockquote-bg: transparent;
    --blockquote-text: currentcolor;

    --issue-border: #e05252;
    --issue-bg: #fbe9e9;
    --issue-text: var(--text);
    --issueheading-text: #831616;

    --example-border: #e0cb52;
    --example-bg: #fcfaee;
    --example-text: var(--text);
    --exampleheading-text: #574b0f;

    --note-border: #52e052;
    --note-bg: #e9fbe9;
    --note-text: var(--text);
    --noteheading-text: hsl(120, 70%, 30%);
    --notesummary-underline: silver;

    --assertion-border: #aaa;
    --assertion-bg: #eee;
    --assertion-text: black;

    --advisement-border: orange;
    --advisement-bg: #fec;
    --advisement-text: var(--text);
    --advisementheading-text: #b35f00;

    --warning-border: red;
    --warning-bg: hsla(40,100%,50%,0.95);
    --warning-text: var(--text);

    --amendment-border: #330099;
    --amendment-bg: #F5F0FF;
    --amendment-text: var(--text);
    --amendmentheading-text: #220066;

    --def-border: #8ccbf2;
    --def-bg: #def;
    --def-text: var(--text);
    --defrow-border: #bbd7e9;

    --datacell-border: silver;

    --indexinfo-text: #707070;

    --indextable-hover-text: black;
    --indextable-hover-bg: #f7f8f9;

    --outdatedspec-bg: rgba(0, 0, 0, .5);
    --outdatedspec-text: black;
    --outdated-bg: maroon;
    --outdated-text: white;
    --outdated-shadow: red;

    --editedrec-bg: darkorange;
}

@media (prefers-color-scheme: dark) {
    :root {
        --text: #ddd;
        --bg: black;

        --unofficial-watermark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400'%3E%3Cg fill='%23100808' transform='translate(200 200) rotate(-45) translate(-200 -200)' stroke='%23100808' stroke-width='3'%3E%3Ctext x='50%25' y='220' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EUNOFFICIAL%3C/text%3E%3Ctext x='50%25' y='305' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EDRAFT%3C/text%3E%3C/g%3E%3C/svg%3E");

        --logo-bg: #1a5e9a;
        --logo-active-bg: #c00;
        --logo-text: white;

        --tocnav-normal-text: #999;
        --tocnav-normal-bg: var(--bg);
        --tocnav-hover-text: var(--tocnav-normal-text);
        --tocnav-hover-bg: #080808;
        --tocnav-active-text: #f44;
        --tocnav-active-bg: var(--tocnav-normal-bg);

        --tocsidebar-text: var(--text);
        --tocsidebar-bg: #080808;
        --tocsidebar-shadow: rgba(255,255,255,.1);
        --tocsidebar-heading-text: hsla(203,20%,40%,.7);

        --toclink-text: var(--text);
        --toclink-underline: #6af;
        --toclink-visited-text: var(--toclink-text);
        --toclink-visited-underline: #054572;

        --heading-text: #8af;

        --hr-text: var(--text);

        --algo-border: #456;

        --del-text: #f44;
        --del-bg: transparent;
        --ins-text: #4a4;
        --ins-bg: transparent;

        --a-normal-text: #6af;
        --a-normal-underline: #555;
        --a-visited-text: var(--a-normal-text);
        --a-visited-underline: var(--a-normal-underline);
        --a-hover-bg: rgba(25%, 25%, 25%, .2);
        --a-active-text: #f44;
        --a-active-underline: var(--a-active-text);

        --borderedblock-bg: rgba(255, 255, 255, .05);

        --blockquote-border: silver;
        --blockquote-bg: var(--borderedblock-bg);
        --blockquote-text: currentcolor;

        --issue-border: #e05252;
        --issue-bg: var(--borderedblock-bg);
        --issue-text: var(--text);
        --issueheading-text: hsl(0deg, 70%, 70%);

        --example-border: hsl(50deg, 90%, 60%);
        --example-bg: var(--borderedblock-bg);
        --example-text: var(--text);
        --exampleheading-text: hsl(50deg, 70%, 70%);

        --note-border: hsl(120deg, 100%, 35%);
        --note-bg: var(--borderedblock-bg);
        --note-text: var(--text);
        --noteheading-text: hsl(120, 70%, 70%);
        --notesummary-underline: silver;

        --assertion-border: #444;
        --assertion-bg: var(--borderedblock-bg);
        --assertion-text: var(--text);

        --advisement-border: orange;
        --advisement-bg: #222218;
        --advisement-text: var(--text);
        --advisementheading-text: #f84;

        --warning-border: red;
        --warning-bg: hsla(40,100%,20%,0.95);
        --warning-text: var(--text);

        --amendment-border: #330099;
        --amendment-bg: #080010;
        --amendment-text: var(--text);
        --amendmentheading-text: #cc00ff;

        --def-border: #8ccbf2;
        --def-bg: #080818;
        --def-text: var(--text);
        --defrow-border: #136;

        --datacell-border: silver;

        --indexinfo-text: #aaa;

        --indextable-hover-text: var(--text);
        --indextable-hover-bg: #181818;

        --outdatedspec-bg: rgba(255, 255, 255, .5);
        --outdatedspec-text: black;
        --outdated-bg: maroon;
        --outdated-text: white;
        --outdated-shadow: red;

        --editedrec-bg: darkorange;
    }
    /* In case a transparent-bg image doesn't expect to be on a dark bg,
       which is quite common in practice... */
    img { background: white; }
}
</style>
<style>/* Boilerplate: style-counters */
body {
    counter-reset: example figure issue;
}
.issue {
    counter-increment: issue;
}
.issue:not(.no-marker)::before {
    content: "Issue " counter(issue);
}

.example {
    counter-increment: example;
}
.example:not(.no-marker)::before {
    content: "Example " counter(example);
}
.invalid.example:not(.no-marker)::before,
.illegal.example:not(.no-marker)::before {
    content: "Invalid Example" counter(example);
}

figcaption {
    counter-increment: figure;
}
figcaption:not(.no-marker)::before {
    content: "Figure " counter(figure) " ";
}
</style>
<style>/* Boilerplate: style-dfn-panel */
:root {
    --dfnpanel-bg: #ddd;
    --dfnpanel-text: var(--text);
    --dfnpanel-target-bg: #ffc;
    --dfnpanel-target-outline: orange;
}
@media (prefers-color-scheme: dark) {
    :root {
        --dfnpanel-bg: #222;
        --dfnpanel-text: var(--text);
        --dfnpanel-target-bg: #333;
        --dfnpanel-target-outline: silver;
    }
}
.dfn-panel {
    position: absolute;
    z-index: 35;
    width: 20em;
    width: 300px;
    height: auto;
    max-height: 500px;
    overflow: auto;
    padding: 0.5em 0.75em;
    font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
    background: var(--dfnpanel-bg);
    color: var(--dfnpanel-text);
    border: outset 0.2em;
    white-space: normal; /* in case it's moved into a pre */
}
.dfn-panel:not(.on) { display: none; }
.dfn-panel * { margin: 0; padding: 0; text-indent: 0; }
.dfn-panel > b { display: block; }
.dfn-panel a { color: var(--dfnpanel-text); }
.dfn-panel a:not(:hover) { text-decoration: none !important; border-bottom: none !important; }
.dfn-panel a:focus {
    outline: 5px auto Highlight;
    outline: 5px auto -webkit-focus-ring-color;
}
.dfn-panel > b + b { margin-top: 0.25em; }
.dfn-panel ul { padding: 0 0 0 1em; list-style: none; }
.dfn-panel li a {
    max-width: calc(300px - 1.5em - 1em);
    overflow: hidden;
    text-overflow: ellipsis;
}

.dfn-panel.activated {
    display: inline-block;
    position: fixed;
    left: 8px;
    bottom: 2em;
    margin: 0 auto;
    max-width: calc(100vw - 1.5em - .4em - .5em);
    max-height: 30vh;
    transition: left 1s ease-out, bottom 1s ease-out;
}

.dfn-panel .link-item:hover {
    text-decoration: underline;
}
.dfn-panel .link-item .copy-icon {
    opacity: 0;
}
.dfn-panel .link-item:hover .copy-icon,
.dfn-panel .link-item .copy-icon:focus {
    opacity: 1;
}

.dfn-panel .copy-icon {
    display: inline-block;
    margin-right: 0.5em;
    width: 0.85em;
    height: 1em;
    border-radius: 3px;
    background-color: #ccc;
    cursor: pointer;
}

.dfn-panel .copy-icon .icon {
    width: 100%;
    height: 100%;
    background-color: #fff;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
}

.dfn-panel .copy-icon .icon::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border: 1px solid black;
    background-color: #ccc;
    opacity: 0.25;
    transform: translate(3px, -3px);
}

.dfn-panel .copy-icon:active .icon::before {
    opacity: 1;
}

.dfn-paneled[role="button"] { cursor: help; }

.highlighted {
    animation: target-fade 3s;
}

@keyframes target-fade {
    from {
        background-color: var(--dfnpanel-target-bg);
        outline: 5px solid var(--dfnpanel-target-outline);
    }
    to {
        color: var(--a-normal-text);
        background-color: transparent;
        outline: transparent;
    }
}
</style>
<style>/* Boilerplate: style-idl-highlighting */
pre.idl.highlight {
    background: var(--borderedblock-bg, var(--def-bg));
}
</style>
<style>/* Boilerplate: style-issues */
a[href].issue-return {
    float: right;
    float: inline-end;
    color: var(--issueheading-text);
    font-weight: bold;
    text-decoration: none;
}
</style>
<style>/* Boilerplate: style-md-lists */
/* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
[data-md] > :first-child {
    margin-top: 0;
}
[data-md] > :last-child {
    margin-bottom: 0;
}
</style>
<style>/* Boilerplate: style-ref-hints */
:root {
    --ref-hint-bg: #ddd;
    --ref-hint-text: var(--text);
}
@media (prefers-color-scheme: dark) {
    :root {
        --ref-hint-bg: #222;
        --ref-hint-text: var(--text);
    }
}

.ref-hint {
    display: inline-block;
    position: absolute;
    z-index: 35;
    width: 20em;
    width: 300px;
    height: auto;
    max-height: 500px;
    overflow: auto;
    padding: 0.5em 0.5em;
    font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
    background: var(--ref-hint-bg);
    color: var(--ref-hint-text);
    border: outset 0.2em;
    white-space: normal; /* in case it's moved into a pre */
}

.ref-hint * { margin: 0; padding: 0; text-indent: 0; }

.ref-hint ul { padding: 0 0 0 1em; list-style: none; }
</style>
<style>/* Boilerplate: style-selflinks */
:root {
    --selflink-text: white;
    --selflink-bg: gray;
    --selflink-hover-text: black;
}
.heading, .issue, .note, .example, li, dt {
    position: relative;
}
a.self-link {
    position: absolute;
    top: 0;
    left: calc(-1 * (3.5rem - 26px));
    width: calc(3.5rem - 26px);
    height: 2em;
    text-align: center;
    border: none;
    transition: opacity .2s;
    opacity: .5;
}
a.self-link:hover {
    opacity: 1;
}
.heading > a.self-link {
    font-size: 83%;
}
.example > a.self-link,
.note > a.self-link,
.issue > a.self-link {
    /* These blocks are overflow:auto, so positioning outside
       doesn't work. */
    left: auto;
    right: 0;
}
li > a.self-link {
    left: calc(-1 * (3.5rem - 26px) - 2em);
}
dfn > a.self-link {
    top: auto;
    left: auto;
    opacity: 0;
    width: 1.5em;
    height: 1.5em;
    background: var(--selflink-bg);
    color: var(--selflink-text);
    font-style: normal;
    transition: opacity .2s, background-color .2s, color .2s;
}
dfn:hover > a.self-link {
    opacity: 1;
}
dfn > a.self-link:hover {
    color: var(--selflink-hover-text);
}

a.self-link::before            { content: "¶"; }
.heading > a.self-link::before { content: "§"; }
dfn > a.self-link::before      { content: "#"; }
</style>
<style>/* Boilerplate: style-syntax-highlighting */
code.highlight { padding: .1em; border-radius: .3em; }
pre.highlight, pre > code.highlight { display: block; padding: 1em; margin: .5em 0; overflow: auto; border-radius: 0; }

.highlight:not(.idl) { background: rgba(0, 0, 0, .03); }
c-[a] { color: #990055 } /* Keyword.Declaration */
c-[b] { color: #990055 } /* Keyword.Type */
c-[c] { color: #708090 } /* Comment */
c-[d] { color: #708090 } /* Comment.Multiline */
c-[e] { color: #0077aa } /* Name.Attribute */
c-[f] { color: #669900 } /* Name.Tag */
c-[g] { color: #222222 } /* Name.Variable */
c-[k] { color: #990055 } /* Keyword */
c-[l] { color: #000000 } /* Literal */
c-[m] { color: #000000 } /* Literal.Number */
c-[n] { color: #0077aa } /* Name */
c-[o] { color: #999999 } /* Operator */
c-[p] { color: #999999 } /* Punctuation */
c-[s] { color: #a67f59 } /* Literal.String */
c-[t] { color: #a67f59 } /* Literal.String.Single */
c-[u] { color: #a67f59 } /* Literal.String.Double */
c-[cp] { color: #708090 } /* Comment.Preproc */
c-[c1] { color: #708090 } /* Comment.Single */
c-[cs] { color: #708090 } /* Comment.Special */
c-[kc] { color: #990055 } /* Keyword.Constant */
c-[kn] { color: #990055 } /* Keyword.Namespace */
c-[kp] { color: #990055 } /* Keyword.Pseudo */
c-[kr] { color: #990055 } /* Keyword.Reserved */
c-[ld] { color: #000000 } /* Literal.Date */
c-[nc] { color: #0077aa } /* Name.Class */
c-[no] { color: #0077aa } /* Name.Constant */
c-[nd] { color: #0077aa } /* Name.Decorator */
c-[ni] { color: #0077aa } /* Name.Entity */
c-[ne] { color: #0077aa } /* Name.Exception */
c-[nf] { color: #0077aa } /* Name.Function */
c-[nl] { color: #0077aa } /* Name.Label */
c-[nn] { color: #0077aa } /* Name.Namespace */
c-[py] { color: #0077aa } /* Name.Property */
c-[ow] { color: #999999 } /* Operator.Word */
c-[mb] { color: #000000 } /* Literal.Number.Bin */
c-[mf] { color: #000000 } /* Literal.Number.Float */
c-[mh] { color: #000000 } /* Literal.Number.Hex */
c-[mi] { color: #000000 } /* Literal.Number.Integer */
c-[mo] { color: #000000 } /* Literal.Number.Oct */
c-[sb] { color: #a67f59 } /* Literal.String.Backtick */
c-[sc] { color: #a67f59 } /* Literal.String.Char */
c-[sd] { color: #a67f59 } /* Literal.String.Doc */
c-[se] { color: #a67f59 } /* Literal.String.Escape */
c-[sh] { color: #a67f59 } /* Literal.String.Heredoc */
c-[si] { color: #a67f59 } /* Literal.String.Interpol */
c-[sx] { color: #a67f59 } /* Literal.String.Other */
c-[sr] { color: #a67f59 } /* Literal.String.Regex */
c-[ss] { color: #a67f59 } /* Literal.String.Symbol */
c-[vc] { color: #0077aa } /* Name.Variable.Class */
c-[vg] { color: #0077aa } /* Name.Variable.Global */
c-[vi] { color: #0077aa } /* Name.Variable.Instance */
c-[il] { color: #000000 } /* Literal.Number.Integer.Long */

@media (prefers-color-scheme: dark) {
    .highlight:not(.idl) { background: rgba(255, 255, 255, .05); }

    c-[a] { color: #d33682 } /* Keyword.Declaration */
    c-[b] { color: #d33682 } /* Keyword.Type */
    c-[c] { color: #2aa198 } /* Comment */
    c-[d] { color: #2aa198 } /* Comment.Multiline */
    c-[e] { color: #268bd2 } /* Name.Attribute */
    c-[f] { color: #b58900 } /* Name.Tag */
    c-[g] { color: #cb4b16 } /* Name.Variable */
    c-[k] { color: #d33682 } /* Keyword */
    c-[l] { color: #657b83 } /* Literal */
    c-[m] { color: #657b83 } /* Literal.Number */
    c-[n] { color: #268bd2 } /* Name */
    c-[o] { color: #657b83 } /* Operator */
    c-[p] { color: #657b83 } /* Punctuation */
    c-[s] { color: #6c71c4 } /* Literal.String */
    c-[t] { color: #6c71c4 } /* Literal.String.Single */
    c-[u] { color: #6c71c4 } /* Literal.String.Double */
    c-[ch] { color: #2aa198 } /* Comment.Hashbang */
    c-[cp] { color: #2aa198 } /* Comment.Preproc */
    c-[cpf] { color: #2aa198 } /* Comment.PreprocFile */
    c-[c1] { color: #2aa198 } /* Comment.Single */
    c-[cs] { color: #2aa198 } /* Comment.Special */
    c-[kc] { color: #d33682 } /* Keyword.Constant */
    c-[kn] { color: #d33682 } /* Keyword.Namespace */
    c-[kp] { color: #d33682 } /* Keyword.Pseudo */
    c-[kr] { color: #d33682 } /* Keyword.Reserved */
    c-[ld] { color: #657b83 } /* Literal.Date */
    c-[nc] { color: #268bd2 } /* Name.Class */
    c-[no] { color: #268bd2 } /* Name.Constant */
    c-[nd] { color: #268bd2 } /* Name.Decorator */
    c-[ni] { color: #268bd2 } /* Name.Entity */
    c-[ne] { color: #268bd2 } /* Name.Exception */
    c-[nf] { color: #268bd2 } /* Name.Function */
    c-[nl] { color: #268bd2 } /* Name.Label */
    c-[nn] { color: #268bd2 } /* Name.Namespace */
    c-[py] { color: #268bd2 } /* Name.Property */
    c-[ow] { color: #657b83 } /* Operator.Word */
    c-[mb] { color: #657b83 } /* Literal.Number.Bin */
    c-[mf] { color: #657b83 } /* Literal.Number.Float */
    c-[mh] { color: #657b83 } /* Literal.Number.Hex */
    c-[mi] { color: #657b83 } /* Literal.Number.Integer */
    c-[mo] { color: #657b83 } /* Literal.Number.Oct */
    c-[sa] { color: #6c71c4 } /* Literal.String.Affix */
    c-[sb] { color: #6c71c4 } /* Literal.String.Backtick */
    c-[sc] { color: #6c71c4 } /* Literal.String.Char */
    c-[dl] { color: #6c71c4 } /* Literal.String.Delimiter */
    c-[sd] { color: #6c71c4 } /* Literal.String.Doc */
    c-[se] { color: #6c71c4 } /* Literal.String.Escape */
    c-[sh] { color: #6c71c4 } /* Literal.String.Heredoc */
    c-[si] { color: #6c71c4 } /* Literal.String.Interpol */
    c-[sx] { color: #6c71c4 } /* Literal.String.Other */
    c-[sr] { color: #6c71c4 } /* Literal.String.Regex */
    c-[ss] { color: #6c71c4 } /* Literal.String.Symbol */
    c-[fm] { color: #268bd2 } /* Name.Function.Magic */
    c-[vc] { color: #cb4b16 } /* Name.Variable.Class */
    c-[vg] { color: #cb4b16 } /* Name.Variable.Global */
    c-[vi] { color: #cb4b16 } /* Name.Variable.Instance */
    c-[vm] { color: #cb4b16 } /* Name.Variable.Magic */
    c-[il] { color: #657b83 } /* Literal.Number.Integer.Long */
}
</style>
<style>/* Boilerplate: style-var-click-highlighting */
/*
Colors were chosen in Lab using https://nixsensor.com/free-color-converter/
D50 2deg illuminant, L in [0,100], a and b in [-128, 128]
0 = lab(85,0,85)
1 = lab(85,80,30)
2 = lab(85,-40,40)
3 = lab(85,-50,0)
4 = lab(85,5,15)
5 = lab(85,-10,-50)
6 = lab(85,35,-15)

For darkmode:
0 = oklab(50%   0%  108%)
1 = oklab(50% -51%   51%)
2 = oklab(50% -64%  -20%)
3 = oklab(50%   6%   19%)
4 = oklab(50% -12%  -64%)
5 = oklab(50%  44%  -19%)  
6 = oklab(50% 102%   38%)
*/

[data-algorithm] var { cursor: pointer; }
var[data-var-color] { background-color: var(--var-bg); box-shadow: 0 0 0 2px var(--var-bg); }

var[data-var-color] { --var-bg: #F4D200; }
var[data-var-color="1"] { --var-bg: #FF87A2; }
var[data-var-color="2"] { --var-bg: #96E885; }
var[data-var-color="3"] { --var-bg: #3EEED2; }
var[data-var-color="4"] { --var-bg: #EACFB6; }
var[data-var-color="5"] { --var-bg: #82DDFF; }
var[data-var-color="6"] { --var-vg: #FFBCF2; }

@media (prefers-color-scheme: dark) {
	var[data-var-color] { --var-bg: #bc1a00; }
	var[data-var-color="1"] { --var-bg: #007f00; }
	var[data-var-color="2"] { --var-bg: #008698; }
	var[data-var-color="3"] { --var-bg: #7f5b2b; }
	var[data-var-color="4"] { --var-bg: #004df3; }
	var[data-var-color="5"] { --var-bg: #a1248a; }
	var[data-var-color="6"] { --var-vg: #ff0000; }
}
</style>
 <body class="h-entry">
  <div class="head">
   <p data-fill-with="logo"><a class="logo" href="https://www.w3.org/"> <img alt="W3C" height="48" src="https://www.w3.org/StyleSheets/TR/2021/logos/W3C" width="72"> </a> </p>
   <h1 class="p-name no-ref" id="title">Long Animation Frames API</h1>
   <p id="w3c-state"><a href="https://www.w3.org/standards/types/#ED">Editor’s Draft</a>, <time class="dt-updated" datetime="2024-11-06">6 November 2024</time></p>
   <details open>
    <summary>More details about this document</summary>
    <div data-fill-with="spec-metadata">
     <dl>
      <dt>This version:
      <dd><a class="u-url" href="https://w3c.github.io/long-animation-frames/">https://w3c.github.io/long-animation-frames/</a>
      <dt>Test Suite:
      <dd><a href="https://wpt.fyi/results/long-animation-frames">https://wpt.fyi/results/long-animation-frames</a>
      <dt>Issue Tracking:
      <dd><a href="https://github.com/w3c/long-animation-frames/issues/">GitHub</a>
      <dd><a href="#issues-index">Inline In Spec</a>
      <dt class="editor">Editor:
      <dd class="editor p-author h-card vcard" data-editor-id="121539"><a class="p-name fn u-email email" href="mailto:nrosenthal@google.com">Noam Rosenthal</a> (<a class="p-org org" href="https://google.com">Google</a>)
     </dl>
    </div>
   </details>
   <div data-fill-with="warning"></div>
   <p class="copyright" data-fill-with="copyright"><a href="https://www.w3.org/policies/#copyright">Copyright</a> © 2024 <a href="https://www.w3.org/">World Wide Web Consortium</a>. <abbr title="World Wide Web Consortium">W3C</abbr><sup>®</sup> <a href="https://www.w3.org/policies/#Legal_Disclaimer">liability</a>, <a href="https://www.w3.org/policies/#W3C_Trademarks">trademark</a> and <a href="https://www.w3.org/copyright/software-license/" rel="license" title="W3C Software and Document License">permissive document license</a> rules apply. </p>
   <hr title="Separator for header">
  </div>
  <div class="p-summary" data-fill-with="abstract">
   <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">Abstract</span></h2>
   <p>This document defines an API that web page authors can use to detect presence of "long animation frames" that monopolize the UI thread for extended periods of time and block other critical tasks from being executed - e.g. reacting to user input.</p>
  </div>
  <h2 class="no-num no-toc no-ref heading settled" id="sotd"><span class="content">Status of this document</span></h2>
  <div data-fill-with="status">
   <p> This is a public copy of the editors’ draft.
	It is provided for discussion only and may change at any moment.
	Its publication here does not imply endorsement of its contents by W3C.
	Don’t cite this document other than as work in progress. </p>
   <p><a href="https://github.com/w3c/long-animation-frames/issues">GitHub Issues</a> are preferred for discussion of this specification. </p>
   <p>This document is governed by the <a href="https://www.w3.org/policies/process/20231103/" id="w3c_process_revision">03 November 2023 W3C Process Document</a>. </p>
   <p></p>
   <p>If you wish to make comments regarding this document, please create an issue in the <a href="https://github.com/w3c/long-animation-frames">Long Animation Frames</a> repository.</p>
  </div>
  <div data-fill-with="at-risk"></div>
  <nav data-fill-with="table-of-contents" id="toc">
   <h2 class="no-num no-toc no-ref" id="contents">Table of Contents</h2>
   <ol class="toc" role="directory">
    <li>
     <a href="#intro"><span class="secno">1</span> <span class="content">Introduction</span></a>
     <ol class="toc">
      <li><a href="#example"><span class="secno">1.1</span> <span class="content">Usage Example</span></a>
      <li><a href="#loaf-vs-longtasks"><span class="secno">1.2</span> <span class="content">Long Animation Frames vs. Long Tasks</span></a>
     </ol>
    <li>
     <a href="#sec-loaf-timing"><span class="secno">2</span> <span class="content">Long Animation Frame Timing</span></a>
     <ol class="toc">
      <li><a href="#sec-PerformanceLongAnimationFrameTiming"><span class="secno">2.1</span> <span class="content"><code class="idl"><span>PerformanceLongAnimationFrameTiming</span></code> interface</span></a>
      <li><a href="#sec-PerformanceScriptTiming"><span class="secno">2.2</span> <span class="content"><code class="idl"><span>PerformanceScriptTiming</span></code> interface</span></a>
     </ol>
    <li>
     <a href="#sec-processing-model"><span class="secno">3</span> <span class="content">Processing model</span></a>
     <ol class="toc">
      <li><a href="#sec-frame-timing-info"><span class="secno">3.1</span> <span class="content">Frame Timing Info</span></a>
      <li>
       <a href="#loaf-processing-model"><span class="secno">3.2</span> <span class="content">Report Long Animation Frames</span></a>
       <ol class="toc">
        <li><a href="#loaf-monitoring"><span class="secno">3.2.1</span> <span class="content">Long Animation Frame Monitoring {#loaf-monitoring}</span></a>
        <li><a href="#long-script-monitoring"><span class="secno">3.2.2</span> <span class="content">Long Script Monitoring</span></a>
       </ol>
     </ol>
    <li>
     <a href="#other-standards"><span class="secno">4</span> <span class="content">Additions to existing standards</span></a>
     <ol class="toc">
      <li><a href="#webidl-monkey-patches"><span class="secno">4.1</span> <span class="content">Monkey-patches to the WebIDL standard</span></a>
     </ol>
    <li>
     <a href="#priv-sec"><span class="secno">5</span> <span class="content">Security &amp; privacy considerations</span></a>
     <ol class="toc">
      <li><a href="#what-is-exposed"><span class="secno">5.1</span> <span class="content">What is Exposed to Observers?</span></a>
      <li><a href="#attack-scenarios"><span class="secno">5.2</span> <span class="content">Attack Scenarios Considered</span></a>
      <li><a href="#loaf-sec-priv"><span class="secno">5.3</span> <span class="content">Additional information exposed by the Long Animation Frames API</span></a>
      <li><a href="#loaf-opaque-scripts-sec"><span class="secno">5.4</span> <span class="content"><code class="idl"><span>PerformanceScriptTiming</span></code> and opaque scripts</span></a>
     </ol>
    <li>
     <a href="#w3c-conformance"><span class="secno"></span> <span class="content">Conformance</span></a>
     <ol class="toc">
      <li><a href="#w3c-conventions"><span class="secno"></span> <span class="content">Document conventions</span></a>
      <li><a href="#w3c-conformant-algorithms"><span class="secno"></span> <span class="content">Conformant Algorithms</span></a>
     </ol>
    <li>
     <a href="#index"><span class="secno"></span> <span class="content">Index</span></a>
     <ol class="toc">
      <li><a href="#index-defined-here"><span class="secno"></span> <span class="content">Terms defined by this specification</span></a>
      <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span class="content">Terms defined by reference</span></a>
     </ol>
    <li>
     <a href="#references"><span class="secno"></span> <span class="content">References</span></a>
     <ol class="toc">
      <li><a href="#normative"><span class="secno"></span> <span class="content">Normative References</span></a>
     </ol>
    <li><a href="#idl-index"><span class="secno"></span> <span class="content">IDL Index</span></a>
    <li><a href="#issues-index"><span class="secno"></span> <span class="content">Issues Index</span></a>
   </ol>
  </nav>
  <main>
   <h2 class="heading settled" data-level="1" id="intro"><span class="secno">1. </span><span class="content">Introduction</span><a class="self-link" href="#intro"></a></h2>
   <p>As the page is loading and while the user is interacting with the page afterwards, both the application and browser queue various events that are then executed by the browser -- e.g. user agent schedules input events based on user’s activity, the application schedules callbacks for requestAnimationFrame and other callbacks, etc. Once in the queue, the browser dequeues these events one-by-one and executes them.</p>
   <p>However, some tasks can take a long time (multiple frames) and if/when that happens, the UI thread may become blocked and block all other tasks as well. To the user, this is commonly visible as a "locked up" page where the browser is unable to respond to user input; this is a major source of bad user experience on the web today:</p>
   <dl>
    <dt data-md>Delayed "time to Interactive":
    <dd data-md>
     <p>while the page is loading, or even completely visually rendered, long tasks often tie up the main thread and prevent the user from interacting with the page. Poorly designed third-party content is frequently the culprit.</p>
    <dt data-md>High/variable input latency:
    <dd data-md>
     <p>critical user-interaction events (e.g. tap, click, scroll, wheel, etc.) are queued behind long tasks which yields janky and unpredictable user experience.</p>
    <dt data-md>High/variable event handling latency:
    <dd data-md>
     <p>like input, processing event callbacks (e.g. onload events, etc.) delay application updates.</p>
    <dt data-md>Janky animations and scrolling:
    <dd data-md>
     <p>some animation and scrolling interactions require coordination between compositor and main threads; if a long task is blocking the main thread it can affect responsiveness of animations and scrolling.</p>
   </dl>
   <p>Some applications (and <a href="https://en.wikipedia.org/wiki/Real_user_monitoring">RUM</a> vendors) are already attempting to identify and track cases where "long tasks" happen. For example, one known pattern is to install a ~short periodic timer and inspect the elapsed time between the successive expirations: if the elapsed time is greater than the timer period, then there is high likelihood that one or more long tasks have delayed execution of the event loop. This approach mostly works but has several bad performance implications: by polling to detect long tasks, the application prevents quiescence and long idle blocks (see requestIdleCallback); it’s bad for battery life; there is no way to know what is causing the delay (e.g. first party or third party code).</p>
   <p>The <a href="https://developers.google.com/web/fundamentals/performance/rail">RAIL</a> performance model suggests that applications should respond to user input in less than 100ms (for touch move and scrolling, the threshold is 16ms). The goal of this API is to surface notifications about tasks that may prevent the application from hitting these targets. This API surfaces tasks that take 50ms or more. A website without these tasks should respond to user input in under 100ms: it will take less than 50ms to finish the task that is being executed when the user input is received and less than 50ms to execute the task to react to such user input.</p>
   <h3 class="heading settled" data-level="1.1" id="example"><span class="secno">1.1. </span><span class="content">Usage Example</span><a class="self-link" href="#example"></a></h3>
<pre class="example highlight" id="example-620f8bab"><a class="self-link" href="#example-620f8bab"></a><c- a>const</c-> observer <c- o>=</c-> <c- ow>new</c-> PerformanceObserver<c- p>(</c-><c- a>function</c-><c- p>(</c->list<c- p>)</c-> <c- p>{</c->
    <c- k>for</c-> <c- p>(</c-><c- a>const</c-> entry <c- k>of</c-> list<c- p>.</c->getEntries<c- p>())</c-> <c- p>{</c->
        <c- c1>// Process long task notifications:</c->
        <c- c1>// report back for analytics and monitoring</c->
        <c- c1>// ...</c->
    <c- p>}</c->
<c- p>});</c->
<c- c1>// Register observer for previous and future long task notifications.</c->
observer<c- p>.</c->observe<c- p>({</c->type<c- o>:</c-> <c- u>"long-animation-frame"</c-><c- p>,</c-> buffered<c- o>:</c-> <c- kc>true</c-><c- p>});</c->
<c- c1>// Long script execution after this will result in queueing</c->
<c- c1>// and receiving "long-animation-frame" entries in the observer.</c->

<c- c1>// Register observer for previous and future long animation frame notifications.</c->
<c- c1>// After this, long periods where the main thread is busy will result in queueing</c->
<c- c1>// and receiving "long-animation-frame" entries in the observer.</c->
observer<c- p>.</c->observe<c- p>({</c->type<c- o>:</c-> <c- u>"long-animation-frame"</c-><c- p>,</c-> buffered<c- o>:</c-> <c- kc>true</c-><c- p>});</c->
</pre>
   <h3 class="heading settled" data-level="1.2" id="loaf-vs-longtasks"><span class="secno">1.2. </span><span class="content">Long Animation Frames vs. Long Tasks</span><a class="self-link" href="#loaf-vs-longtasks"></a></h3>
   <p>While both <a data-link-type="dfn" href="https://w3c.github.io/longtasks/#long-task" id="ref-for-long-task">long tasks</a> and long animation frames measure congestion and jank, long animation frames
provide information that has a better correlation with how users perceive this type of congestion.
That’s because long animation frames measure a sequence that begins when the main thread is idle,
and end when the frame either renders or the user agents decides there is nothing to render.</p>
   <p>The <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-task" id="ref-for-concept-task">task</a> term is somewhat of an implementation detail, and the long animation frame addition
attempts to remedy that by introducing a more user-centric metric of the same phenomenon of main
thread congestion/jank.</p>
   <p>Because long animation frames are guaranteed to have a maximum of one rendering phase, we can also
use them to expose additional information about the rendering phase itself, such as <code class="idl"><a data-link-type="idl" href="#dom-performancelonganimationframetiming-renderstart" id="ref-for-dom-performancelonganimationframetiming-renderstart">renderStart</a></code> and <code class="idl"><a data-link-type="idl" href="#dom-performancelonganimationframetiming-styleandlayoutstart" id="ref-for-dom-performancelonganimationframetiming-styleandlayoutstart">styleAndLayoutStart</a></code>.</p>
   <h2 class="heading settled" data-level="2" id="sec-loaf-timing"><span class="secno">2. </span><span class="content">Long Animation Frame Timing</span><a class="self-link" href="#sec-loaf-timing"></a></h2>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="long-animation-frame">long animation frame</dfn> refers to any of the following occurrences whose duration exceeds 50ms:</p>
   <ul>
    <li data-md>
     <p>A <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-task" id="ref-for-concept-task①">task</a>, after which updating the rendering is not necessary.</p>
    <li data-md>
     <p>A <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-task" id="ref-for-concept-task②">task</a> after which updating the rendering is necessary, up until rendering is updated.</p>
   </ul>
   <p>Long Animation Frame timing involves the following new interfaces:</p>
   <h3 class="heading settled" data-level="2.1" id="sec-PerformanceLongAnimationFrameTiming"><span class="secno">2.1. </span><span class="content"><code class="idl"><a data-link-type="idl" href="#performancelonganimationframetiming" id="ref-for-performancelonganimationframetiming">PerformanceLongAnimationFrameTiming</a></code> interface</span><a class="self-link" href="#sec-PerformanceLongAnimationFrameTiming"></a></h3>
<pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed"><c- g>Exposed</c-></a>=<c- n>Window</c->]
<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="performancelonganimationframetiming"><code class="highlight"><c- g>PerformanceLongAnimationFrameTiming</c-></code></dfn> : <a data-link-type="idl-name" href="https://w3c.github.io/performance-timeline/#the-performanceentry-interface" id="ref-for-the-performanceentry-interface"><c- n>PerformanceEntry</c-></a> {
    /* Overloading PerformanceEntry */
    <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://w3c.github.io/hr-time/#idl-def-domhighrestimestamp" id="ref-for-idl-def-domhighrestimestamp"><c- n>DOMHighResTimeStamp</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="PerformanceLongAnimationFrameTiming" data-dfn-type="attribute" data-export data-readonly data-type="DOMHighResTimeStamp" id="dom-performancelonganimationframetiming-starttime"><code class="highlight"><c- g>startTime</c-></code></dfn>;
    <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://w3c.github.io/hr-time/#idl-def-domhighrestimestamp" id="ref-for-idl-def-domhighrestimestamp①"><c- n>DOMHighResTimeStamp</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="PerformanceLongAnimationFrameTiming" data-dfn-type="attribute" data-export data-readonly data-type="DOMHighResTimeStamp" id="dom-performancelonganimationframetiming-duration"><code class="highlight"><c- g>duration</c-></code></dfn>;
    <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="PerformanceLongAnimationFrameTiming" data-dfn-type="attribute" data-export data-readonly data-type="DOMString" id="dom-performancelonganimationframetiming-name"><code class="highlight"><c- g>name</c-></code></dfn>;
    <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString①"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="PerformanceLongAnimationFrameTiming" data-dfn-type="attribute" data-export data-readonly data-type="DOMString" id="dom-performancelonganimationframetiming-entrytype"><code class="highlight"><c- g>entryType</c-></code></dfn>;

    <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://w3c.github.io/hr-time/#idl-def-domhighrestimestamp" id="ref-for-idl-def-domhighrestimestamp②"><c- n>DOMHighResTimeStamp</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="PerformanceLongAnimationFrameTiming" data-dfn-type="attribute" data-export data-readonly data-type="DOMHighResTimeStamp" id="dom-performancelonganimationframetiming-renderstart"><code class="highlight"><c- g>renderStart</c-></code></dfn>;
    <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://w3c.github.io/hr-time/#idl-def-domhighrestimestamp" id="ref-for-idl-def-domhighrestimestamp③"><c- n>DOMHighResTimeStamp</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="PerformanceLongAnimationFrameTiming" data-dfn-type="attribute" data-export data-readonly data-type="DOMHighResTimeStamp" id="dom-performancelonganimationframetiming-styleandlayoutstart"><code class="highlight"><c- g>styleAndLayoutStart</c-></code></dfn>;
    <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://w3c.github.io/hr-time/#idl-def-domhighrestimestamp" id="ref-for-idl-def-domhighrestimestamp④"><c- n>DOMHighResTimeStamp</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="PerformanceLongAnimationFrameTiming" data-dfn-type="attribute" data-export data-readonly data-type="DOMHighResTimeStamp" id="dom-performancelonganimationframetiming-blockingduration"><code class="highlight"><c- g>blockingDuration</c-></code></dfn>;
    <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://w3c.github.io/hr-time/#idl-def-domhighrestimestamp" id="ref-for-idl-def-domhighrestimestamp⑤"><c- n>DOMHighResTimeStamp</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="PerformanceLongAnimationFrameTiming" data-dfn-type="attribute" data-export data-readonly data-type="DOMHighResTimeStamp" id="dom-performancelonganimationframetiming-firstuieventtimestamp"><code class="highlight"><c- g>firstUIEventTimestamp</c-></code></dfn>;
    [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SameObject" id="ref-for-SameObject"><c- g>SameObject</c-></a>] <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-frozen-array" id="ref-for-idl-frozen-array"><c- b>FrozenArray</c-></a>&lt;<a data-link-type="idl-name" href="#performancescripttiming" id="ref-for-performancescripttiming"><c- n>PerformanceScriptTiming</c-></a>> <dfn class="dfn-paneled idl-code" data-dfn-for="PerformanceLongAnimationFrameTiming" data-dfn-type="attribute" data-export data-readonly data-type="FrozenArray<PerformanceScriptTiming>" id="dom-performancelonganimationframetiming-scripts"><code class="highlight"><c- g>scripts</c-></code></dfn>;
    [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Default" id="ref-for-Default"><c- g>Default</c-></a>] <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-object" id="ref-for-idl-object"><c- b>object</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="PerformanceLongAnimationFrameTiming" data-dfn-type="method" data-export data-lt="toJSON()" id="dom-performancelonganimationframetiming-tojson"><code class="highlight"><c- g>toJSON</c-></code></dfn>();
};
</pre>
   <p>A <code class="idl"><a data-link-type="idl" href="#performancelonganimationframetiming" id="ref-for-performancelonganimationframetiming①">PerformanceLongAnimationFrameTiming</a></code> has a <a data-link-type="dfn" href="#frame-timing-info" id="ref-for-frame-timing-info">frame timing info</a> <dfn class="dfn-paneled" data-dfn-for="PerformanceLongAnimationFrameTiming" data-dfn-type="dfn" data-noexport id="performancelonganimationframetiming-timing-info">timing info</dfn>.</p>
   <p>The <code class="idl"><a data-link-type="idl" href="#dom-performancelonganimationframetiming-entrytype" id="ref-for-dom-performancelonganimationframetiming-entrytype">entryType</a></code> attribute’s getter step is to return <code class="highlight"><c- u>"long-animation-frame"</c-></code>.</p>
   <p>The <code class="idl"><a data-link-type="idl" href="#dom-performancelonganimationframetiming-name" id="ref-for-dom-performancelonganimationframetiming-name">name</a></code> attribute’s getter step is to return <code class="highlight"><c- u>"long-animation-frame"</c-></code>.</p>
   <p>The <code class="idl"><a data-link-type="idl" href="#dom-performancelonganimationframetiming-starttime" id="ref-for-dom-performancelonganimationframetiming-starttime">startTime</a></code> attribute’s getter step is to return the <a data-link-type="dfn" href="https://w3c.github.io/hr-time/#dfn-relative-high-resolution-time" id="ref-for-dfn-relative-high-resolution-time">relative high resolution time</a> given <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this">this</a>'s <a data-link-type="dfn" href="#performancelonganimationframetiming-timing-info" id="ref-for-performancelonganimationframetiming-timing-info">timing info</a>'s <a data-link-type="dfn" href="#frame-timing-info-start-time" id="ref-for-frame-timing-info-start-time">start time</a> and <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①">this</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global">relevant global object</a>.</p>
   <p>The <code class="idl"><a data-link-type="idl" href="#dom-performancelonganimationframetiming-duration" id="ref-for-dom-performancelonganimationframetiming-duration">duration</a></code> attribute’s getter step is to return the <a data-link-type="dfn" href="https://w3c.github.io/hr-time/#dfn-duration" id="ref-for-dfn-duration">duration</a> between <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this②">this</a>'s <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/performance-timeline/#dom-performanceentry-starttime" id="ref-for-dom-performanceentry-starttime">startTime</a></code> and the <a data-link-type="dfn" href="https://w3c.github.io/hr-time/#dfn-relative-high-resolution-time" id="ref-for-dfn-relative-high-resolution-time①">relative high resolution time</a> given <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this③">this</a>'s <a data-link-type="dfn" href="#performancelonganimationframetiming-timing-info" id="ref-for-performancelonganimationframetiming-timing-info①">timing info</a>'s <a data-link-type="dfn" href="#frame-timing-info-end-time" id="ref-for-frame-timing-info-end-time">end time</a> and <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this④">this</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global①">relevant global object</a>.</p>
   <p>The <code class="idl"><a data-link-type="idl" href="#dom-performancelonganimationframetiming-renderstart" id="ref-for-dom-performancelonganimationframetiming-renderstart①">renderStart</a></code> attribute’s getter step is to return the <a data-link-type="dfn" href="https://w3c.github.io/hr-time/#dfn-relative-high-resolution-time" id="ref-for-dfn-relative-high-resolution-time②">relative high resolution time</a> given <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this⑤">this</a>'s <a data-link-type="dfn" href="#performancelonganimationframetiming-timing-info" id="ref-for-performancelonganimationframetiming-timing-info②">timing info</a>'s <a data-link-type="dfn" href="#frame-timing-info-update-the-rendering-start-time" id="ref-for-frame-timing-info-update-the-rendering-start-time">update the rendering start time</a> and <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this⑥">this</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global②">relevant global object</a>.</p>
   <p>The <code class="idl"><a data-link-type="idl" href="#dom-performancelonganimationframetiming-styleandlayoutstart" id="ref-for-dom-performancelonganimationframetiming-styleandlayoutstart①">styleAndLayoutStart</a></code> attribute’s getter step is to return the <a data-link-type="dfn" href="https://w3c.github.io/hr-time/#dfn-relative-high-resolution-time" id="ref-for-dfn-relative-high-resolution-time③">relative high resolution time</a> given <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this⑦">this</a>'s <a data-link-type="dfn" href="#performancelonganimationframetiming-timing-info" id="ref-for-performancelonganimationframetiming-timing-info③">timing info</a>'s <a data-link-type="dfn" href="#frame-timing-info-style-and-layout-start-time" id="ref-for-frame-timing-info-style-and-layout-start-time">style and layout start time</a> and <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this⑧">this</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global③">relevant global object</a>.</p>
   <p>The <code class="idl"><a data-link-type="idl" href="#dom-performancelonganimationframetiming-firstuieventtimestamp" id="ref-for-dom-performancelonganimationframetiming-firstuieventtimestamp">firstUIEventTimestamp</a></code> attribute’s getter step is to return the <a data-link-type="dfn" href="https://w3c.github.io/hr-time/#dfn-relative-high-resolution-time" id="ref-for-dfn-relative-high-resolution-time④">relative high resolution time</a> given <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this⑨">this</a>'s <a data-link-type="dfn" href="#performancelonganimationframetiming-timing-info" id="ref-for-performancelonganimationframetiming-timing-info④">timing info</a>'s <a data-link-type="dfn" href="#frame-timing-info-first-ui-event-timestamp" id="ref-for-frame-timing-info-first-ui-event-timestamp">first ui event timestamp</a> and <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①⓪">this</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global④">relevant global object</a>.</p>
   <p>The <code class="idl"><a data-link-type="idl" href="#dom-performancelonganimationframetiming-blockingduration" id="ref-for-dom-performancelonganimationframetiming-blockingduration">blockingDuration</a></code> attribute’s getter steps are:</p>
   <ol>
    <li data-md>
     <p>Let <var>sortedTaskDurations</var> be <a data-link-type="dfn" href="#performancelonganimationframetiming-timing-info" id="ref-for-performancelonganimationframetiming-timing-info⑤">timing info</a>'s <a data-link-type="dfn" href="#frame-timing-info-task-durations" id="ref-for-frame-timing-info-task-durations">task durations</a>, <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-sort-in-descending-order" id="ref-for-list-sort-in-descending-order">sorted in descending order</a>.</p>
    <li data-md>
     <p>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①①">this</a>'s <a data-link-type="dfn" href="#performancelonganimationframetiming-timing-info" id="ref-for-performancelonganimationframetiming-timing-info⑥">timing info</a>'s <a data-link-type="dfn" href="#frame-timing-info-update-the-rendering-start-time" id="ref-for-frame-timing-info-update-the-rendering-start-time①">update the rendering  start time</a> is not zero, then:</p>
     <ol>
      <li data-md>
       <p>Let <var>renderDuration</var> be the <a data-link-type="dfn" href="https://w3c.github.io/hr-time/#dfn-duration" id="ref-for-dfn-duration①">duration</a> between <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①②">this</a>'s <code class="idl"><a data-link-type="idl" href="#dom-performancelonganimationframetiming-renderstart" id="ref-for-dom-performancelonganimationframetiming-renderstart②">renderStart</a></code> and
the <a data-link-type="dfn" href="https://w3c.github.io/hr-time/#dfn-relative-high-resolution-time" id="ref-for-dfn-relative-high-resolution-time⑤">relative high resolution time</a> given <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①③">this</a>'s <a data-link-type="dfn" href="#performancelonganimationframetiming-timing-info" id="ref-for-performancelonganimationframetiming-timing-info⑦">timing info</a>'s <a data-link-type="dfn" href="#frame-timing-info-end-time" id="ref-for-frame-timing-info-end-time①">end time</a>.</p>
      <li data-md>
       <p>Increment <var>sortedTaskDurations</var>[0] by <var>renderDuration</var>.</p>
       <p class="note" role="note"><span class="marker">Note:</span> This makes it so that the longest task duration + render duration would be considered blocking if their total
duration is >50ms.</p>
     </ol>
    <li data-md>
     <p>Let <var>totalBlockingDuration</var> be 0.</p>
    <li data-md>
     <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate">For each</a> <var>duration</var> in <var>sortedTaskDurations</var>, if <var>duration</var> is greater than 50 then increment <var>totalBlockingDuration</var> by <var>duration</var> - 50.</p>
    <li data-md>
     <p>Return <var>totalBlockingDuration</var>.</p>
   </ol>
   <p>The <code class="idl"><a data-link-type="idl" href="#dom-performancelonganimationframetiming-scripts" id="ref-for-dom-performancelonganimationframetiming-scripts">scripts</a></code> attribute’s getter steps are:</p>
   <ol>
    <li data-md>
     <p>Let <var>scripts</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list">list</a> « ».</p>
    <li data-md>
     <p>Let <var>entryWindow</var> be <var>this</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global⑤">relevant global object</a>.</p>
    <li data-md>
     <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate①">For each</a> <var>scriptInfo</var> in <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①④">this</a>'s <a data-link-type="dfn" href="#frame-timing-info" id="ref-for-frame-timing-info①">frame timing info</a>'s <a data-link-type="dfn" href="#frame-timing-info-scripts" id="ref-for-frame-timing-info-scripts">scripts</a>:</p>
     <ol>
      <li data-md>
       <p>Let <var>scriptWindow</var> be <var>scriptInfo</var>’s <a data-link-type="dfn" href="#script-timing-info-window" id="ref-for-script-timing-info-window">window</a>.</p>
      <li data-md>
       <p>Let <var>scriptEntry</var> be a new <code class="idl"><a data-link-type="idl" href="#performancescripttiming" id="ref-for-performancescripttiming①">PerformanceScriptTiming</a></code> in <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①⑤">this</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm" id="ref-for-concept-relevant-realm">relevant realm</a>,
whose <a data-link-type="dfn" href="#performancescripttiming-timing-info" id="ref-for-performancescripttiming-timing-info">timing info</a> is <var>scriptInfo</var> and whose <a data-link-type="dfn" href="#performancescripttiming-window-attribution" id="ref-for-performancescripttiming-window-attribution">window attribution</a> is the value corresponding to the first matching statement:</p>
       <dl>
        <dt data-md><var>scriptWindow</var> is undefined
        <dd data-md>
         <p><code class="idl"><a data-link-type="idl" href="#dom-scriptwindowattribution-other" id="ref-for-dom-scriptwindowattribution-other">other</a></code></p>
        <dt data-md><var>scriptWindow</var> is <var>entryWindow</var>
        <dd data-md>
         <p><code class="idl"><a data-link-type="idl" href="#dom-scriptwindowattribution-self" id="ref-for-dom-scriptwindowattribution-self">self</a></code></p>
        <dt data-md><var>entryWindow</var>’s associated <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document">Document</a></code>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#node-navigable" id="ref-for-node-navigable">node navigable</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#ancestor-navigables" id="ref-for-ancestor-navigables">ancestor navigables</a> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-contain" id="ref-for-list-contain">contains</a> <var>scriptWindow</var>’s associated <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document①">Document</a></code>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#node-navigable" id="ref-for-node-navigable①">node navigable</a>
        <dd data-md>
         <p><code class="idl"><a data-link-type="idl" href="#dom-scriptwindowattribution-ancestor" id="ref-for-dom-scriptwindowattribution-ancestor">ancestor</a></code></p>
        <dt data-md><var>scriptWindow</var>’s associated <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document②">Document</a></code>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#node-navigable" id="ref-for-node-navigable②">node navigable</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#ancestor-navigables" id="ref-for-ancestor-navigables①">ancestor navigables</a> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-contain" id="ref-for-list-contain①">contains</a> <var>entryWindow</var>’s associated <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document③">Document</a></code>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#node-navigable" id="ref-for-node-navigable③">node navigable</a>
        <dd data-md>
         <p><code class="idl"><a data-link-type="idl" href="#dom-scriptwindowattribution-descendant" id="ref-for-dom-scriptwindowattribution-descendant">descendant</a></code></p>
        <dt data-md><var>entryWindow</var>’s associated <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document④">Document</a></code>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#node-navigable" id="ref-for-node-navigable④">node navigable</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-top" id="ref-for-nav-top">top-level traversable</a> is <var>scriptWindow</var>’s associated <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document⑤">Document</a></code>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#node-navigable" id="ref-for-node-navigable⑤">node navigable</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-top" id="ref-for-nav-top①">top-level traversable</a>
        <dd data-md>
         <p><code class="idl"><a data-link-type="idl" href="#dom-scriptwindowattribution-same-page" id="ref-for-dom-scriptwindowattribution-same-page">same-page</a></code></p>
        <dt data-md>Otherwise
        <dd data-md>
         <p><code class="idl"><a data-link-type="idl" href="#dom-scriptwindowattribution-other" id="ref-for-dom-scriptwindowattribution-other①">other</a></code>.</p>
       </dl>
      <li data-md>
       <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-append" id="ref-for-list-append">Append</a> <var>scriptEntry</var> to <var>scripts</var>.</p>
     </ol>
    <li data-md>
     <p>Return <var>scripts</var>.</p>
   </ol>
   <h3 class="heading settled" data-level="2.2" id="sec-PerformanceScriptTiming"><span class="secno">2.2. </span><span class="content"><code class="idl"><a data-link-type="idl" href="#performancescripttiming" id="ref-for-performancescripttiming②">PerformanceScriptTiming</a></code> interface</span><a class="self-link" href="#sec-PerformanceScriptTiming"></a></h3>
<pre class="idl highlight def"><c- b>enum</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="enum" data-export id="enumdef-scriptinvokertype"><code class="highlight"><c- g>ScriptInvokerType</c-></code></dfn> {
    <dfn class="dfn-paneled idl-code" data-dfn-for="ScriptInvokerType" data-dfn-type="enum-value" data-export id="dom-scriptinvokertype-classic-script"><code class="highlight"><c- s><c- u>"classic-script"</c-></c-></code></dfn>,
    <dfn class="dfn-paneled idl-code" data-dfn-for="ScriptInvokerType" data-dfn-type="enum-value" data-export id="dom-scriptinvokertype-module-script"><code class="highlight"><c- s><c- u>"module-script"</c-></c-></code></dfn>,
    <dfn class="dfn-paneled idl-code" data-dfn-for="ScriptInvokerType" data-dfn-type="enum-value" data-export id="dom-scriptinvokertype-event-listener"><code class="highlight"><c- s><c- u>"event-listener"</c-></c-></code></dfn>,
    <dfn class="dfn-paneled idl-code" data-dfn-for="ScriptInvokerType" data-dfn-type="enum-value" data-export id="dom-scriptinvokertype-user-callback"><code class="highlight"><c- s><c- u>"user-callback"</c-></c-></code></dfn>,
    <dfn class="dfn-paneled idl-code" data-dfn-for="ScriptInvokerType" data-dfn-type="enum-value" data-export id="dom-scriptinvokertype-resolve-promise"><code class="highlight"><c- s><c- u>"resolve-promise"</c-></c-></code></dfn>,
    <dfn class="dfn-paneled idl-code" data-dfn-for="ScriptInvokerType" data-dfn-type="enum-value" data-export id="dom-scriptinvokertype-reject-promise"><code class="highlight"><c- s><c- u>"reject-promise"</c-></c-></code></dfn>
};

<c- b>enum</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="enum" data-export id="enumdef-scriptwindowattribution"><code class="highlight"><c- g>ScriptWindowAttribution</c-></code></dfn> {
    <dfn class="dfn-paneled idl-code" data-dfn-for="ScriptWindowAttribution" data-dfn-type="enum-value" data-export id="dom-scriptwindowattribution-self"><code class="highlight"><c- s><c- u>"self"</c-></c-></code></dfn>, <dfn class="dfn-paneled idl-code" data-dfn-for="ScriptWindowAttribution" data-dfn-type="enum-value" data-export id="dom-scriptwindowattribution-descendant"><code class="highlight"><c- s><c- u>"descendant"</c-></c-></code></dfn>, <dfn class="dfn-paneled idl-code" data-dfn-for="ScriptWindowAttribution" data-dfn-type="enum-value" data-export id="dom-scriptwindowattribution-ancestor"><code class="highlight"><c- s><c- u>"ancestor"</c-></c-></code></dfn>, <dfn class="dfn-paneled idl-code" data-dfn-for="ScriptWindowAttribution" data-dfn-type="enum-value" data-export id="dom-scriptwindowattribution-same-page"><code class="highlight"><c- s><c- u>"same-page"</c-></c-></code></dfn>, <dfn class="dfn-paneled idl-code" data-dfn-for="ScriptWindowAttribution" data-dfn-type="enum-value" data-export id="dom-scriptwindowattribution-other"><code class="highlight"><c- s><c- u>"other"</c-></c-></code></dfn>
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed①"><c- g>Exposed</c-></a>=<c- n>Window</c->]
<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="performancescripttiming"><code class="highlight"><c- g>PerformanceScriptTiming</c-></code></dfn> : <a data-link-type="idl-name" href="https://w3c.github.io/performance-timeline/#the-performanceentry-interface" id="ref-for-the-performanceentry-interface①"><c- n>PerformanceEntry</c-></a> {
    /* Overloading PerformanceEntry */
    <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://w3c.github.io/hr-time/#idl-def-domhighrestimestamp" id="ref-for-idl-def-domhighrestimestamp⑥"><c- n>DOMHighResTimeStamp</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="PerformanceScriptTiming" data-dfn-type="attribute" data-export data-readonly data-type="DOMHighResTimeStamp" id="dom-performancescripttiming-starttime"><code class="highlight"><c- g>startTime</c-></code></dfn>;
    <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://w3c.github.io/hr-time/#idl-def-domhighrestimestamp" id="ref-for-idl-def-domhighrestimestamp⑦"><c- n>DOMHighResTimeStamp</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="PerformanceScriptTiming" data-dfn-type="attribute" data-export data-readonly data-type="DOMHighResTimeStamp" id="dom-performancescripttiming-duration"><code class="highlight"><c- g>duration</c-></code></dfn>;
    <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString②"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="PerformanceScriptTiming" data-dfn-type="attribute" data-export data-readonly data-type="DOMString" id="dom-performancescripttiming-name"><code class="highlight"><c- g>name</c-></code></dfn>;
    <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString③"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="PerformanceScriptTiming" data-dfn-type="attribute" data-export data-readonly data-type="DOMString" id="dom-performancescripttiming-entrytype"><code class="highlight"><c- g>entryType</c-></code></dfn>;

    <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="#enumdef-scriptinvokertype" id="ref-for-enumdef-scriptinvokertype"><c- n>ScriptInvokerType</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="PerformanceScriptTiming" data-dfn-type="attribute" data-export data-readonly data-type="ScriptInvokerType" id="dom-performancescripttiming-invokertype"><code class="highlight"><c- g>invokerType</c-></code></dfn>;
    <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString④"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="PerformanceScriptTiming" data-dfn-type="attribute" data-export data-readonly data-type="DOMString" id="dom-performancescripttiming-invoker"><code class="highlight"><c- g>invoker</c-></code></dfn>;
    <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://w3c.github.io/hr-time/#idl-def-domhighrestimestamp" id="ref-for-idl-def-domhighrestimestamp⑧"><c- n>DOMHighResTimeStamp</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="PerformanceScriptTiming" data-dfn-type="attribute" data-export data-readonly data-type="DOMHighResTimeStamp" id="dom-performancescripttiming-executionstart"><code class="highlight"><c- g>executionStart</c-></code></dfn>;
    <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString⑤"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="PerformanceScriptTiming" data-dfn-type="attribute" data-export data-readonly data-type="DOMString" id="dom-performancescripttiming-sourceurl"><code class="highlight"><c- g>sourceURL</c-></code></dfn>;
    <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString⑥"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="PerformanceScriptTiming" data-dfn-type="attribute" data-export data-readonly data-type="DOMString" id="dom-performancescripttiming-sourcefunctionname"><code class="highlight"><c- g>sourceFunctionName</c-></code></dfn>;
    <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-long-long" id="ref-for-idl-long-long"><c- b>long</c-> <c- b>long</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="PerformanceScriptTiming" data-dfn-type="attribute" data-export data-readonly data-type="long long" id="dom-performancescripttiming-sourcecharposition"><code class="highlight"><c- g>sourceCharPosition</c-></code></dfn>;
    <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://w3c.github.io/hr-time/#idl-def-domhighrestimestamp" id="ref-for-idl-def-domhighrestimestamp⑨"><c- n>DOMHighResTimeStamp</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="PerformanceScriptTiming" data-dfn-type="attribute" data-export data-readonly data-type="DOMHighResTimeStamp" id="dom-performancescripttiming-pauseduration"><code class="highlight"><c- g>pauseDuration</c-></code></dfn>;
    <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://w3c.github.io/hr-time/#idl-def-domhighrestimestamp" id="ref-for-idl-def-domhighrestimestamp①⓪"><c- n>DOMHighResTimeStamp</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="PerformanceScriptTiming" data-dfn-type="attribute" data-export data-readonly data-type="DOMHighResTimeStamp" id="dom-performancescripttiming-forcedstyleandlayoutduration"><code class="highlight"><c- g>forcedStyleAndLayoutDuration</c-></code></dfn>;
    <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" id="ref-for-window"><c- n>Window</c-></a>? <dfn class="dfn-paneled idl-code" data-dfn-for="PerformanceScriptTiming" data-dfn-type="attribute" data-export data-readonly data-type="Window?" id="dom-performancescripttiming-window"><code class="highlight"><c- g>window</c-></code></dfn>;
    <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="#enumdef-scriptwindowattribution" id="ref-for-enumdef-scriptwindowattribution"><c- n>ScriptWindowAttribution</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="PerformanceScriptTiming" data-dfn-type="attribute" data-export data-readonly data-type="ScriptWindowAttribution" id="dom-performancescripttiming-windowattribution"><code class="highlight"><c- g>windowAttribution</c-></code></dfn>;
    [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Default" id="ref-for-Default①"><c- g>Default</c-></a>] <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-object" id="ref-for-idl-object①"><c- b>object</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="PerformanceScriptTiming" data-dfn-type="method" data-export data-lt="toJSON()" id="dom-performancescripttiming-tojson"><code class="highlight"><c- g>toJSON</c-></code></dfn>();
};
</pre>
   <p>A <code class="idl"><a data-link-type="idl" href="#performancescripttiming" id="ref-for-performancescripttiming③">PerformanceScriptTiming</a></code> has an associated <a data-link-type="dfn" href="#script-timing-info" id="ref-for-script-timing-info">script timing info</a> <dfn class="dfn-paneled" data-dfn-for="PerformanceScriptTiming" data-dfn-type="dfn" data-noexport id="performancescripttiming-timing-info">timing info</dfn>.</p>
   <p>A <code class="idl"><a data-link-type="idl" href="#performancescripttiming" id="ref-for-performancescripttiming④">PerformanceScriptTiming</a></code> has an associated <code class="idl"><a data-link-type="idl" href="#enumdef-scriptwindowattribution" id="ref-for-enumdef-scriptwindowattribution①">ScriptWindowAttribution</a></code> <dfn class="dfn-paneled" data-dfn-for="PerformanceScriptTiming" data-dfn-type="dfn" data-noexport id="performancescripttiming-window-attribution">window attribution</dfn>.</p>
   <p>The <code class="idl"><a data-link-type="idl" href="#dom-performancescripttiming-entrytype" id="ref-for-dom-performancescripttiming-entrytype">entryType</a></code> attribute’s getter step is to return <code class="highlight"><c- u>"script"</c-></code>.</p>
   <p>The <code class="idl"><a data-link-type="idl" href="#dom-performancescripttiming-name" id="ref-for-dom-performancescripttiming-name">name</a></code> attribute’s getter step is to return <code class="highlight"><c- u>"script"</c-></code>.</p>
   <p>The <code class="idl"><a data-link-type="idl" href="#dom-performancescripttiming-invokertype" id="ref-for-dom-performancescripttiming-invokertype">invokerType</a></code> attribute’s getter step is to return <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①⑥">this</a>'s <a data-link-type="dfn" href="#performancescripttiming-timing-info" id="ref-for-performancescripttiming-timing-info①">timing info</a>'s <a data-link-type="dfn" href="#script-timing-info-invoker-type" id="ref-for-script-timing-info-invoker-type">invoker type</a>.</p>
   <p>The <code class="idl"><a data-link-type="idl" href="#dom-performancescripttiming-invoker" id="ref-for-dom-performancescripttiming-invoker">invoker</a></code> attribute’s getter steps are:</p>
   <ol>
    <li data-md>
     <p>Switch on <var>this</var>’s <code class="idl"><a data-link-type="idl" href="#dom-performancescripttiming-invokertype" id="ref-for-dom-performancescripttiming-invokertype①">invokerType</a></code>:</p>
     <dl>
      <dt data-md>"`classic-script`"
      <dt data-md>"`module-script`"
      <dd data-md>
       <p>Return <var>this</var>’s <a data-link-type="dfn" href="#performancescripttiming-timing-info" id="ref-for-performancescripttiming-timing-info②">timing info</a>'s <a data-link-type="dfn" href="#script-timing-info-source-url" id="ref-for-script-timing-info-source-url">source url</a>.</p>
      <dt data-md>"`event-listener`"
      <dd data-md>
       <ol>
        <li data-md>
         <p>Let <var>targetName</var> be <var>this</var>’s <a data-link-type="dfn" href="#performancescripttiming-timing-info" id="ref-for-performancescripttiming-timing-info③">timing info</a>'s <a data-link-type="dfn" href="#script-timing-info-invoker-name" id="ref-for-script-timing-info-invoker-name">invoker name</a>.</p>
        <li data-md>
         <p>If <var>this</var>’s <a data-link-type="dfn" href="#performancescripttiming-timing-info" id="ref-for-performancescripttiming-timing-info④">timing info</a>'s <a data-link-type="dfn" href="#script-timing-info-event-target-element-id" id="ref-for-script-timing-info-event-target-element-id">event target element id</a> is not the empty string, then:
Set <var>targetName</var> to the <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string-concatenate" id="ref-for-string-concatenate">concatenation</a> of « <var>targetName</var>, "#", <var>this</var>’s <a data-link-type="dfn" href="#performancescripttiming-timing-info" id="ref-for-performancescripttiming-timing-info⑤">timing info</a>'s <a data-link-type="dfn" href="#script-timing-info-event-target-element-id" id="ref-for-script-timing-info-event-target-element-id①">event target element id</a> ».</p>
        <li data-md>
         <p>Otherwise, If <var>this</var>’s <a data-link-type="dfn" href="#performancescripttiming-timing-info" id="ref-for-performancescripttiming-timing-info⑥">timing info</a>'s <a data-link-type="dfn" href="#script-timing-info-event-target-element-src-attribute" id="ref-for-script-timing-info-event-target-element-src-attribute">event target element src attribute</a> is not the empty string, then:
Set <var>targetName</var> to the <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string-concatenate" id="ref-for-string-concatenate①">concatenation</a> of « <var>targetName</var>, '[src=', <var>this</var>’s <a data-link-type="dfn" href="#performancescripttiming-timing-info" id="ref-for-performancescripttiming-timing-info⑦">timing info</a>'s <a data-link-type="dfn" href="#script-timing-info-event-target-element-src-attribute" id="ref-for-script-timing-info-event-target-element-src-attribute①">event target element src attribute</a>, ']' ».</p>
        <li data-md>
         <p>Return the <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string-concatenate" id="ref-for-string-concatenate②">concatenation</a> of « <var>targetName</var>, ".on", <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①⑦">this</a>'s <a data-link-type="dfn" href="#performancescripttiming-timing-info" id="ref-for-performancescripttiming-timing-info⑧">timing info</a>'s <a data-link-type="dfn" href="#script-timing-info-event-type" id="ref-for-script-timing-info-event-type">event type</a> ».</p>
       </ol>
       <p class="issue" id="issue-5d051999"><a class="self-link" href="#issue-5d051999"></a> this feels a bit custom, need to discuss name generation.</p>
      <dt data-md>"`user-callback`"
      <dd data-md>
       <p>Return <var>this</var>’s <a data-link-type="dfn" href="#performancescripttiming-timing-info" id="ref-for-performancescripttiming-timing-info⑨">timing info</a>'s <a data-link-type="dfn" href="#script-timing-info-invoker-name" id="ref-for-script-timing-info-invoker-name①">invoker name</a>.</p>
      <dt data-md>"`resolve-promise`"
      <dt data-md>"`reject-promise`"
      <dd data-md>
       <ol>
        <li data-md>
         <p>If <var>this</var>’s <a data-link-type="dfn" href="#performancescripttiming-timing-info" id="ref-for-performancescripttiming-timing-info①⓪">timing info</a>'s <a data-link-type="dfn" href="#script-timing-info-invoker-name" id="ref-for-script-timing-info-invoker-name②">invoker name</a> is the empty string,
then:</p>
         <ol>
          <li data-md>
           <p>If <var>this</var>’s <code class="idl"><a data-link-type="idl" href="#dom-performancescripttiming-invokertype" id="ref-for-dom-performancescripttiming-invokertype②">invokerType</a></code> is "`resolve-promise`", then return "`Promise.resolve`".</p>
          <li data-md>
           <p>Otherwise, return "`Promise.reject`".</p>
         </ol>
        <li data-md>
         <p>Let <var>thenOrCatch</var> be "`then`" if <code class="idl"><a data-link-type="idl" href="#dom-performancescripttiming-invokertype" id="ref-for-dom-performancescripttiming-invokertype③">invokerType</a></code> is "`resolve-promise`"; otherwise "`reject-promise`".</p>
        <li data-md>
         <p>Return the <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string-concatenate" id="ref-for-string-concatenate③">concatenation</a> of « <a data-link-type="dfn" href="#script-timing-info-invoker-name" id="ref-for-script-timing-info-invoker-name③">invoker name</a>, ".", <var>thenOrCatch</var> ».</p>
       </ol>
     </dl>
   </ol>
   <p>The <code class="idl"><a data-link-type="idl" href="#dom-performancescripttiming-starttime" id="ref-for-dom-performancescripttiming-starttime">startTime</a></code> attribute’s getter step is to return the <a data-link-type="dfn" href="https://w3c.github.io/hr-time/#dfn-relative-high-resolution-time" id="ref-for-dfn-relative-high-resolution-time⑥">relative high resolution time</a> given <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①⑧">this</a>'s <a data-link-type="dfn" href="#performancescripttiming-timing-info" id="ref-for-performancescripttiming-timing-info①①">timing info</a>'s <a data-link-type="dfn" href="#script-timing-info-start-time" id="ref-for-script-timing-info-start-time">start time</a> and <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①⑨">this</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global⑥">relevant global object</a>.</p>
   <p>The <code class="idl"><a data-link-type="idl" href="#dom-performancescripttiming-duration" id="ref-for-dom-performancescripttiming-duration">duration</a></code> attribute’s getter step is to return the <a data-link-type="dfn" href="https://w3c.github.io/hr-time/#dfn-duration" id="ref-for-dfn-duration②">duration</a> between <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this②⓪">this</a>'s <code class="idl"><a data-link-type="idl" href="#dom-performancescripttiming-starttime" id="ref-for-dom-performancescripttiming-starttime①">startTime</a></code> and the <a data-link-type="dfn" href="https://w3c.github.io/hr-time/#dfn-relative-high-resolution-time" id="ref-for-dfn-relative-high-resolution-time⑦">relative high resolution time</a> given <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this②①">this</a>'s <a data-link-type="dfn" href="#performancescripttiming-timing-info" id="ref-for-performancescripttiming-timing-info①②">timing info</a>'s <a data-link-type="dfn" href="#script-timing-info-end-time" id="ref-for-script-timing-info-end-time">end time</a> and <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this②②">this</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global⑦">relevant global object</a>.</p>
   <p>The <code class="idl"><a data-link-type="idl" href="#dom-performancescripttiming-executionstart" id="ref-for-dom-performancescripttiming-executionstart">executionStart</a></code> attribute’s getter step is to return 0 if <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this②③">this</a>'s <a data-link-type="dfn" href="#performancescripttiming-timing-info" id="ref-for-performancescripttiming-timing-info①③">timing info</a>'s <a data-link-type="dfn" href="#script-timing-info-execution-start-time" id="ref-for-script-timing-info-execution-start-time">execution start time</a> is 0; Otherwise the <a data-link-type="dfn" href="https://w3c.github.io/hr-time/#dfn-relative-high-resolution-time" id="ref-for-dfn-relative-high-resolution-time⑧">relative high resolution time</a> given <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this②④">this</a>'s <a data-link-type="dfn" href="#performancescripttiming-timing-info" id="ref-for-performancescripttiming-timing-info①④">timing info</a>'s <a data-link-type="dfn" href="#script-timing-info-execution-start-time" id="ref-for-script-timing-info-execution-start-time①">execution start time</a> and <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this②⑤">this</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global⑧">relevant global object</a>.</p>
   <p>The <code class="idl"><a data-link-type="idl" href="#dom-performancescripttiming-forcedstyleandlayoutduration" id="ref-for-dom-performancescripttiming-forcedstyleandlayoutduration">forcedStyleAndLayoutDuration</a></code> attribute’s getter step is to return an <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#implementation-defined" id="ref-for-implementation-defined">implementation-defined</a> value that represents time spent performing style and layout synchronously, e.g. by calling <code class="idl"><a data-link-type="idl" href="https://drafts.csswg.org/cssom-1/#dom-window-getcomputedstyle" id="ref-for-dom-window-getcomputedstyle">getComputedStyle()</a></code> or <code class="idl"><a data-link-type="idl" href="https://drafts.csswg.org/cssom-view-1/#dom-element-getboundingclientrect" id="ref-for-dom-element-getboundingclientrect">getBoundingClientRect()</a></code>.</p>
   <p class="issue" id="issue-64d28a1e"><a class="self-link" href="#issue-64d28a1e"></a> Find a way to make this interoperable/normative. Perhaps mark those functions in WebIDL as requiring synchronous style/layout? Also move to <a data-link-type="dfn" href="#performancescripttiming-timing-info" id="ref-for-performancescripttiming-timing-info①⑤">timing info</a> once that’s resolved.</p>
   <p>The <code class="idl"><a data-link-type="idl" href="#dom-performancescripttiming-pauseduration" id="ref-for-dom-performancescripttiming-pauseduration">pauseDuration</a></code> attribute’s getter step is to return <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this②⑥">this</a>'s <a data-link-type="dfn" href="#performancescripttiming-timing-info" id="ref-for-performancescripttiming-timing-info①⑥">timing info</a>'s <a data-link-type="dfn" href="#script-timing-info-pause-duration" id="ref-for-script-timing-info-pause-duration">pause duration</a>.</p>
   <p>The <code class="idl"><a data-link-type="idl" href="#dom-performancescripttiming-sourceurl" id="ref-for-dom-performancescripttiming-sourceurl">sourceURL</a></code> attribute’s getter step is to return <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this②⑦">this</a>'s <a data-link-type="dfn" href="#performancescripttiming-timing-info" id="ref-for-performancescripttiming-timing-info①⑦">timing info</a>'s <a data-link-type="dfn" href="#script-timing-info-source-url" id="ref-for-script-timing-info-source-url①">source url</a>.
The <code class="idl"><a data-link-type="idl" href="#dom-performancescripttiming-sourcefunctionname" id="ref-for-dom-performancescripttiming-sourcefunctionname">sourceFunctionName</a></code> attribute’s getter step is to return <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this②⑧">this</a>'s <a data-link-type="dfn" href="#performancescripttiming-timing-info" id="ref-for-performancescripttiming-timing-info①⑧">timing info</a>'s <a data-link-type="dfn" href="#script-timing-info-source-function-name" id="ref-for-script-timing-info-source-function-name">source function name</a>.
The <code class="idl"><a data-link-type="idl" href="#dom-performancescripttiming-sourcecharposition" id="ref-for-dom-performancescripttiming-sourcecharposition">sourceCharPosition</a></code> attribute’s getter step is to return <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this②⑨">this</a>'s <a data-link-type="dfn" href="#performancescripttiming-timing-info" id="ref-for-performancescripttiming-timing-info①⑨">timing info</a>'s <a data-link-type="dfn" href="#script-timing-info-source-character-position" id="ref-for-script-timing-info-source-character-position">source character position</a>.</p>
   <p>The <code class="idl"><a data-link-type="idl" href="#dom-performancescripttiming-window" id="ref-for-dom-performancescripttiming-window">window</a></code> attribute’s getter steps are:</p>
   <ol>
    <li data-md>
     <p>Let <var>window</var> be the result of calling <a data-link-type="dfn" href="https://tc39.es/ecma262/multipage/managing-memory.html#sec-weakrefderef" id="ref-for-sec-weakrefderef">deref</a> on <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this③⓪">this</a>'s <a data-link-type="dfn" href="#performancescripttiming-timing-info" id="ref-for-performancescripttiming-timing-info②⓪">timing info</a>'s <a data-link-type="dfn" href="#script-timing-info-window" id="ref-for-script-timing-info-window①">window</a>.</p>
    <li data-md>
     <p>If <var>window</var> is undefined, then return null; Otherwise return <var>window</var>.</p>
   </ol>
   <p>The <code class="idl"><a data-link-type="idl" href="#dom-performancescripttiming-windowattribution" id="ref-for-dom-performancescripttiming-windowattribution">windowAttribution</a></code> attribute’s getter step is to return <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this③①">this</a>'s <a data-link-type="dfn" href="#performancescripttiming-window-attribution" id="ref-for-performancescripttiming-window-attribution①">window attribution</a>.</p>
   <h2 class="heading settled" data-level="3" id="sec-processing-model"><span class="secno">3. </span><span class="content">Processing model</span><a class="self-link" href="#sec-processing-model"></a></h2>
   <p class="note" role="note"><span class="marker">Note:</span> A user agent implementing the Long Animation Frame API would need to include <code class="highlight"><c- u>"long-animation-frame"</c-></code> in <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/performance-timeline/#supportedentrytypes-attribute" id="ref-for-supportedentrytypes-attribute">supportedEntryTypes</a></code> for <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" id="ref-for-window①">Window</a></code> contexts, respectively.</p>
   <h3 class="heading settled" data-level="3.1" id="sec-frame-timing-info"><span class="secno">3.1. </span><span class="content">Frame Timing Info</span><a class="self-link" href="#sec-frame-timing-info"></a></h3>
    <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="frame-timing-info">frame timing info</dfn> is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#struct" id="ref-for-struct">struct</a> used as a bookkeeping detail by the long animation frame algorithms.
It has the following <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#struct-item" id="ref-for-struct-item">items</a>: 
   <dl>
    <dt data-md><dfn class="dfn-paneled" data-dfn-for="frame timing info" data-dfn-type="dfn" data-noexport id="frame-timing-info-start-time">start time</dfn>
    <dt data-md><dfn class="dfn-paneled" data-dfn-for="frame timing info" data-dfn-type="dfn" data-noexport id="frame-timing-info-current-task-start-time">current task start time</dfn>
    <dt data-md><dfn class="dfn-paneled" data-dfn-for="frame timing info" data-dfn-type="dfn" data-noexport id="frame-timing-info-update-the-rendering-start-time">update the rendering start time</dfn>
    <dt data-md><dfn class="dfn-paneled" data-dfn-for="frame timing info" data-dfn-type="dfn" data-noexport id="frame-timing-info-style-and-layout-start-time">style and layout start time</dfn>
    <dt data-md><dfn class="dfn-paneled" data-dfn-for="frame timing info" data-dfn-type="dfn" data-noexport id="frame-timing-info-first-ui-event-timestamp">first ui event timestamp</dfn>
    <dt data-md><dfn class="dfn-paneled" data-dfn-for="frame timing info" data-dfn-type="dfn" data-noexport id="frame-timing-info-end-time">end time</dfn>
    <dd data-md>
     <p>A <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/hr-time/#idl-def-domhighrestimestamp" id="ref-for-idl-def-domhighrestimestamp①①">DOMHighResTimeStamp</a></code>, initially 0.
Note: all the above are [=monotonic clock/unsafe current time=|unsafe=],
and should be <a data-link-type="dfn" href="https://w3c.github.io/hr-time/#dfn-coarsen-time" id="ref-for-dfn-coarsen-time">coarsened</a> when exposed via an API.</p>
    <dt data-md><dfn class="dfn-paneled" data-dfn-for="frame timing info" data-dfn-type="dfn" data-noexport id="frame-timing-info-task-durations">task durations</dfn>
    <dd data-md>
     <p>A <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list①">list</a> of <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/hr-time/#idl-def-domhighrestimestamp" id="ref-for-idl-def-domhighrestimestamp①②">DOMHighResTimeStamp</a></code>, initially empty.</p>
    <dt data-md><dfn class="dfn-paneled" data-dfn-for="frame timing info" data-dfn-type="dfn" data-noexport id="frame-timing-info-scripts">scripts</dfn>
    <dd data-md>
     <p>A <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list②">list</a> of <a data-link-type="dfn" href="#script-timing-info" id="ref-for-script-timing-info①">script timing info</a>, initially empty.</p>
    <dt data-md><dfn class="dfn-paneled" data-dfn-for="frame timing info" data-dfn-type="dfn" data-noexport id="frame-timing-info-pending-script">pending script</dfn>
    <dd data-md>
     <p>Null or a <a data-link-type="dfn" href="#script-timing-info" id="ref-for-script-timing-info②">script timing info</a>, initially null.</p>
   </dl>
   <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="script-timing-info">script timing info</dfn> is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#struct" id="ref-for-struct①">struct</a>. It has the following <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#struct-item" id="ref-for-struct-item①">items</a>:</p>
   <dl>
    <dt data-md><dfn class="dfn-paneled" data-dfn-for="script timing info" data-dfn-type="dfn" data-noexport id="script-timing-info-invoker-type">invoker type</dfn>
    <dd data-md>
     <p>A <code class="idl"><a data-link-type="idl" href="#enumdef-scriptinvokertype" id="ref-for-enumdef-scriptinvokertype①">ScriptInvokerType</a></code>.</p>
    <dt data-md><dfn class="dfn-paneled" data-dfn-for="script timing info" data-dfn-type="dfn" data-noexport id="script-timing-info-start-time">start time</dfn>
    <dt data-md><dfn class="dfn-paneled" data-dfn-for="script timing info" data-dfn-type="dfn" data-noexport id="script-timing-info-end-time">end time</dfn>
    <dt data-md><dfn class="dfn-paneled" data-dfn-for="script timing info" data-dfn-type="dfn" data-noexport id="script-timing-info-execution-start-time">execution start time</dfn>
    <dd data-md>
     <p>An unsafe <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/hr-time/#idl-def-domhighrestimestamp" id="ref-for-idl-def-domhighrestimestamp①③">DOMHighResTimeStamp</a></code>, initially 0.</p>
    <dt data-md><dfn class="dfn-paneled" data-dfn-for="script timing info" data-dfn-type="dfn" data-noexport id="script-timing-info-pause-duration">pause duration</dfn>
    <dd data-md>
     <p>A <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/hr-time/#idl-def-domhighrestimestamp" id="ref-for-idl-def-domhighrestimestamp①④">DOMHighResTimeStamp</a></code> representing a number of milliseconds, initially 0.</p>
    <dt data-md><dfn class="dfn-paneled" data-dfn-for="script timing info" data-dfn-type="dfn" data-noexport id="script-timing-info-invoker-name">invoker name</dfn>
    <dt data-md><dfn class="dfn-paneled" data-dfn-for="script timing info" data-dfn-type="dfn" data-noexport id="script-timing-info-source-url">source url</dfn>
    <dt data-md><dfn class="dfn-paneled" data-dfn-for="script timing info" data-dfn-type="dfn" data-noexport id="script-timing-info-source-function-name">source function name</dfn>
    <dt data-md><dfn class="dfn-paneled" data-dfn-for="script timing info" data-dfn-type="dfn" data-noexport id="script-timing-info-event-type">event type</dfn>
    <dt data-md><dfn class="dfn-paneled" data-dfn-for="script timing info" data-dfn-type="dfn" data-noexport id="script-timing-info-event-target-element-id">event target element id</dfn>
    <dt data-md><dfn class="dfn-paneled" data-dfn-for="script timing info" data-dfn-type="dfn" data-noexport id="script-timing-info-event-target-element-src-attribute">event target element src attribute</dfn>
    <dd data-md>
     <p>A string, initially the empty string.</p>
    <dt data-md><dfn class="dfn-paneled" data-dfn-for="script timing info" data-dfn-type="dfn" data-noexport id="script-timing-info-source-character-position">source character position</dfn>
    <dd data-md>
     <p>A number, initially -1.</p>
    <dt data-md><dfn class="dfn-paneled" data-dfn-for="script timing info" data-dfn-type="dfn" data-noexport id="script-timing-info-window">window</dfn>
    <dd data-md>
     <p>A <code class="idl"><a data-link-type="idl" href="https://tc39.es/ecma262/multipage/managing-memory.html#sec-weak-ref-objects" id="ref-for-sec-weak-ref-objects">WeakRef</a></code> to a <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" id="ref-for-window②">Window</a></code>.</p>
   </dl>
   <p>A <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document⑥">Document</a></code> has a null or <a data-link-type="dfn" href="#frame-timing-info" id="ref-for-frame-timing-info②">frame timing info</a> <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="current-frame-timing-info">current frame timing info</dfn>, initially null.</p>
   <h3 class="heading settled" data-level="3.2" id="loaf-processing-model"><span class="secno">3.2. </span><span class="content">Report Long Animation Frames</span><a class="self-link" href="#loaf-processing-model"></a></h3>
   <h4 class="heading settled" data-level="3.2.1" id="loaf-monitoring"><span class="secno">3.2.1. </span><span class="content">Long Animation Frame Monitoring {#loaf-monitoring}</span><a class="self-link" href="#loaf-monitoring"></a></h4>
   <div class="algorithm" data-algorithm="Accessing the frame timing info">
     To get the <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="nearest-same-origin-root">nearest same-origin root</dfn> for a <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document⑦">Document</a></code> <var>document</var>: 
    <ol>
     <li data-md>
      <p>Let <var>ancestors</var> be the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#ancestor-navigables" id="ref-for-ancestor-navigables②">ancestor navigables</a> of <var>document</var>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate②">For each</a> <var>ancestorNavigable</var> in <var>ancestors</var>:
If <var>ancestorNavigable</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-document" id="ref-for-nav-document">active document</a>'s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document-origin" id="ref-for-concept-document-origin">origin</a> is <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#same-origin" id="ref-for-same-origin">same origin</a> with <var>document</var>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document-origin" id="ref-for-concept-document-origin①">origin</a>,
    and <var>ancestorNavigable</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-document" id="ref-for-nav-document①">active document</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#relevant-agent" id="ref-for-relevant-agent">relevant agent</a> is <var>document</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#relevant-agent" id="ref-for-relevant-agent①">relevant agent</a>,
    then return <var>ancestorNavigable</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-document" id="ref-for-nav-document②">active document</a>.</p>
     <li data-md>
      <p>Return <var>document</var>.</p>
    </ol>
    <p>The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="relevant-frame-timing-info">relevant frame timing info</dfn> for a <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document⑧">Document</a></code> <var>document</var> is its <a data-link-type="dfn" href="#nearest-same-origin-root" id="ref-for-nearest-same-origin-root">nearest same-origin root</a>'s <a data-link-type="dfn" href="#current-frame-timing-info" id="ref-for-current-frame-timing-info">current frame timing info</a>.</p>
   </div>
   <div class="algorithm" data-algorithm="Record task start time">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="record-task-start-time">record task start time</dfn> given a <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/hr-time/#idl-def-domhighrestimestamp" id="ref-for-idl-def-domhighrestimestamp①⑤">DOMHighResTimeStamp</a></code> <var>unsafeTaskStartTime</var>, and a <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document⑨">Document</a></code> <var>document</var>: 
    <ol>
     <li data-md>
      <p>Let <var>root</var> be <var>document</var>’s <a data-link-type="dfn" href="#nearest-same-origin-root" id="ref-for-nearest-same-origin-root①">nearest same-origin root</a>.</p>
     <li data-md>
      <p>If <var>root</var>’s <a data-link-type="dfn" href="#current-frame-timing-info" id="ref-for-current-frame-timing-info①">current frame timing info</a> is null,
then set <var>root</var>’s <a data-link-type="dfn" href="#current-frame-timing-info" id="ref-for-current-frame-timing-info②">current frame timing info</a> to a new <a data-link-type="dfn" href="#frame-timing-info" id="ref-for-frame-timing-info③">frame timing info</a> whose <a data-link-type="dfn" href="#frame-timing-info-start-time" id="ref-for-frame-timing-info-start-time①">start time</a> is <var>unsafeTaskStartTime</var>.</p>
     <li data-md>
      <p>Set <var>root</var>’s <a data-link-type="dfn" href="#current-frame-timing-info" id="ref-for-current-frame-timing-info③">current frame timing info</a>'s <a data-link-type="dfn" href="#frame-timing-info-current-task-start-time" id="ref-for-frame-timing-info-current-task-start-time">current task start time</a> to <var>unsafeTaskStartTime</var>.</p>
     <li data-md>
      <p>If <var>root</var>’s <a data-link-type="dfn" href="#current-frame-timing-info" id="ref-for-current-frame-timing-info④">current frame timing info</a>'s 's <a data-link-type="dfn" href="#frame-timing-info-start-time" id="ref-for-frame-timing-info-start-time②">start time</a> is 0, then set <var>root</var>’s <a data-link-type="dfn" href="#current-frame-timing-info" id="ref-for-current-frame-timing-info⑤">current frame timing info</a>'s <a data-link-type="dfn" href="#frame-timing-info-start-time" id="ref-for-frame-timing-info-start-time③">start time</a> to <var>unsafeTaskStartTime</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="Report task end time">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="record-task-end-time">record task end time</dfn> given an <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/hr-time/#idl-def-domhighrestimestamp" id="ref-for-idl-def-domhighrestimestamp①⑥">DOMHighResTimeStamp</a></code> <var>unsafeTaskEndTime</var>, and a <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document①⓪">Document</a></code> <var>document</var>: 
    <ol>
     <li data-md>
      <p>Let <var>timingInfo</var> be <var>document</var>’s <a data-link-type="dfn" href="#relevant-frame-timing-info" id="ref-for-relevant-frame-timing-info">relevant frame timing info</a>.</p>
     <li data-md>
      <p>If <var>timingInfo</var> is null, then return.</p>
      <p class="note" role="note"><span class="marker">Note:</span> This can occur if the browser becomes hidden during the sequence.</p>
     <li data-md>
      <p>Let <var>safeTaskEndTime</var> be the <a data-link-type="dfn" href="https://w3c.github.io/hr-time/#dfn-relative-high-resolution-time" id="ref-for-dfn-relative-high-resolution-time⑨">relative high resolution time</a> given <var>unsafeTaskEndTime</var> and <var>document</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global⑨">relevant global object</a>.</p>
     <li data-md>
      <p>Let <var>safeTaskStartTime</var> be the <a data-link-type="dfn" href="https://w3c.github.io/hr-time/#dfn-relative-high-resolution-time" id="ref-for-dfn-relative-high-resolution-time①⓪">relative high resolution time</a> given <var>timingInfo</var>’s <a data-link-type="dfn" href="#frame-timing-info-current-task-start-time" id="ref-for-frame-timing-info-current-task-start-time①">current task start time</a> and <var>document</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global①⓪">relevant global object</a>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-append" id="ref-for-list-append①">Append</a> the <a data-link-type="dfn" href="https://w3c.github.io/hr-time/#dfn-duration" id="ref-for-dfn-duration③">duration</a> between <var>safeTaskStartTime</var> and <var>safeTaskEndTime</var> to <var>timingInfo</var>’s <a data-link-type="dfn" href="#frame-timing-info-task-durations" id="ref-for-frame-timing-info-task-durations①">task durations</a>.</p>
     <li data-md>
      <p>If the user agent believes that updating the rendering of <var>document</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#node-navigable" id="ref-for-node-navigable⑥">node navigable</a> would have no visible effect, then <a data-link-type="dfn" href="#report-frame-timing" id="ref-for-report-frame-timing">report frame timing</a> given <var>document</var> and return.</p>
      <p class="note" role="note"><span class="marker">Note:</span> even though there was no actual visual update, we mark a <a data-link-type="dfn" href="#long-animation-frame" id="ref-for-long-animation-frame">long animation frame</a> here because it would be blocking in a scenario where it coincided with an unrelated visual update.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="Report rendering time">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="record-rendering-time">record rendering time</dfn> given a <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document①①">Document</a></code> <var>document</var>, and a <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/hr-time/#idl-def-domhighrestimestamp" id="ref-for-idl-def-domhighrestimestamp①⑦">DOMHighResTimeStamp</a></code> <var>unsafeStyleAndLayoutStart</var>: 
    <ol>
     <li data-md>
      <p>Let <var>timingInfo</var> be <var>document</var>’s <a data-link-type="dfn" href="#relevant-frame-timing-info" id="ref-for-relevant-frame-timing-info①">relevant frame timing info</a>.</p>
     <li data-md>
      <p>If <var>timingInfo</var> is null, then return.</p>
      <p class="note" role="note"><span class="marker">Note:</span> This can occur if the browser becomes hidden during the sequence.</p>
     <li data-md>
      <p>Set <var>timingInfo</var>’s <a data-link-type="dfn" href="#frame-timing-info-update-the-rendering-start-time" id="ref-for-frame-timing-info-update-the-rendering-start-time②">update the rendering start time</a> to <var>timingInfo</var>’s <a data-link-type="dfn" href="#frame-timing-info-current-task-start-time" id="ref-for-frame-timing-info-current-task-start-time②">current task start time</a>.</p>
     <li data-md>
      <p>Set <var>timingInfo</var>’s <a data-link-type="dfn" href="#frame-timing-info-style-and-layout-start-time" id="ref-for-frame-timing-info-style-and-layout-start-time①">style and layout start time</a> to <var>unsafeStyleAndLayoutStart</var>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="#report-frame-timing" id="ref-for-report-frame-timing①">report frame timing</a> given <var>document</var> and the <a data-link-type="dfn" href="https://w3c.github.io/hr-time/#dfn-unsafe-shared-current-time" id="ref-for-dfn-unsafe-shared-current-time">unsafe shared current time</a>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="Queue frame timing">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="report-frame-timing">report frame timing</dfn> given a <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document①②">Document</a></code> <var>document</var> and a <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/hr-time/#idl-def-domhighrestimestamp" id="ref-for-idl-def-domhighrestimestamp①⑧">DOMHighResTimeStamp</a></code> <var>unsafeEndTime</var>: 
    <ol>
     <li data-md>
      <p>Let <var>timingInfo</var> be <var>document</var>’s <a data-link-type="dfn" href="#relevant-frame-timing-info" id="ref-for-relevant-frame-timing-info②">relevant frame timing info</a>.</p>
     <li data-md>
      <p class="assertion">Assert: <var>timingInfo</var> is not null.</p>
     <li data-md>
      <p>Let <var>global</var> be <var>document</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global①①">relevant global object</a>.</p>
     <li data-md>
      <p>Let <var>frameDuration</var> be the <a data-link-type="dfn" href="https://w3c.github.io/hr-time/#dfn-duration" id="ref-for-dfn-duration④">duration</a> between the <a data-link-type="dfn" href="https://w3c.github.io/hr-time/#dfn-relative-high-resolution-time" id="ref-for-dfn-relative-high-resolution-time①①">relative high resolution time</a> given <var>timingInfo</var>’s <a data-link-type="dfn" href="#frame-timing-info-start-time" id="ref-for-frame-timing-info-start-time④">start time</a> and <var>global</var>,
and the <a data-link-type="dfn" href="https://w3c.github.io/hr-time/#dfn-relative-high-resolution-time" id="ref-for-dfn-relative-high-resolution-time①②">relative high resolution time</a> given <var>unsafeEndTime</var> and <var>global</var>.</p>
     <li data-md>
      <p>If <var>frameDuration</var> is greater than 50 milliseconds, then <a data-link-type="dfn" href="https://w3c.github.io/performance-timeline/#dfn-queue-a-performanceentry" id="ref-for-dfn-queue-a-performanceentry">Queue</a> a new <code class="idl"><a data-link-type="idl" href="#performancelonganimationframetiming" id="ref-for-performancelonganimationframetiming②">PerformanceLongAnimationFrameTiming</a></code> in <var>document</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm" id="ref-for-concept-relevant-realm①">relevant realm</a>,
whose <a data-link-type="dfn" href="#performancelonganimationframetiming-timing-info" id="ref-for-performancelonganimationframetiming-timing-info⑧">timing info</a> is <var>timingInfo</var>.</p>
     <li data-md>
      <p>set <var>document</var>’s <a data-link-type="dfn" href="#nearest-same-origin-root" id="ref-for-nearest-same-origin-root②">nearest same-origin root</a>'s <a data-link-type="dfn" href="#current-frame-timing-info" id="ref-for-current-frame-timing-info⑥">current frame timing info</a> to null.</p>
    </ol>
   </div>
   <h4 class="heading settled" data-level="3.2.2" id="long-script-monitoring"><span class="secno">3.2.2. </span><span class="content">Long Script Monitoring</span><a class="self-link" href="#long-script-monitoring"></a></h4>
   <div class="algorithm" data-algorithm="Report pending user callback">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="record-timing-info-for-user-callback">record timing info for user callback</dfn> given a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-callback-function" id="ref-for-dfn-callback-function">callback function</a> <var>callback</var> and an <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object" id="ref-for-environment-settings-object">environment settings object</a> <var>settings</var>: <a data-link-type="dfn" href="#create-script-entry-point" id="ref-for-create-script-entry-point">Create script entry point</a> given <var>settings</var>, "`user-callback`", and the following steps given a <a data-link-type="dfn" href="#script-timing-info" id="ref-for-script-timing-info③">script timing info</a> <var>scriptTimingInfo</var>: 
    <ol>
     <li data-md>
      <p>Set <var>scriptTimingInfo</var>’s <a data-link-type="dfn" href="#script-timing-info-invoker-name" id="ref-for-script-timing-info-invoker-name④">invoker name</a> to <var>callback</var>’s <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-identifier" id="ref-for-dfn-identifier">identifier</a>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="#apply-source-location" id="ref-for-apply-source-location">Apply source location</a> for <var>scriptTimingInfo</var> given <var>callback</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="Report pending timer">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="record-timing-info-for-timer-handler">record timing info for timer handler</dfn> given a string or <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#Function" id="ref-for-Function">Function</a></code> <var>handler</var>, an <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object" id="ref-for-environment-settings-object①">environment settings object</a> <var>settings</var>, and a boolean <var>repeat</var>: <a data-link-type="dfn" href="#create-script-entry-point" id="ref-for-create-script-entry-point①">Create script entry point</a> given <var>settings</var>, "`user-callback`",
            and the following steps given a <a data-link-type="dfn" href="#script-timing-info" id="ref-for-script-timing-info④">script timing info</a> <var>scriptTimingInfo</var>: 
    <ol>
     <li data-md>
      <p>Let <var>setTimeoutOrInterval</var> be "setInterval" if <var>repeat</var> is true, "setTimeout" otherwise.</p>
     <li data-md>
      <p>Set <var>scriptTimingInfo</var>’s <a data-link-type="dfn" href="#script-timing-info-invoker-name" id="ref-for-script-timing-info-invoker-name⑤">invoker name</a> to <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string-concatenate" id="ref-for-string-concatenate④">concatenation</a> of
« TimerHandler:", <var>setTimeoutOrInterval</var> ».</p>
     <li data-md>
      <p>If <var>handler</var> is a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#Function" id="ref-for-Function①">Function</a></code>, then <a data-link-type="dfn" href="#apply-source-location" id="ref-for-apply-source-location①">apply source location</a> for <var>scriptTimingInfo</var> given <var>handler</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="Report event listener">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="record-timing-info-for-event-listener">record timing info for event listener</dfn> given an <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#event" id="ref-for-event">Event</a></code> <var>event</var> and an <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#callbackdef-eventlistener" id="ref-for-callbackdef-eventlistener">EventListener</a></code> <var>listener</var>: <a data-link-type="dfn" href="#create-script-entry-point" id="ref-for-create-script-entry-point②">Create script entry point</a> given <var>listener</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object" id="ref-for-relevant-settings-object">relevant settings object</a>, "`event-listener`",
        and the following steps given a <a data-link-type="dfn" href="#script-timing-info" id="ref-for-script-timing-info⑤">script timing info</a> <var>scriptTimingInfo</var> and a <a data-link-type="dfn" href="#frame-timing-info" id="ref-for-frame-timing-info④">frame timing info</a> <var>frameTimingInfo</var>: 
    <ol>
     <li data-md>
      <p>Set <var>scriptTimingInfo</var>’s <a data-link-type="dfn" href="#script-timing-info-event-type" id="ref-for-script-timing-info-event-type①">event type</a> to <var>event</var>’s <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-event-type" id="ref-for-dom-event-type">type</a></code>.</p>
     <li data-md>
      <p>Let <var>target</var> be <var>event</var>’s <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-event-currenttarget" id="ref-for-dom-event-currenttarget">currentTarget</a></code>.</p>
     <li data-md>
      <p>If <var>target</var> is a <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#node" id="ref-for-node">Node</a></code>, then:</p>
      <ol>
       <li data-md>
        <p>Set <var>scriptTimingInfo</var>’s <a data-link-type="dfn" href="#script-timing-info-invoker-name" id="ref-for-script-timing-info-invoker-name⑥">invoker name</a> to <var>target</var>’s <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-node-nodename" id="ref-for-dom-node-nodename">nodeName</a></code>.</p>
       <li data-md>
        <p>If <var>target</var> is an <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element">Element</a></code>, then:</p>
        <ol>
         <li data-md>
          <p>Set <var>scriptTimingInfo</var>’s <a data-link-type="dfn" href="#script-timing-info-event-target-element-id" id="ref-for-script-timing-info-event-target-element-id②">event target element id</a> to <var>target</var>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-id" id="ref-for-concept-id">id</a>.</p>
         <li data-md>
          <p>Set <var>scriptTimingInfo</var>’s <a data-link-type="dfn" href="#script-timing-info-event-target-element-src-attribute" id="ref-for-script-timing-info-event-target-element-src-attribute②">event target element src attribute</a> to the result of <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-element-attributes-get-by-name" id="ref-for-concept-element-attributes-get-by-name">getting an attribute value by name</a> "`src`" and <var>target</var>.</p>
        </ol>
      </ol>
     <li data-md>
      <p>Else, set <var>scriptTimingInfo</var>’s <a data-link-type="dfn" href="#script-timing-info-invoker-name" id="ref-for-script-timing-info-invoker-name⑦">invoker name</a> to <var>target</var>’s interface name.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="#apply-source-location" id="ref-for-apply-source-location②">Apply source location</a> for <var>scriptTimingInfo</var> given <var>listener</var>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#event-listener-callback" id="ref-for-event-listener-callback">callback</a>.</p>
     <li data-md>
      <p>If <var>event</var> is a <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/uievents/#uievent" id="ref-for-uievent">UIEvent</a></code>, and <var>frameTimingInfo</var>’s <a data-link-type="dfn" href="#frame-timing-info-first-ui-event-timestamp" id="ref-for-frame-timing-info-first-ui-event-timestamp①">first ui event timestamp</a> is 0,
then set <var>frameTimingInfo</var>’s <a data-link-type="dfn" href="#frame-timing-info-first-ui-event-timestamp" id="ref-for-frame-timing-info-first-ui-event-timestamp②">first ui event timestamp</a> to <var>event</var>’s <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-event-timestamp" id="ref-for-dom-event-timestamp">timeStamp</a></code>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="Report promise resolver">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="record-timing-info-for-promise-resolver">record timing info for promise resolver</dfn> given a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise">Promise</a></code> <var>promise</var> and a "`resolve-promise`" or "`reject-promise`" <var>type</var>: 
    <ol>
     <li data-md>
      <p><a data-link-type="dfn" href="#create-script-entry-point" id="ref-for-create-script-entry-point③">Create script entry point</a> given <var>promise</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm" id="ref-for-concept-relevant-realm②">relevant realm</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-realm-settings-object" id="ref-for-concept-realm-settings-object">settings object</a>, <var>type</var>,
and the following steps given a <a data-link-type="dfn" href="#script-timing-info" id="ref-for-script-timing-info⑥">script timing info</a> <var>scriptTimingInfo</var>:</p>
      <ol>
       <li data-md>
        <p>Set <var>scriptTimingInfo</var>’s <a data-link-type="dfn" href="#script-timing-info-invoker-name" id="ref-for-script-timing-info-invoker-name⑧">invoker name</a> to <var>promise</var>’s <a data-link-type="dfn" href="#promise-invoker-name-when-created" id="ref-for-promise-invoker-name-when-created">invoker name when created</a>.</p>
       <li data-md>
        <p>Set <var>scriptTimingInfo</var>’s <a data-link-type="dfn" href="#script-timing-info-source-url" id="ref-for-script-timing-info-source-url②">source url</a> to <var>promise</var>’s <a data-link-type="dfn" href="#promise-script-url-when-created" id="ref-for-promise-script-url-when-created">script url when created</a>.</p>
      </ol>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="Set source URL for script block">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="set-source-url-for-script-block">set source url for script block</dfn> given a <a data-link-type="dfn" href="#script-timing-info" id="ref-for-script-timing-info⑦">script timing info</a> <var>scriptTimingInfo</var>, a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-script" id="ref-for-concept-script">script</a> <var>script</var>, and a <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url" id="ref-for-concept-url">URL</a>-or-null <var>url</var>: 
    <ol>
     <li data-md>
      <p>If <var>url</var> is null, then return.</p>
     <li data-md>
      <p>If <var>url</var>’s <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-scheme" id="ref-for-concept-url-scheme">scheme</a> is "`http`" or "`https`", then set <var>scriptTimingInfo</var>’s <a data-link-type="dfn" href="#script-timing-info-source-url" id="ref-for-script-timing-info-source-url③">source url</a> to <var>script</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-script-base-url" id="ref-for-concept-script-base-url">base URL</a>.</p>
     <li data-md>
      <p>Otherwise, if <var>url</var>’s <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-scheme" id="ref-for-concept-url-scheme①">scheme</a> is "`blob`" or "`data`" then set <var>scriptTimingInfo</var>’s <a data-link-type="dfn" href="#script-timing-info-source-url" id="ref-for-script-timing-info-source-url④">source url</a> to the <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string-concatenate" id="ref-for-string-concatenate⑤">concatenation</a> of  « <var>url</var>’s <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-scheme" id="ref-for-concept-url-scheme②">scheme</a>, ":"" ».</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="Report classic script execution">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="record-classic-script-creation-time">record classic script creation time</dfn> given a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-script" id="ref-for-concept-script①">script</a> <var>script</var> and a <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url" id="ref-for-concept-url①">URL</a>-or-null <var>originalSourceURL</var>: 
    <ol>
     <li data-md>
      <p><a data-link-type="dfn" href="#create-script-entry-point" id="ref-for-create-script-entry-point④">Create script entry point</a> with <var>script</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#settings-object" id="ref-for-settings-object">settings object</a>, "`classic-script`",
and the following step given a <a data-link-type="dfn" href="#script-timing-info" id="ref-for-script-timing-info⑧">script timing info</a> <var>scriptTimingInfo</var>: <a data-link-type="dfn" href="#set-source-url-for-script-block" id="ref-for-set-source-url-for-script-block">Set source url for script block</a> given <var>scriptTimingInfo</var>, <var>script</var>, and <var>originalSourceURL</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="Report classic script execution start">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="record-classic-script-execution-start-time">record classic script execution start time</dfn> given a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#classic-script" id="ref-for-classic-script">classic script</a> <var>script</var>: 
    <ol>
     <li data-md>
      <p>Let <var>settings</var> be <var>script</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#settings-object" id="ref-for-settings-object①">settings object</a>.</p>
     <li data-md>
      <p>If <var>script</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/#muted-errors" id="ref-for-muted-errors">muted errors</a> is true, then return.</p>
     <li data-md>
      <p>If <var>settings</var> is not a <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" id="ref-for-window③">Window</a></code>, then return.</p>
     <li data-md>
      <p>Let <var>document</var> be <var>settings</var>’s <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-document-2" id="ref-for-dom-document-2">document</a></code>.</p>
     <li data-md>
      <p>Let <var>frameTimingInfo</var> be <var>document</var>’s <a data-link-type="dfn" href="#relevant-frame-timing-info" id="ref-for-relevant-frame-timing-info③">relevant frame timing info</a>.</p>
     <li data-md>
      <p>If <var>frameTimingInfo</var> is null or if <var>frameTimingInfo</var>’s <a data-link-type="dfn" href="#frame-timing-info-pending-script" id="ref-for-frame-timing-info-pending-script">pending script</a> is not null, then return.</p>
     <li data-md>
      <p class="assertion">Assert: <var>frameTimingInfo</var>’s <a data-link-type="dfn" href="#frame-timing-info-pending-script" id="ref-for-frame-timing-info-pending-script①">pending script</a>'s <a data-link-type="dfn" href="#script-timing-info-invoker-type" id="ref-for-script-timing-info-invoker-type①">invoker type</a> is "`classic-script`".</p>
     <li data-md>
      <p>Set <var>frameTimingInfo</var>’s <a data-link-type="dfn" href="#frame-timing-info-pending-script" id="ref-for-frame-timing-info-pending-script②">pending script</a>'s <a data-link-type="dfn" href="#script-timing-info-execution-start-time" id="ref-for-script-timing-info-execution-start-time②">execution start time</a> to the <a data-link-type="dfn" href="https://w3c.github.io/hr-time/#dfn-unsafe-shared-current-time" id="ref-for-dfn-unsafe-shared-current-time①">unsafe shared current time</a>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="Report module script execution start">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="record-module-script-execution-start-time">record module script execution start time</dfn> given a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#module-script" id="ref-for-module-script">module script</a> <var>script</var>: <a data-link-type="dfn" href="#create-script-entry-point" id="ref-for-create-script-entry-point⑤">Create script entry point</a> with <var>script</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#settings-object" id="ref-for-settings-object②">settings object</a>, "`module-script`",
            and the following step given a <a data-link-type="dfn" href="#script-timing-info" id="ref-for-script-timing-info⑨">script timing info</a> <var>scriptTimingInfo</var>: 
    <ol>
     <li data-md>
      <p>Set <var>scriptTimingInfo</var>’s <a data-link-type="dfn" href="#script-timing-info-execution-start-time" id="ref-for-script-timing-info-execution-start-time③">execution start time</a> to <var>script</var>’s <var>scriptTimingInfo</var>’s <a data-link-type="dfn" href="#script-timing-info-start-time" id="ref-for-script-timing-info-start-time①">start time</a>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="#set-source-url-for-script-block" id="ref-for-set-source-url-for-script-block①">Set source url for script block</a> given <var>scriptTimingInfo</var>, <var>script</var>, and <var>script</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-script-base-url" id="ref-for-concept-script-base-url①">base URL</a>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="Create script entry point">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="create-script-entry-point">create script entry point</dfn> given an <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object" id="ref-for-environment-settings-object②">environment settings object</a> <var>settings</var>,
        a <code class="idl"><a data-link-type="idl" href="#enumdef-scriptinvokertype" id="ref-for-enumdef-scriptinvokertype②">ScriptInvokerType</a></code> <var>invokerType</var>, and <var>steps</var>,
        which is an algorithm that takes a <a data-link-type="dfn" href="#script-timing-info" id="ref-for-script-timing-info①⓪">script timing info</a> and an optional <a data-link-type="dfn" href="#frame-timing-info" id="ref-for-frame-timing-info⑤">frame timing info</a>: 
    <ol>
     <li data-md>
      <p>If <var>settings</var> is not a <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" id="ref-for-window④">Window</a></code>, then return.</p>
     <li data-md>
      <p>Let <var>document</var> be <var>settings</var>’s <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-document-2" id="ref-for-dom-document-2①">document</a></code>.</p>
     <li data-md>
      <p>If <var>document</var> is not <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active" id="ref-for-fully-active">fully active</a> or <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/interaction.html#dom-document-hidden" id="ref-for-dom-document-hidden">hidden</a></code>, then return.</p>
     <li data-md>
      <p>Let <var>frameTimingInfo</var> be <var>document</var>’s <a data-link-type="dfn" href="#relevant-frame-timing-info" id="ref-for-relevant-frame-timing-info④">relevant frame timing info</a>.</p>
     <li data-md>
      <p>If <var>frameTimingInfo</var> is null, then return.</p>
     <li data-md>
      <p>If <var>frameTimingInfo</var>’s <a data-link-type="dfn" href="#frame-timing-info-pending-script" id="ref-for-frame-timing-info-pending-script③">pending script</a> is not null, then return.</p>
     <li data-md>
      <p>Let <var>scriptTimingInfo</var> be a new <a data-link-type="dfn" href="#script-timing-info" id="ref-for-script-timing-info①①">script timing info</a> whose <a data-link-type="dfn" href="#script-timing-info-start-time" id="ref-for-script-timing-info-start-time②">start time</a> is the <a data-link-type="dfn" href="https://w3c.github.io/hr-time/#dfn-unsafe-shared-current-time" id="ref-for-dfn-unsafe-shared-current-time②">unsafe shared current time</a>,
and whose <a data-link-type="dfn" href="#script-timing-info-invoker-type" id="ref-for-script-timing-info-invoker-type②">invoker type</a> is <var>invokerType</var>.</p>
     <li data-md>
      <p>Run <var>steps</var> given <var>scriptTimingInfo</var> and <var>frameTimingInfo</var>.</p>
     <li data-md>
      <p>Set <var>scriptTimingInfo</var>’s <a data-link-type="dfn" href="#script-timing-info-window" id="ref-for-script-timing-info-window②">window</a> to <var>settings</var>.</p>
     <li data-md>
      <p>Set <var>frameTimingInfo</var>’s <a data-link-type="dfn" href="#frame-timing-info-pending-script" id="ref-for-frame-timing-info-pending-script④">pending script</a> to <var>scriptTimingInfo</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="Record timing info for microtask checkpoint">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="record-timing-info-for-microtask-checkpoint">record timing info for microtask checkpoint</dfn>: 
    <ol>
     <li data-md>
      <p>Let <var>script</var> be the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/#running-script" id="ref-for-running-script">running script</a>.</p>
     <li data-md>
      <p>Let <var>settings</var> be <var>script</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#settings-object" id="ref-for-settings-object③">settings object</a>.</p>
     <li data-md>
      <p>Let <var>document</var> be <var>settings</var>’s <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-document-2" id="ref-for-dom-document-2②">document</a></code>.</p>
     <li data-md>
      <p>If <var>document</var> is not <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active" id="ref-for-fully-active①">fully active</a> or <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/interaction.html#dom-document-hidden" id="ref-for-dom-document-hidden①">hidden</a></code>, then return.</p>
     <li data-md>
      <p>Let <var>frameTimingInfo</var> be <var>document</var>’s <a data-link-type="dfn" href="#relevant-frame-timing-info" id="ref-for-relevant-frame-timing-info⑤">relevant frame timing info</a>.</p>
     <li data-md>
      <p>Let <var>scriptTimingInfo</var> be <var>frameTimingInfo</var>’s <a data-link-type="dfn" href="#frame-timing-info-pending-script" id="ref-for-frame-timing-info-pending-script⑤">pending script</a>.</p>
     <li data-md>
      <p>Set <var>frameTimingInfo</var>’s <a data-link-type="dfn" href="#frame-timing-info-pending-script" id="ref-for-frame-timing-info-pending-script⑥">pending script</a> to null.</p>
     <li data-md>
      <p>If <var>scriptTimingInfo</var> is null, then return.</p>
     <li data-md>
      <p>Set <var>scriptTimingInfo</var>’s <a data-link-type="dfn" href="#script-timing-info-end-time" id="ref-for-script-timing-info-end-time①">end time</a> to the <a data-link-type="dfn" href="https://w3c.github.io/hr-time/#dfn-unsafe-shared-current-time" id="ref-for-dfn-unsafe-shared-current-time③">unsafe shared current time</a>.</p>
     <li data-md>
      <p>If <var>script</var> is a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#classic-script" id="ref-for-classic-script①">classic script</a> whose <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/#muted-errors" id="ref-for-muted-errors①">muted errors</a> is true, then:</p>
      <ol>
       <li data-md>
        <p>set <var>scriptTimingInfo</var>’s <a data-link-type="dfn" href="#script-timing-info-source-url" id="ref-for-script-timing-info-source-url⑤">source url</a> to the empty string.</p>
       <li data-md>
        <p>set <var>scriptTimingInfo</var>’s <a data-link-type="dfn" href="#script-timing-info-source-character-position" id="ref-for-script-timing-info-source-character-position①">source character position</a> to -1.</p>
       <li data-md>
        <p>set <var>scriptTimingInfo</var>’s <a data-link-type="dfn" href="#script-timing-info-source-function-name" id="ref-for-script-timing-info-source-function-name①">source function name</a> to the empty string.</p>
      </ol>
     <li data-md>
      <p>If the <a data-link-type="dfn" href="https://w3c.github.io/hr-time/#dfn-duration" id="ref-for-dfn-duration⑤">duration</a> between <var>scriptTimingInfo</var>’s <a data-link-type="dfn" href="#script-timing-info-start-time" id="ref-for-script-timing-info-start-time③">start time</a> and <var>scriptTimingInfo</var>’s <a data-link-type="dfn" href="#script-timing-info-end-time" id="ref-for-script-timing-info-end-time②">end time</a> is greater than 5 milliseconds, then <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-append" id="ref-for-list-append②">append</a> <var>scriptTimingInfo</var> to <var>frameTimingInfo</var>’s <a data-link-type="dfn" href="#frame-timing-info-scripts" id="ref-for-frame-timing-info-scripts①">scripts</a>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="Applying source location">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="apply-source-location">apply source location</dfn> to a <a data-link-type="dfn" href="#script-timing-info" id="ref-for-script-timing-info①②">script timing info</a> <var>scriptTimingInfo</var> given a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-callback-function" id="ref-for-dfn-callback-function①">callback function</a> or <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#Function" id="ref-for-Function②">Function</a></code> <var>callback</var>: 
    <ol>
     <li data-md>
      <p>The user agent may set <var>scriptTimingInfo</var>’s <a data-link-type="dfn" href="#script-timing-info-source-url" id="ref-for-script-timing-info-source-url⑥">source url</a> to the source URL of the script where <var>callback</var> was defined.</p>
     <li data-md>
      <p>The user agent may set <var>scriptTimingInfo</var>’s <a data-link-type="dfn" href="#script-timing-info-source-function-name" id="ref-for-script-timing-info-source-function-name②">source function name</a> to the function name of <var>callback</var>.</p>
     <li data-md>
      <p>The user agent may set <var>scriptTimingInfo</var>’s <a data-link-type="dfn" href="#script-timing-info-source-character-position" id="ref-for-script-timing-info-source-character-position②">source character position</a> to the character position where <var>callback</var> was defined.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="Report pause duration">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="record-pause-duration">record pause duration</dfn> given a <a data-link-type="dfn" href="https://w3c.github.io/hr-time/#dfn-duration" id="ref-for-dfn-duration⑥">duration</a> <var>duration</var>: 
    <ol>
     <li data-md>
      <p>Let <var>script</var> be the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/#running-script" id="ref-for-running-script①">running script</a>.</p>
     <li data-md>
      <p>Let <var>settings</var> be <var>script</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#settings-object" id="ref-for-settings-object④">settings object</a>.</p>
     <li data-md>
      <p>If <var>settings</var> is not a <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" id="ref-for-window⑤">Window</a></code>, then return.</p>
     <li data-md>
      <p>Let <var>document</var> be <var>settings</var>’s <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-document-2" id="ref-for-dom-document-2③">document</a></code>.</p>
     <li data-md>
      <p>If <var>document</var> is not <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active" id="ref-for-fully-active②">fully active</a> or <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/interaction.html#dom-document-hidden" id="ref-for-dom-document-hidden②">hidden</a></code>, then return.</p>
     <li data-md>
      <p>Let <var>frameTimingInfo</var> be <var>document</var>’s <a data-link-type="dfn" href="#relevant-frame-timing-info" id="ref-for-relevant-frame-timing-info⑥">relevant frame timing info</a>.</p>
     <li data-md>
      <p>If <var>frameTimingInfo</var> is null, then return.</p>
     <li data-md>
      <p>If <var>frameTimingInfo</var>’s <a data-link-type="dfn" href="#frame-timing-info-pending-script" id="ref-for-frame-timing-info-pending-script⑦">pending script</a> is null, then return.</p>
     <li data-md>
      <p>Increment <var>frameTimingInfo</var>’s <a data-link-type="dfn" href="#frame-timing-info-pending-script" id="ref-for-frame-timing-info-pending-script⑧">pending script</a>'s <a data-link-type="dfn" href="#script-timing-info-pause-duration" id="ref-for-script-timing-info-pause-duration①">pause duration</a> by the milliseconds value of <var>duration</var>.</p>
    </ol>
   </div>
   <h2 class="heading settled" data-level="4" id="other-standards"><span class="secno">4. </span><span class="content">Additions to existing standards</span><a class="self-link" href="#other-standards"></a></h2>
   <h3 class="heading settled" data-level="4.1" id="webidl-monkey-patches"><span class="secno">4.1. </span><span class="content">Monkey-patches to the WebIDL standard</span><a class="self-link" href="#webidl-monkey-patches"></a></h3>
   <div class="algorithm" data-algorithm="Monkey patches to promise handling">
     The <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise①">Promise</a></code> interface has an associated string <dfn class="dfn-paneled" data-dfn-for="Promise" data-dfn-type="dfn" data-noexport id="promise-invoker-name-when-created">invoker name when created</dfn>, initially "`Promise`".
The <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise②">Promise</a></code> interface has an associated string <dfn class="dfn-paneled" data-dfn-for="Promise" data-dfn-type="dfn" data-noexport id="promise-script-url-when-created">script url when created</dfn>, initially the empty string. 
    <p>Append the following steps to <a href="https://webidl.spec.whatwg.org/#a-new-promise">creating a new promise</a>, before returning the <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise③">Promise</a></code>:</p>
    <ol>
     <li data-md>
      <p>Let <var>interfaceName</var> be a string representing the <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-interface" id="ref-for-dfn-interface">interface</a> responsible for creating this promise.</p>
     <li data-md>
      <p>Let <var>attributeName</var> be a string representing the <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-attribute" id="ref-for-dfn-attribute">attribute</a> in the interface responsible for creating this promise.</p>
     <li data-md>
      <p>Set the created <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise④">Promise</a></code>'s <a data-link-type="dfn" href="#promise-script-url-when-created" id="ref-for-promise-script-url-when-created①">script url when created</a> to the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/#running-script" id="ref-for-running-script②">running script</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-script-base-url" id="ref-for-concept-script-base-url②">base URL</a>.</p>
     <li data-md>
      <p>The user-agent may set the created <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise⑤">Promise</a></code>'s <a data-link-type="dfn" href="#promise-invoker-name-when-created" id="ref-for-promise-invoker-name-when-created①">invoker name when created</a> to the last known <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string-concatenate" id="ref-for-string-concatenate⑥">concatenation</a> of
« <var>interfaceName</var>, ".", <var>attributeName</var> »</p>
      <p class="issue" id="issue-c02eb1bd"><a class="self-link" href="#issue-c02eb1bd"></a> this is quite handwavy, because this is difficult to do in a normative way. Need to see if
that can be improved, or if the source location for promise handlers would remain a bit implementation-defined.</p>
    </ol>
    <p>Prepend the following step to <a href="https://webidl.spec.whatwg.org/#resolve">resolve a promise</a> given <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise⑥">Promise</a></code> <var>p</var>: <a data-link-type="dfn" href="#record-timing-info-for-promise-resolver" id="ref-for-record-timing-info-for-promise-resolver">Record timing info for promise resolver</a> given <var>p</var> and "`resolve-promise`".</p>
    <p>Prepend the following step to <a href="https://webidl.spec.whatwg.org/#reject">reject a promise</a> given <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise⑦">Promise</a></code> <var>p</var>: <a data-link-type="dfn" href="#record-timing-info-for-promise-resolver" id="ref-for-record-timing-info-for-promise-resolver①">Record timing info for promise resolver</a> given <var>p</var> and "`reject-promise`".</p>
   </div>
   <div class="algorithm" data-algorithm="Monkey patch to callback invocation"> Insert the following steps to <a href="https://webidl.spec.whatwg.org/#invoke-a-callback-function">invoke a callback function</a>,
    once we have an <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object" id="ref-for-environment-settings-object③">environment settings object</a> <var>relevant settings</var> and a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-callback-function" id="ref-for-dfn-callback-function②">callback function</a> <var>F</var>: <a data-link-type="dfn" href="#record-timing-info-for-user-callback" id="ref-for-record-timing-info-for-user-callback">Record timing info for user callback</a> given <var>F</var> and <var>relevant settings</var>. </div>
   <h2 class="heading settled" data-level="5" id="priv-sec"><span class="secno">5. </span><span class="content">Security &amp; privacy considerations</span><a class="self-link" href="#priv-sec"></a></h2>
   <p>The Long Animation Frames API adheres to the same-origin policy by including origin-safe attribution information about
the source of the long task. There is a 50ms threshold for long tasks. Durations are only provided in 1 ms
granularity. Together this provides adequate protection against cross-origin leaks.</p>
   <p>The Long Animation Frames API provides timing information about the duration and type of tasks executed by the user,
as well as attribution such as the browsing context causing the function calls. This could enable an attacker
to perform side-channel timing attacks to guess the user’s action, or identify the user. For example, a pattern of
long script followed by a long render could be put together to guess user’s interaction with a social
widget. Detailed function call attribution would be used to determine the user’s action.</p>
   <h3 class="heading settled" data-level="5.1" id="what-is-exposed"><span class="secno">5.1. </span><span class="content">What is Exposed to Observers?</span><a class="self-link" href="#what-is-exposed"></a></h3>
   <p>All observers within the top level page (i.e. all iframes in the page and the main frame) will receive
notifications about presence of long animation frames. We expose the start time of the task, its duration (with 1 ms
granularity), and a pointer to the culprit frame. This information can already be observed today, and with
higher resolution, using setTimeout. An attacker can do this by clearing everything else on the page and adding
the vulnerable cross-origin resource to ensure that delays from the setTimeout are caused by that resource.
Observers in other different pages (tabs or windows) should not receive notifications, regardless of the
architecture of the user agent.</p>
   <h3 class="heading settled" data-level="5.2" id="attack-scenarios"><span class="secno">5.2. </span><span class="content">Attack Scenarios Considered</span><a class="self-link" href="#attack-scenarios"></a></h3>
   <p>The following are the timing attacks considered:</p>
   <ol>
    <li data-md>
     <p><b>Traditional timing attacks</b>: using external resource load time to reveal the size of
private data. For instance the number of hidden pictures in a gallery, whether username is
valid, etc. See an <a href="http://crypto.stanford.edu/~dabo/papers/webtiming.pdf">example</a>.</p>
    <li data-md>
     <p><b>Side-channel timing attacks</b>: using time for video parsing, script parsing, App Cache reads
or Cache API (service workers) usage to uniquely identify a user, or to create a profile of the
user’s age, gender, location, and interests etc. For <a href="https://tom.vg/papers/timing-attacks_ccs2015.pdf">instance</a>, status updates from
a social network can be limited to certain demographic (eg. females of age 20-30) the file size of
the permalink page can be used to determine whether the user is in the target demographic.</p>
   </ol>
   <p>These scenarios are addressed by the 50ms threshold AND respecting cross-origin boundary i.e. not
showing task type or additional attribution to untrusted cross origin observers.</p>
   <h3 class="heading settled" data-level="5.3" id="loaf-sec-priv"><span class="secno">5.3. </span><span class="content">Additional information exposed by the Long Animation Frames API</span><a class="self-link" href="#loaf-sec-priv"></a></h3>
    Since several cross-origin documents can share the same event loop, they can also render as part of
the same frame sequence and influence each other’s rendering time. This makes it so that these timings
are already somewhat observable cross-origin, e.g. by requesting an animation frame and observing if it is delayed,
though long animation frames exposes them at a higher fidelity. 
   <p>To mitigate this, long animation frames are only reported to "participating local roots": only documents
that are associated with a work task that contributed to the sequence, or that were rendered as part of the frame,
are eligible to observe the long animation frame, and that long animation frame would be available only in
their nearest ancestor that is either topmost or has a cross-origin parent.</p>
   <h3 class="heading settled" data-level="5.4" id="loaf-opaque-scripts-sec"><span class="secno">5.4. </span><span class="content"><code class="idl"><a data-link-type="idl" href="#performancescripttiming" id="ref-for-performancescripttiming⑤">PerformanceScriptTiming</a></code> and opaque scripts</span><a class="self-link" href="#loaf-opaque-scripts-sec"></a></h3>
    Since <code class="idl"><a data-link-type="idl" href="#performancescripttiming" id="ref-for-performancescripttiming⑥">PerformanceScriptTiming</a></code> exposes information about script execution, we need to make sure it
doesn’t expose too much information about <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/#cors-cross-origin" id="ref-for-cors-cross-origin">CORS cross-origin</a> scripts that cannot be easily deduced otherwise.
To do that, we use the existing <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/#muted-errors" id="ref-for-muted-errors②">muted errors</a> boolean, and report an empty <code class="idl"><a data-link-type="idl" href="#dom-performancescripttiming-sourceurl" id="ref-for-dom-performancescripttiming-sourceurl①">sourceURL</a></code> in such cases. 
  </main>
  <div data-fill-with="conformance">
   <h2 class="no-ref no-num heading settled" id="w3c-conformance"><span class="content">Conformance</span><a class="self-link" href="#w3c-conformance"></a></h2>
   <h3 class="no-ref no-num heading settled" id="w3c-conventions"><span class="content">Document conventions</span><a class="self-link" href="#w3c-conventions"></a></h3>
   <p>Conformance requirements are expressed
    with a combination of descriptive assertions
    and RFC 2119 terminology.
    The key words “MUST”, “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”, “SHOULD NOT”, “RECOMMENDED”, “MAY”, and “OPTIONAL”
    in the normative parts of this document
    are to be interpreted as described in RFC 2119.
    However, for readability,
    these words do not appear in all uppercase letters in this specification. </p>
   <p>All of the text of this specification is normative
    except sections explicitly marked as non-normative, examples, and notes. <a data-link-type="biblio" href="#biblio-rfc2119" title="Key words for use in RFCs to Indicate Requirement Levels">[RFC2119]</a> </p>
   <p>Examples in this specification are introduced with the words “for example”
    or are set apart from the normative text
    with <code class="highlight"><c- a>class</c-><c- o>=</c-><c- u>"example"</c-></code>,
    like this: </p>
   <div class="example" id="w3c-example">
    <a class="self-link" href="#w3c-example"></a> 
    <p>This is an example of an informative example. </p>
   </div>
   <p>Informative notes begin with the word “Note”
    and are set apart from the normative text
    with <code class="highlight"><c- a>class</c-><c- o>=</c-><c- u>"note"</c-></code>,
    like this: </p>
   <p class="note" role="note">Note, this is an informative note.</p>
   <section>
    <h3 class="no-ref no-num heading settled" id="w3c-conformant-algorithms"><span class="content">Conformant Algorithms</span><a class="self-link" href="#w3c-conformant-algorithms"></a></h3>
    <p>Requirements phrased in the imperative as part of algorithms
    (such as "strip any leading space characters"
    or "return false and abort these steps")
    are to be interpreted with the meaning of the key word
    ("must", "should", "may", etc)
    used in introducing the algorithm. </p>
    <p>Conformance requirements phrased as algorithms or specific steps
    can be implemented in any manner,
    so long as the end result is equivalent.
    In particular, the algorithms defined in this specification
    are intended to be easy to understand
    and are not intended to be performant.
    Implementers are encouraged to optimize. </p>
   </section>
  </div>
  <script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script>
  <h2 class="no-num no-ref heading settled" id="index"><span class="content">Index</span><a class="self-link" href="#index"></a></h2>
  <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">Terms defined by this specification</span><a class="self-link" href="#index-defined-here"></a></h3>
  <ul class="index">
   <li><a href="#dom-scriptwindowattribution-ancestor">"ancestor"</a><span>, in § 2.2</span>
   <li><a href="#apply-source-location">apply source location</a><span>, in § 3.2.2</span>
   <li><a href="#dom-performancelonganimationframetiming-blockingduration">blockingDuration</a><span>, in § 2.1</span>
   <li><a href="#dom-scriptinvokertype-classic-script">"classic-script"</a><span>, in § 2.2</span>
   <li><a href="#create-script-entry-point">create script entry point</a><span>, in § 3.2.2</span>
   <li><a href="#current-frame-timing-info">current frame timing info</a><span>, in § 3.1</span>
   <li><a href="#frame-timing-info-current-task-start-time">current task start time</a><span>, in § 3.1</span>
   <li><a href="#dom-scriptwindowattribution-descendant">"descendant"</a><span>, in § 2.2</span>
   <li>
    duration
    <ul>
     <li><a href="#dom-performancelonganimationframetiming-duration">attribute for PerformanceLongAnimationFrameTiming</a><span>, in § 2.1</span>
     <li><a href="#dom-performancescripttiming-duration">attribute for PerformanceScriptTiming</a><span>, in § 2.2</span>
    </ul>
   <li>
    end time
    <ul>
     <li><a href="#frame-timing-info-end-time">dfn for frame timing info</a><span>, in § 3.1</span>
     <li><a href="#script-timing-info-end-time">dfn for script timing info</a><span>, in § 3.1</span>
    </ul>
   <li>
    entryType
    <ul>
     <li><a href="#dom-performancelonganimationframetiming-entrytype">attribute for PerformanceLongAnimationFrameTiming</a><span>, in § 2.1</span>
     <li><a href="#dom-performancescripttiming-entrytype">attribute for PerformanceScriptTiming</a><span>, in § 2.2</span>
    </ul>
   <li><a href="#dom-scriptinvokertype-event-listener">"event-listener"</a><span>, in § 2.2</span>
   <li><a href="#script-timing-info-event-target-element-id">event target element id</a><span>, in § 3.1</span>
   <li><a href="#script-timing-info-event-target-element-src-attribute">event target element src attribute</a><span>, in § 3.1</span>
   <li><a href="#script-timing-info-event-type">event type</a><span>, in § 3.1</span>
   <li><a href="#dom-performancescripttiming-executionstart">executionStart</a><span>, in § 2.2</span>
   <li><a href="#script-timing-info-execution-start-time">execution start time</a><span>, in § 3.1</span>
   <li><a href="#frame-timing-info-first-ui-event-timestamp">first ui event timestamp</a><span>, in § 3.1</span>
   <li><a href="#dom-performancelonganimationframetiming-firstuieventtimestamp">firstUIEventTimestamp</a><span>, in § 2.1</span>
   <li><a href="#dom-performancescripttiming-forcedstyleandlayoutduration">forcedStyleAndLayoutDuration</a><span>, in § 2.2</span>
   <li><a href="#frame-timing-info">frame timing info</a><span>, in § 3.1</span>
   <li><a href="#dom-performancescripttiming-invoker">invoker</a><span>, in § 2.2</span>
   <li><a href="#script-timing-info-invoker-name">invoker name</a><span>, in § 3.1</span>
   <li><a href="#promise-invoker-name-when-created">invoker name when created</a><span>, in § 4.1</span>
   <li><a href="#script-timing-info-invoker-type">invoker type</a><span>, in § 3.1</span>
   <li><a href="#dom-performancescripttiming-invokertype">invokerType</a><span>, in § 2.2</span>
   <li><a href="#long-animation-frame">long animation frame</a><span>, in § 2</span>
   <li><a href="#dom-scriptinvokertype-module-script">"module-script"</a><span>, in § 2.2</span>
   <li>
    name
    <ul>
     <li><a href="#dom-performancelonganimationframetiming-name">attribute for PerformanceLongAnimationFrameTiming</a><span>, in § 2.1</span>
     <li><a href="#dom-performancescripttiming-name">attribute for PerformanceScriptTiming</a><span>, in § 2.2</span>
    </ul>
   <li><a href="#nearest-same-origin-root">nearest same-origin root</a><span>, in § 3.2.1</span>
   <li><a href="#dom-scriptwindowattribution-other">"other"</a><span>, in § 2.2</span>
   <li><a href="#script-timing-info-pause-duration">pause duration</a><span>, in § 3.1</span>
   <li><a href="#dom-performancescripttiming-pauseduration">pauseDuration</a><span>, in § 2.2</span>
   <li><a href="#frame-timing-info-pending-script">pending script</a><span>, in § 3.1</span>
   <li><a href="#performancelonganimationframetiming">PerformanceLongAnimationFrameTiming</a><span>, in § 2.1</span>
   <li><a href="#performancescripttiming">PerformanceScriptTiming</a><span>, in § 2.2</span>
   <li><a href="#record-classic-script-creation-time">record classic script creation time</a><span>, in § 3.2.2</span>
   <li><a href="#record-classic-script-execution-start-time">record classic script execution start time</a><span>, in § 3.2.2</span>
   <li><a href="#record-module-script-execution-start-time">record module script execution start time</a><span>, in § 3.2.2</span>
   <li><a href="#record-pause-duration">record pause duration</a><span>, in § 3.2.2</span>
   <li><a href="#record-rendering-time">record rendering time</a><span>, in § 3.2.1</span>
   <li><a href="#record-task-end-time">record task end time</a><span>, in § 3.2.1</span>
   <li><a href="#record-task-start-time">record task start time</a><span>, in § 3.2.1</span>
   <li><a href="#record-timing-info-for-event-listener">record timing info for event listener</a><span>, in § 3.2.2</span>
   <li><a href="#record-timing-info-for-microtask-checkpoint">record timing info for microtask checkpoint</a><span>, in § 3.2.2</span>
   <li><a href="#record-timing-info-for-promise-resolver">record timing info for promise resolver</a><span>, in § 3.2.2</span>
   <li><a href="#record-timing-info-for-timer-handler">record timing info for timer handler</a><span>, in § 3.2.2</span>
   <li><a href="#record-timing-info-for-user-callback">record timing info for user callback</a><span>, in § 3.2.2</span>
   <li><a href="#dom-scriptinvokertype-reject-promise">"reject-promise"</a><span>, in § 2.2</span>
   <li><a href="#relevant-frame-timing-info">relevant frame timing info</a><span>, in § 3.2.1</span>
   <li><a href="#dom-performancelonganimationframetiming-renderstart">renderStart</a><span>, in § 2.1</span>
   <li><a href="#report-frame-timing">report frame timing</a><span>, in § 3.2.1</span>
   <li><a href="#dom-scriptinvokertype-resolve-promise">"resolve-promise"</a><span>, in § 2.2</span>
   <li><a href="#dom-scriptwindowattribution-same-page">"same-page"</a><span>, in § 2.2</span>
   <li><a href="#enumdef-scriptinvokertype">ScriptInvokerType</a><span>, in § 2.2</span>
   <li>
    scripts
    <ul>
     <li><a href="#dom-performancelonganimationframetiming-scripts">attribute for PerformanceLongAnimationFrameTiming</a><span>, in § 2.1</span>
     <li><a href="#frame-timing-info-scripts">dfn for frame timing info</a><span>, in § 3.1</span>
    </ul>
   <li><a href="#script-timing-info">script timing info</a><span>, in § 3.1</span>
   <li><a href="#promise-script-url-when-created">script url when created</a><span>, in § 4.1</span>
   <li><a href="#enumdef-scriptwindowattribution">ScriptWindowAttribution</a><span>, in § 2.2</span>
   <li><a href="#dom-scriptwindowattribution-self">"self"</a><span>, in § 2.2</span>
   <li><a href="#set-source-url-for-script-block">set source url for script block</a><span>, in § 3.2.2</span>
   <li><a href="#script-timing-info-source-character-position">source character position</a><span>, in § 3.1</span>
   <li><a href="#dom-performancescripttiming-sourcecharposition">sourceCharPosition</a><span>, in § 2.2</span>
   <li><a href="#script-timing-info-source-function-name">source function name</a><span>, in § 3.1</span>
   <li><a href="#dom-performancescripttiming-sourcefunctionname">sourceFunctionName</a><span>, in § 2.2</span>
   <li><a href="#script-timing-info-source-url">source url</a><span>, in § 3.1</span>
   <li><a href="#dom-performancescripttiming-sourceurl">sourceURL</a><span>, in § 2.2</span>
   <li>
    start time
    <ul>
     <li><a href="#frame-timing-info-start-time">dfn for frame timing info</a><span>, in § 3.1</span>
     <li><a href="#script-timing-info-start-time">dfn for script timing info</a><span>, in § 3.1</span>
    </ul>
   <li>
    startTime
    <ul>
     <li><a href="#dom-performancelonganimationframetiming-starttime">attribute for PerformanceLongAnimationFrameTiming</a><span>, in § 2.1</span>
     <li><a href="#dom-performancescripttiming-starttime">attribute for PerformanceScriptTiming</a><span>, in § 2.2</span>
    </ul>
   <li><a href="#dom-performancelonganimationframetiming-styleandlayoutstart">styleAndLayoutStart</a><span>, in § 2.1</span>
   <li><a href="#frame-timing-info-style-and-layout-start-time">style and layout start time</a><span>, in § 3.1</span>
   <li><a href="#frame-timing-info-task-durations">task durations</a><span>, in § 3.1</span>
   <li>
    timing info
    <ul>
     <li><a href="#performancelonganimationframetiming-timing-info">dfn for PerformanceLongAnimationFrameTiming</a><span>, in § 2.1</span>
     <li><a href="#performancescripttiming-timing-info">dfn for PerformanceScriptTiming</a><span>, in § 2.2</span>
    </ul>
   <li>
    toJSON()
    <ul>
     <li><a href="#dom-performancelonganimationframetiming-tojson">method for PerformanceLongAnimationFrameTiming</a><span>, in § 2.1</span>
     <li><a href="#dom-performancescripttiming-tojson">method for PerformanceScriptTiming</a><span>, in § 2.2</span>
    </ul>
   <li><a href="#frame-timing-info-update-the-rendering-start-time">update the rendering start time</a><span>, in § 3.1</span>
   <li><a href="#dom-scriptinvokertype-user-callback">"user-callback"</a><span>, in § 2.2</span>
   <li>
    window
    <ul>
     <li><a href="#dom-performancescripttiming-window">attribute for PerformanceScriptTiming</a><span>, in § 2.2</span>
     <li><a href="#script-timing-info-window">dfn for script timing info</a><span>, in § 3.1</span>
    </ul>
   <li><a href="#performancescripttiming-window-attribution">window attribution</a><span>, in § 2.2</span>
   <li><a href="#dom-performancescripttiming-windowattribution">windowAttribution</a><span>, in § 2.2</span>
  </ul>
  <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span class="content">Terms defined by reference</span><a class="self-link" href="#index-defined-elsewhere"></a></h3>
  <ul class="index">
   <li>
    <a data-link-type="biblio">[]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="237e46a0">weakrefderef</span>
    </ul>
   <li>
    <a data-link-type="biblio">[CSSOM-1]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="b203675a">getComputedStyle(elt)</span>
    </ul>
   <li>
    <a data-link-type="biblio">[CSSOM-VIEW-1]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="d38f9598">getBoundingClientRect()</span>
    </ul>
   <li>
    <a data-link-type="biblio">[DOM]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="85394472">Document</span>
     <li><span class="dfn-paneled" id="296f3551">Element</span>
     <li><span class="dfn-paneled" id="129bdae8">Event</span>
     <li><span class="dfn-paneled" id="d30f4c38">EventListener</span>
     <li><span class="dfn-paneled" id="96c16e60">Node</span>
     <li><span class="dfn-paneled" id="622d9f0e">callback</span>
     <li><span class="dfn-paneled" id="5ca8693f">currentTarget</span>
     <li><span class="dfn-paneled" id="3b5b61f7">get an attribute by name</span>
     <li><span class="dfn-paneled" id="6ea37aa1">ID</span>
     <li><span class="dfn-paneled" id="87aba61f">nodeName</span>
     <li><span class="dfn-paneled" id="c62cd7cf">origin</span>
     <li><span class="dfn-paneled" id="d4ec1548">timeStamp</span>
     <li><span class="dfn-paneled" id="9d09d04c">type</span>
    </ul>
   <li>
    <a data-link-type="biblio">[ECMASCRIPT]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="bf77e69a">WeakRef</span>
    </ul>
   <li>
    <a data-link-type="biblio">[HR-TIME-2]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="41cd0b68">DOMHighResTimeStamp</span>
    </ul>
   <li>
    <a data-link-type="biblio">[HR-TIME-3]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="80bf04ff">coarsen time</span>
     <li><span class="dfn-paneled" id="4b2c8c72">duration</span>
     <li><span class="dfn-paneled" id="69ea869d">relative high resolution time</span>
     <li><span class="dfn-paneled" id="9a31d086">unsafe shared current time</span>
    </ul>
   <li>
    <a data-link-type="biblio">[HTML]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="5d7209e9">Window</span>
     <li><span class="dfn-paneled" id="35972864">active document</span>
     <li><span class="dfn-paneled" id="ece2ee9d">ancestor navigables</span>
     <li><span class="dfn-paneled" id="3b0ee7a3">base URL</span>
     <li><span class="dfn-paneled" id="caa8344c">classic script</span>
     <li><span class="dfn-paneled" id="80e9abc9">CORS cross-origin</span>
     <li><span class="dfn-paneled" id="04e0443f">document</span>
     <li><span class="dfn-paneled" id="3e12e042">environment settings object</span>
     <li><span class="dfn-paneled" id="0e3ba9f8">fully active</span>
     <li><span class="dfn-paneled" id="061031fb">hidden</span>
     <li><span class="dfn-paneled" id="a1005ed9">module script</span>
     <li><span class="dfn-paneled" id="2fd6e633">muted errors</span>
     <li><span class="dfn-paneled" id="13dd6cae">node navigable</span>
     <li><span class="dfn-paneled" id="d8049b98">relevant agent</span>
     <li><span class="dfn-paneled" id="e99bd18e">relevant global object</span>
     <li><span class="dfn-paneled" id="5991ccfb">relevant realm</span>
     <li><span class="dfn-paneled" id="9c4c1e66">relevant settings object</span>
     <li><span class="dfn-paneled" id="0075d3fa">running script</span>
     <li><span class="dfn-paneled" id="7393da89">same origin</span>
     <li><span class="dfn-paneled" id="dd6462cb">script</span>
     <li><span class="dfn-paneled" id="7deb6835">settings object <small>(for realm)</small></span>
     <li><span class="dfn-paneled" id="f1eccc95">settings object <small>(for script)</small></span>
     <li><span class="dfn-paneled" id="e270bd2a">task</span>
     <li><span class="dfn-paneled" id="30717154">top-level traversable</span>
    </ul>
   <li>
    <a data-link-type="biblio">[INFRA]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="53275e46">append</span>
     <li><span class="dfn-paneled" id="4a3bf5fb">concatenate</span>
     <li><span class="dfn-paneled" id="ae8def21">contain</span>
     <li><span class="dfn-paneled" id="16d07e10">for each</span>
     <li><span class="dfn-paneled" id="860300d4">implementation-defined</span>
     <li><span class="dfn-paneled" id="c88f3887">item</span>
     <li><span class="dfn-paneled" id="f02cd417">iterate</span>
     <li><span class="dfn-paneled" id="649608b9">list</span>
     <li><span class="dfn-paneled" id="25d7533d">sort in descending order</span>
     <li><span class="dfn-paneled" id="984221ca">struct</span>
    </ul>
   <li>
    <a data-link-type="biblio">[LONGTASKS-1]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="b254feb4">long task</span>
    </ul>
   <li>
    <a data-link-type="biblio">[PERFORMANCE-TIMELINE]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="df79032a">PerformanceEntry</span>
     <li><span class="dfn-paneled" id="a9ea380f">queue a PerformanceEntry</span>
     <li><span class="dfn-paneled" id="cc7c9b78">startTime</span>
     <li><span class="dfn-paneled" id="de4bb79b">supportedEntryTypes</span>
    </ul>
   <li>
    <a data-link-type="biblio">[UIEVENTS]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="92000da2">UIEvent</span>
    </ul>
   <li>
    <a data-link-type="biblio">[URL]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="3a711be7">scheme</span>
     <li><span class="dfn-paneled" id="dcffbccd">URL</span>
    </ul>
   <li>
    <a data-link-type="biblio">[WEBIDL]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="8855a9aa">DOMString</span>
     <li><span class="dfn-paneled" id="f4531911">Default</span>
     <li><span class="dfn-paneled" id="889e932f">Exposed</span>
     <li><span class="dfn-paneled" id="dcf5fafa">FrozenArray</span>
     <li><span class="dfn-paneled" id="ae46556f">Function</span>
     <li><span class="dfn-paneled" id="bdbd19d1">Promise</span>
     <li><span class="dfn-paneled" id="a5c91173">SameObject</span>
     <li><span class="dfn-paneled" id="5bf9ea61">attribute</span>
     <li><span class="dfn-paneled" id="3ab7bf79">callback function</span>
     <li><span class="dfn-paneled" id="980252f2">identifier</span>
     <li><span class="dfn-paneled" id="1422ec4e">interface</span>
     <li><span class="dfn-paneled" id="9aeb0a82">long long</span>
     <li><span class="dfn-paneled" id="efd1ec5d">object</span>
     <li><span class="dfn-paneled" id="4013a022">this</span>
    </ul>
  </ul>
  <h2 class="no-num no-ref heading settled" id="references"><span class="content">References</span><a class="self-link" href="#references"></a></h2>
  <h3 class="no-num no-ref heading settled" id="normative"><span class="content">Normative References</span><a class="self-link" href="#normative"></a></h3>
  <dl>
   <dt id="biblio-cssom-1">[CSSOM-1]
   <dd>Daniel Glazman; Emilio Cobos Álvarez. <a href="https://drafts.csswg.org/cssom/"><cite>CSS Object Model (CSSOM)</cite></a>. URL: <a href="https://drafts.csswg.org/cssom/">https://drafts.csswg.org/cssom/</a>
   <dt id="biblio-cssom-view-1">[CSSOM-VIEW-1]
   <dd>Simon Pieters. <a href="https://drafts.csswg.org/cssom-view/"><cite>CSSOM View Module</cite></a>. URL: <a href="https://drafts.csswg.org/cssom-view/">https://drafts.csswg.org/cssom-view/</a>
   <dt id="biblio-dom">[DOM]
   <dd>Anne van Kesteren. <a href="https://dom.spec.whatwg.org/"><cite>DOM Standard</cite></a>. Living Standard. URL: <a href="https://dom.spec.whatwg.org/">https://dom.spec.whatwg.org/</a>
   <dt id="biblio-ecmascript">[ECMASCRIPT]
   <dd><a href="https://tc39.es/ecma262/multipage/"><cite>ECMAScript Language Specification</cite></a>. URL: <a href="https://tc39.es/ecma262/multipage/">https://tc39.es/ecma262/multipage/</a>
   <dt id="biblio-hr-time-2">[HR-TIME-2]
   <dd>Ilya Grigorik. <a href="https://w3c.github.io/hr-time/"><cite>High Resolution Time Level 2</cite></a>. URL: <a href="https://w3c.github.io/hr-time/">https://w3c.github.io/hr-time/</a>
   <dt id="biblio-hr-time-3">[HR-TIME-3]
   <dd>Yoav Weiss. <a href="https://w3c.github.io/hr-time/"><cite>High Resolution Time</cite></a>. URL: <a href="https://w3c.github.io/hr-time/">https://w3c.github.io/hr-time/</a>
   <dt id="biblio-html">[HTML]
   <dd>Anne van Kesteren; et al. <a href="https://html.spec.whatwg.org/multipage/"><cite>HTML Standard</cite></a>. Living Standard. URL: <a href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
   <dt id="biblio-infra">[INFRA]
   <dd>Anne van Kesteren; Domenic Denicola. <a href="https://infra.spec.whatwg.org/"><cite>Infra Standard</cite></a>. Living Standard. URL: <a href="https://infra.spec.whatwg.org/">https://infra.spec.whatwg.org/</a>
   <dt id="biblio-longtasks-1">[LONGTASKS-1]
   <dd>Noam Rosenthal. <a href="https://w3c.github.io/longtasks/"><cite>Long Tasks API</cite></a>. URL: <a href="https://w3c.github.io/longtasks/">https://w3c.github.io/longtasks/</a>
   <dt id="biblio-performance-timeline">[PERFORMANCE-TIMELINE]
   <dd>Nicolas Pena Moreno. <a href="https://w3c.github.io/performance-timeline/"><cite>Performance Timeline</cite></a>. URL: <a href="https://w3c.github.io/performance-timeline/">https://w3c.github.io/performance-timeline/</a>
   <dt id="biblio-rfc2119">[RFC2119]
   <dd>S. Bradner. <a href="https://datatracker.ietf.org/doc/html/rfc2119"><cite>Key words for use in RFCs to Indicate Requirement Levels</cite></a>. March 1997. Best Current Practice. URL: <a href="https://datatracker.ietf.org/doc/html/rfc2119">https://datatracker.ietf.org/doc/html/rfc2119</a>
   <dt id="biblio-uievents">[UIEVENTS]
   <dd>Gary Kacmarcik; Travis Leithead. <a href="https://w3c.github.io/uievents/"><cite>UI Events</cite></a>. URL: <a href="https://w3c.github.io/uievents/">https://w3c.github.io/uievents/</a>
   <dt id="biblio-url">[URL]
   <dd>Anne van Kesteren. <a href="https://url.spec.whatwg.org/"><cite>URL Standard</cite></a>. Living Standard. URL: <a href="https://url.spec.whatwg.org/">https://url.spec.whatwg.org/</a>
   <dt id="biblio-webidl">[WEBIDL]
   <dd>Edgar Chen; Timothy Gu. <a href="https://webidl.spec.whatwg.org/"><cite>Web IDL Standard</cite></a>. Living Standard. URL: <a href="https://webidl.spec.whatwg.org/">https://webidl.spec.whatwg.org/</a>
  </dl>
  <h2 class="no-num no-ref heading settled" id="idl-index"><span class="content">IDL Index</span><a class="self-link" href="#idl-index"></a></h2>
<pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=<c- n>Window</c->]
<c- b>interface</c-> <a href="#performancelonganimationframetiming"><code class="highlight"><c- g>PerformanceLongAnimationFrameTiming</c-></code></a> : <a data-link-type="idl-name" href="https://w3c.github.io/performance-timeline/#the-performanceentry-interface"><c- n>PerformanceEntry</c-></a> {
    /* Overloading PerformanceEntry */
    <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://w3c.github.io/hr-time/#idl-def-domhighrestimestamp"><c- n>DOMHighResTimeStamp</c-></a> <a data-readonly data-type="DOMHighResTimeStamp" href="#dom-performancelonganimationframetiming-starttime"><code class="highlight"><c- g>startTime</c-></code></a>;
    <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://w3c.github.io/hr-time/#idl-def-domhighrestimestamp"><c- n>DOMHighResTimeStamp</c-></a> <a data-readonly data-type="DOMHighResTimeStamp" href="#dom-performancelonganimationframetiming-duration"><code class="highlight"><c- g>duration</c-></code></a>;
    <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a data-readonly data-type="DOMString" href="#dom-performancelonganimationframetiming-name"><code class="highlight"><c- g>name</c-></code></a>;
    <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a data-readonly data-type="DOMString" href="#dom-performancelonganimationframetiming-entrytype"><code class="highlight"><c- g>entryType</c-></code></a>;

    <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://w3c.github.io/hr-time/#idl-def-domhighrestimestamp"><c- n>DOMHighResTimeStamp</c-></a> <a data-readonly data-type="DOMHighResTimeStamp" href="#dom-performancelonganimationframetiming-renderstart"><code class="highlight"><c- g>renderStart</c-></code></a>;
    <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://w3c.github.io/hr-time/#idl-def-domhighrestimestamp"><c- n>DOMHighResTimeStamp</c-></a> <a data-readonly data-type="DOMHighResTimeStamp" href="#dom-performancelonganimationframetiming-styleandlayoutstart"><code class="highlight"><c- g>styleAndLayoutStart</c-></code></a>;
    <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://w3c.github.io/hr-time/#idl-def-domhighrestimestamp"><c- n>DOMHighResTimeStamp</c-></a> <a data-readonly data-type="DOMHighResTimeStamp" href="#dom-performancelonganimationframetiming-blockingduration"><code class="highlight"><c- g>blockingDuration</c-></code></a>;
    <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://w3c.github.io/hr-time/#idl-def-domhighrestimestamp"><c- n>DOMHighResTimeStamp</c-></a> <a data-readonly data-type="DOMHighResTimeStamp" href="#dom-performancelonganimationframetiming-firstuieventtimestamp"><code class="highlight"><c- g>firstUIEventTimestamp</c-></code></a>;
    [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SameObject"><c- g>SameObject</c-></a>] <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-frozen-array"><c- b>FrozenArray</c-></a>&lt;<a data-link-type="idl-name" href="#performancescripttiming"><c- n>PerformanceScriptTiming</c-></a>> <a data-readonly data-type="FrozenArray<PerformanceScriptTiming>" href="#dom-performancelonganimationframetiming-scripts"><code class="highlight"><c- g>scripts</c-></code></a>;
    [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Default"><c- g>Default</c-></a>] <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-object"><c- b>object</c-></a> <a href="#dom-performancelonganimationframetiming-tojson"><code class="highlight"><c- g>toJSON</c-></code></a>();
};

<c- b>enum</c-> <a href="#enumdef-scriptinvokertype"><code class="highlight"><c- g>ScriptInvokerType</c-></code></a> {
    <a href="#dom-scriptinvokertype-classic-script"><code class="highlight"><c- s><c- u>"classic-script"</c-></c-></code></a>,
    <a href="#dom-scriptinvokertype-module-script"><code class="highlight"><c- s><c- u>"module-script"</c-></c-></code></a>,
    <a href="#dom-scriptinvokertype-event-listener"><code class="highlight"><c- s><c- u>"event-listener"</c-></c-></code></a>,
    <a href="#dom-scriptinvokertype-user-callback"><code class="highlight"><c- s><c- u>"user-callback"</c-></c-></code></a>,
    <a href="#dom-scriptinvokertype-resolve-promise"><code class="highlight"><c- s><c- u>"resolve-promise"</c-></c-></code></a>,
    <a href="#dom-scriptinvokertype-reject-promise"><code class="highlight"><c- s><c- u>"reject-promise"</c-></c-></code></a>
};

<c- b>enum</c-> <a href="#enumdef-scriptwindowattribution"><code class="highlight"><c- g>ScriptWindowAttribution</c-></code></a> {
    <a href="#dom-scriptwindowattribution-self"><code class="highlight"><c- s><c- u>"self"</c-></c-></code></a>, <a href="#dom-scriptwindowattribution-descendant"><code class="highlight"><c- s><c- u>"descendant"</c-></c-></code></a>, <a href="#dom-scriptwindowattribution-ancestor"><code class="highlight"><c- s><c- u>"ancestor"</c-></c-></code></a>, <a href="#dom-scriptwindowattribution-same-page"><code class="highlight"><c- s><c- u>"same-page"</c-></c-></code></a>, <a href="#dom-scriptwindowattribution-other"><code class="highlight"><c- s><c- u>"other"</c-></c-></code></a>
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=<c- n>Window</c->]
<c- b>interface</c-> <a href="#performancescripttiming"><code class="highlight"><c- g>PerformanceScriptTiming</c-></code></a> : <a data-link-type="idl-name" href="https://w3c.github.io/performance-timeline/#the-performanceentry-interface"><c- n>PerformanceEntry</c-></a> {
    /* Overloading PerformanceEntry */
    <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://w3c.github.io/hr-time/#idl-def-domhighrestimestamp"><c- n>DOMHighResTimeStamp</c-></a> <a data-readonly data-type="DOMHighResTimeStamp" href="#dom-performancescripttiming-starttime"><code class="highlight"><c- g>startTime</c-></code></a>;
    <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://w3c.github.io/hr-time/#idl-def-domhighrestimestamp"><c- n>DOMHighResTimeStamp</c-></a> <a data-readonly data-type="DOMHighResTimeStamp" href="#dom-performancescripttiming-duration"><code class="highlight"><c- g>duration</c-></code></a>;
    <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a data-readonly data-type="DOMString" href="#dom-performancescripttiming-name"><code class="highlight"><c- g>name</c-></code></a>;
    <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a data-readonly data-type="DOMString" href="#dom-performancescripttiming-entrytype"><code class="highlight"><c- g>entryType</c-></code></a>;

    <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="#enumdef-scriptinvokertype"><c- n>ScriptInvokerType</c-></a> <a data-readonly data-type="ScriptInvokerType" href="#dom-performancescripttiming-invokertype"><code class="highlight"><c- g>invokerType</c-></code></a>;
    <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a data-readonly data-type="DOMString" href="#dom-performancescripttiming-invoker"><code class="highlight"><c- g>invoker</c-></code></a>;
    <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://w3c.github.io/hr-time/#idl-def-domhighrestimestamp"><c- n>DOMHighResTimeStamp</c-></a> <a data-readonly data-type="DOMHighResTimeStamp" href="#dom-performancescripttiming-executionstart"><code class="highlight"><c- g>executionStart</c-></code></a>;
    <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a data-readonly data-type="DOMString" href="#dom-performancescripttiming-sourceurl"><code class="highlight"><c- g>sourceURL</c-></code></a>;
    <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a data-readonly data-type="DOMString" href="#dom-performancescripttiming-sourcefunctionname"><code class="highlight"><c- g>sourceFunctionName</c-></code></a>;
    <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-long-long"><c- b>long</c-> <c- b>long</c-></a> <a data-readonly data-type="long long" href="#dom-performancescripttiming-sourcecharposition"><code class="highlight"><c- g>sourceCharPosition</c-></code></a>;
    <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://w3c.github.io/hr-time/#idl-def-domhighrestimestamp"><c- n>DOMHighResTimeStamp</c-></a> <a data-readonly data-type="DOMHighResTimeStamp" href="#dom-performancescripttiming-pauseduration"><code class="highlight"><c- g>pauseDuration</c-></code></a>;
    <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://w3c.github.io/hr-time/#idl-def-domhighrestimestamp"><c- n>DOMHighResTimeStamp</c-></a> <a data-readonly data-type="DOMHighResTimeStamp" href="#dom-performancescripttiming-forcedstyleandlayoutduration"><code class="highlight"><c- g>forcedStyleAndLayoutDuration</c-></code></a>;
    <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window"><c- n>Window</c-></a>? <a data-readonly data-type="Window?" href="#dom-performancescripttiming-window"><code class="highlight"><c- g>window</c-></code></a>;
    <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="#enumdef-scriptwindowattribution"><c- n>ScriptWindowAttribution</c-></a> <a data-readonly data-type="ScriptWindowAttribution" href="#dom-performancescripttiming-windowattribution"><code class="highlight"><c- g>windowAttribution</c-></code></a>;
    [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Default"><c- g>Default</c-></a>] <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-object"><c- b>object</c-></a> <a href="#dom-performancescripttiming-tojson"><code class="highlight"><c- g>toJSON</c-></code></a>();
};

</pre>
  <h2 class="no-num no-ref heading settled" id="issues-index"><span class="content">Issues Index</span><a class="self-link" href="#issues-index"></a></h2>
  <div style="counter-reset:issue">
   <div class="issue"> this feels a bit custom, need to discuss name generation. <a class="issue-return" href="#issue-5d051999" title="Jump to section">↵</a></div>
   <div class="issue"> Find a way to make this interoperable/normative. Perhaps mark those functions in WebIDL as requiring synchronous style/layout? Also move to <a data-link-type="dfn" href="#performancescripttiming-timing-info">timing info</a> once that’s resolved. <a class="issue-return" href="#issue-64d28a1e" title="Jump to section">↵</a></div>
   <div class="issue"> this is quite handwavy, because this is difficult to do in a normative way. Need to see if
that can be improved, or if the source location for promise handlers would remain a bit implementation-defined. <a class="issue-return" href="#issue-c02eb1bd" title="Jump to section">↵</a></div>
  </div>
<script>/* Boilerplate: script-dom-helper */
"use strict";
function query(sel) { return document.querySelector(sel); }

function queryAll(sel) { return [...document.querySelectorAll(sel)]; }

function iter(obj) {
	if(!obj) return [];
	var it = obj[Symbol.iterator];
	if(it) return it;
	return Object.entries(obj);
}

function mk(tagname, attrs, ...children) {
	const el = document.createElement(tagname);
	for(const [k,v] of iter(attrs)) {
		if(k.slice(0,3) == "_on") {
			const eventName = k.slice(3);
			el.addEventListener(eventName, v);
		} else if(k[0] == "_") {
			// property, not attribute
			el[k.slice(1)] = v;
		} else {
			if(v === false || v == null) {
        continue;
      } else if(v === true) {
        el.setAttribute(k, "");
        continue;
      } else {
  			el.setAttribute(k, v);
      }
		}
	}
	append(el, children);
	return el;
}

/* Create shortcuts for every known HTML element */
[
  "a",
  "abbr",
  "acronym",
  "address",
  "applet",
  "area",
  "article",
  "aside",
  "audio",
  "b",
  "base",
  "basefont",
  "bdo",
  "big",
  "blockquote",
  "body",
  "br",
  "button",
  "canvas",
  "caption",
  "center",
  "cite",
  "code",
  "col",
  "colgroup",
  "datalist",
  "dd",
  "del",
  "details",
  "dfn",
  "dialog",
  "div",
  "dl",
  "dt",
  "em",
  "embed",
  "fieldset",
  "figcaption",
  "figure",
  "font",
  "footer",
  "form",
  "frame",
  "frameset",
  "head",
  "header",
  "h1",
  "h2",
  "h3",
  "h4",
  "h5",
  "h6",
  "hr",
  "html",
  "i",
  "iframe",
  "img",
  "input",
  "ins",
  "kbd",
  "label",
  "legend",
  "li",
  "link",
  "main",
  "map",
  "mark",
  "meta",
  "meter",
  "nav",
  "nobr",
  "noscript",
  "object",
  "ol",
  "optgroup",
  "option",
  "output",
  "p",
  "param",
  "pre",
  "progress",
  "q",
  "s",
  "samp",
  "script",
  "section",
  "select",
  "small",
  "source",
  "span",
  "strike",
  "strong",
  "style",
  "sub",
  "summary",
  "sup",
  "table",
  "tbody",
  "td",
  "template",
  "textarea",
  "tfoot",
  "th",
  "thead",
  "time",
  "title",
  "tr",
  "u",
  "ul",
  "var",
  "video",
  "wbr",
  "xmp",
].forEach(tagname=>{
	mk[tagname] = (...args) => mk(tagname, ...args);
});

function* nodesFromChildList(children) {
	for(const child of children.flat(Infinity)) {
		if(child instanceof Node) {
			yield child;
		} else {
			yield new Text(child);
		}
	}
}
function append(el, ...children) {
	for(const child of nodesFromChildList(children)) {
		if(el instanceof Node) el.appendChild(child);
		else el.push(child);
	}
	return el;
}

function insertAfter(el, ...children) {
	for(const child of nodesFromChildList(children)) {
		el.parentNode.insertBefore(child, el.nextSibling);
	}
	return el;
}

function clearContents(el) {
	el.innerHTML = "";
	return el;
}

function parseHTML(markup) {
	if(markup.toLowerCase().trim().indexOf('<!doctype') === 0) {
		const doc = document.implementation.createHTMLDocument("");
		doc.documentElement.innerHTML = markup;
		return doc;
	} else {
		const el = mk.template({});
		el.innerHTML = markup;
		return el.content;
	}
}</script>
<script>/* Boilerplate: script-dfn-panel */
"use strict";
{
let dfnPanelData = {
"0075d3fa": {"dfnID":"0075d3fa","dfnText":"running script","external":true,"refSections":[{"refs":[{"id":"ref-for-running-script"},{"id":"ref-for-running-script\u2460"}],"title":"3.2.2. Long Script Monitoring"},{"refs":[{"id":"ref-for-running-script\u2461"}],"title":"4.1. Monkey-patches to the WebIDL standard"}],"url":"https://html.spec.whatwg.org/multipage/#running-script"},
"04e0443f": {"dfnID":"04e0443f","dfnText":"document","external":true,"refSections":[{"refs":[{"id":"ref-for-dom-document-2"},{"id":"ref-for-dom-document-2\u2460"},{"id":"ref-for-dom-document-2\u2461"},{"id":"ref-for-dom-document-2\u2462"}],"title":"3.2.2. Long Script Monitoring"}],"url":"https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-document-2"},
"061031fb": {"dfnID":"061031fb","dfnText":"hidden","external":true,"refSections":[{"refs":[{"id":"ref-for-dom-document-hidden"},{"id":"ref-for-dom-document-hidden\u2460"},{"id":"ref-for-dom-document-hidden\u2461"}],"title":"3.2.2. Long Script Monitoring"}],"url":"https://html.spec.whatwg.org/multipage/interaction.html#dom-document-hidden"},
"0e3ba9f8": {"dfnID":"0e3ba9f8","dfnText":"fully active","external":true,"refSections":[{"refs":[{"id":"ref-for-fully-active"},{"id":"ref-for-fully-active\u2460"},{"id":"ref-for-fully-active\u2461"}],"title":"3.2.2. Long Script Monitoring"}],"url":"https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active"},
"129bdae8": {"dfnID":"129bdae8","dfnText":"Event","external":true,"refSections":[{"refs":[{"id":"ref-for-event"}],"title":"3.2.2. Long Script Monitoring"}],"url":"https://dom.spec.whatwg.org/#event"},
"13dd6cae": {"dfnID":"13dd6cae","dfnText":"node navigable","external":true,"refSections":[{"refs":[{"id":"ref-for-node-navigable"},{"id":"ref-for-node-navigable\u2460"},{"id":"ref-for-node-navigable\u2461"},{"id":"ref-for-node-navigable\u2462"},{"id":"ref-for-node-navigable\u2463"},{"id":"ref-for-node-navigable\u2464"}],"title":"2.1. PerformanceLongAnimationFrameTiming interface"},{"refs":[{"id":"ref-for-node-navigable\u2465"}],"title":"3.2.1. Long Animation Frame Monitoring {#loaf-monitoring}"}],"url":"https://html.spec.whatwg.org/multipage/document-sequences.html#node-navigable"},
"1422ec4e": {"dfnID":"1422ec4e","dfnText":"interface","external":true,"refSections":[{"refs":[{"id":"ref-for-dfn-interface"}],"title":"4.1. Monkey-patches to the WebIDL standard"}],"url":"https://webidl.spec.whatwg.org/#dfn-interface"},
"16d07e10": {"dfnID":"16d07e10","dfnText":"for each","external":true,"refSections":[{"refs":[{"id":"ref-for-list-iterate"},{"id":"ref-for-list-iterate\u2460"}],"title":"2.1. PerformanceLongAnimationFrameTiming interface"},{"refs":[{"id":"ref-for-list-iterate\u2461"}],"title":"3.2.1. Long Animation Frame Monitoring {#loaf-monitoring}"}],"url":"https://infra.spec.whatwg.org/#list-iterate"},
"237e46a0": {"dfnID":"237e46a0","dfnText":"weakrefderef","external":true,"refSections":[{"refs":[{"id":"ref-for-sec-weakrefderef"}],"title":"2.2. PerformanceScriptTiming interface"}],"url":"https://tc39.es/ecma262/multipage/managing-memory.html#sec-weakrefderef"},
"25d7533d": {"dfnID":"25d7533d","dfnText":"sort in descending order","external":true,"refSections":[{"refs":[{"id":"ref-for-list-sort-in-descending-order"}],"title":"2.1. PerformanceLongAnimationFrameTiming interface"}],"url":"https://infra.spec.whatwg.org/#list-sort-in-descending-order"},
"296f3551": {"dfnID":"296f3551","dfnText":"Element","external":true,"refSections":[{"refs":[{"id":"ref-for-element"}],"title":"3.2.2. Long Script Monitoring"}],"url":"https://dom.spec.whatwg.org/#element"},
"2fd6e633": {"dfnID":"2fd6e633","dfnText":"muted errors","external":true,"refSections":[{"refs":[{"id":"ref-for-muted-errors"},{"id":"ref-for-muted-errors\u2460"}],"title":"3.2.2. Long Script Monitoring"},{"refs":[{"id":"ref-for-muted-errors\u2461"}],"title":"5.4. PerformanceScriptTiming and opaque scripts"}],"url":"https://html.spec.whatwg.org/multipage/#muted-errors"},
"30717154": {"dfnID":"30717154","dfnText":"top-level traversable","external":true,"refSections":[{"refs":[{"id":"ref-for-nav-top"},{"id":"ref-for-nav-top\u2460"}],"title":"2.1. PerformanceLongAnimationFrameTiming interface"}],"url":"https://html.spec.whatwg.org/multipage/document-sequences.html#nav-top"},
"35972864": {"dfnID":"35972864","dfnText":"active document","external":true,"refSections":[{"refs":[{"id":"ref-for-nav-document"},{"id":"ref-for-nav-document\u2460"},{"id":"ref-for-nav-document\u2461"}],"title":"3.2.1. Long Animation Frame Monitoring {#loaf-monitoring}"}],"url":"https://html.spec.whatwg.org/multipage/document-sequences.html#nav-document"},
"3a711be7": {"dfnID":"3a711be7","dfnText":"scheme","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-url-scheme"},{"id":"ref-for-concept-url-scheme\u2460"},{"id":"ref-for-concept-url-scheme\u2461"}],"title":"3.2.2. Long Script Monitoring"}],"url":"https://url.spec.whatwg.org/#concept-url-scheme"},
"3ab7bf79": {"dfnID":"3ab7bf79","dfnText":"callback function","external":true,"refSections":[{"refs":[{"id":"ref-for-dfn-callback-function"},{"id":"ref-for-dfn-callback-function\u2460"}],"title":"3.2.2. Long Script Monitoring"},{"refs":[{"id":"ref-for-dfn-callback-function\u2461"}],"title":"4.1. Monkey-patches to the WebIDL standard"}],"url":"https://webidl.spec.whatwg.org/#dfn-callback-function"},
"3b0ee7a3": {"dfnID":"3b0ee7a3","dfnText":"base URL","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-script-base-url"},{"id":"ref-for-concept-script-base-url\u2460"}],"title":"3.2.2. Long Script Monitoring"},{"refs":[{"id":"ref-for-concept-script-base-url\u2461"}],"title":"4.1. Monkey-patches to the WebIDL standard"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#concept-script-base-url"},
"3b5b61f7": {"dfnID":"3b5b61f7","dfnText":"get an attribute by name","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-element-attributes-get-by-name"}],"title":"3.2.2. Long Script Monitoring"}],"url":"https://dom.spec.whatwg.org/#concept-element-attributes-get-by-name"},
"3e12e042": {"dfnID":"3e12e042","dfnText":"environment settings object","external":true,"refSections":[{"refs":[{"id":"ref-for-environment-settings-object"},{"id":"ref-for-environment-settings-object\u2460"},{"id":"ref-for-environment-settings-object\u2461"}],"title":"3.2.2. Long Script Monitoring"},{"refs":[{"id":"ref-for-environment-settings-object\u2462"}],"title":"4.1. Monkey-patches to the WebIDL standard"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object"},
"4013a022": {"dfnID":"4013a022","dfnText":"this","external":true,"refSections":[{"refs":[{"id":"ref-for-this"},{"id":"ref-for-this\u2460"},{"id":"ref-for-this\u2461"},{"id":"ref-for-this\u2462"},{"id":"ref-for-this\u2463"},{"id":"ref-for-this\u2464"},{"id":"ref-for-this\u2465"},{"id":"ref-for-this\u2466"},{"id":"ref-for-this\u2467"},{"id":"ref-for-this\u2468"},{"id":"ref-for-this\u2460\u24ea"},{"id":"ref-for-this\u2460\u2460"},{"id":"ref-for-this\u2460\u2461"},{"id":"ref-for-this\u2460\u2462"},{"id":"ref-for-this\u2460\u2463"},{"id":"ref-for-this\u2460\u2464"}],"title":"2.1. PerformanceLongAnimationFrameTiming interface"},{"refs":[{"id":"ref-for-this\u2460\u2465"},{"id":"ref-for-this\u2460\u2466"},{"id":"ref-for-this\u2460\u2467"},{"id":"ref-for-this\u2460\u2468"},{"id":"ref-for-this\u2461\u24ea"},{"id":"ref-for-this\u2461\u2460"},{"id":"ref-for-this\u2461\u2461"},{"id":"ref-for-this\u2461\u2462"},{"id":"ref-for-this\u2461\u2463"},{"id":"ref-for-this\u2461\u2464"},{"id":"ref-for-this\u2461\u2465"},{"id":"ref-for-this\u2461\u2466"},{"id":"ref-for-this\u2461\u2467"},{"id":"ref-for-this\u2461\u2468"},{"id":"ref-for-this\u2462\u24ea"},{"id":"ref-for-this\u2462\u2460"}],"title":"2.2. PerformanceScriptTiming interface"}],"url":"https://webidl.spec.whatwg.org/#this"},
"41cd0b68": {"dfnID":"41cd0b68","dfnText":"DOMHighResTimeStamp","external":true,"refSections":[{"refs":[{"id":"ref-for-idl-def-domhighrestimestamp"},{"id":"ref-for-idl-def-domhighrestimestamp\u2460"},{"id":"ref-for-idl-def-domhighrestimestamp\u2461"},{"id":"ref-for-idl-def-domhighrestimestamp\u2462"},{"id":"ref-for-idl-def-domhighrestimestamp\u2463"},{"id":"ref-for-idl-def-domhighrestimestamp\u2464"}],"title":"2.1. PerformanceLongAnimationFrameTiming interface"},{"refs":[{"id":"ref-for-idl-def-domhighrestimestamp\u2465"},{"id":"ref-for-idl-def-domhighrestimestamp\u2466"},{"id":"ref-for-idl-def-domhighrestimestamp\u2467"},{"id":"ref-for-idl-def-domhighrestimestamp\u2468"},{"id":"ref-for-idl-def-domhighrestimestamp\u2460\u24ea"}],"title":"2.2. PerformanceScriptTiming interface"},{"refs":[{"id":"ref-for-idl-def-domhighrestimestamp\u2460\u2460"},{"id":"ref-for-idl-def-domhighrestimestamp\u2460\u2461"},{"id":"ref-for-idl-def-domhighrestimestamp\u2460\u2462"},{"id":"ref-for-idl-def-domhighrestimestamp\u2460\u2463"}],"title":"3.1. Frame Timing Info"},{"refs":[{"id":"ref-for-idl-def-domhighrestimestamp\u2460\u2464"},{"id":"ref-for-idl-def-domhighrestimestamp\u2460\u2465"},{"id":"ref-for-idl-def-domhighrestimestamp\u2460\u2466"},{"id":"ref-for-idl-def-domhighrestimestamp\u2460\u2467"}],"title":"3.2.1. Long Animation Frame Monitoring {#loaf-monitoring}"}],"url":"https://w3c.github.io/hr-time/#idl-def-domhighrestimestamp"},
"4a3bf5fb": {"dfnID":"4a3bf5fb","dfnText":"concatenate","external":true,"refSections":[{"refs":[{"id":"ref-for-string-concatenate"},{"id":"ref-for-string-concatenate\u2460"},{"id":"ref-for-string-concatenate\u2461"},{"id":"ref-for-string-concatenate\u2462"}],"title":"2.2. PerformanceScriptTiming interface"},{"refs":[{"id":"ref-for-string-concatenate\u2463"},{"id":"ref-for-string-concatenate\u2464"}],"title":"3.2.2. Long Script Monitoring"},{"refs":[{"id":"ref-for-string-concatenate\u2465"}],"title":"4.1. Monkey-patches to the WebIDL standard"}],"url":"https://infra.spec.whatwg.org/#string-concatenate"},
"4b2c8c72": {"dfnID":"4b2c8c72","dfnText":"duration","external":true,"refSections":[{"refs":[{"id":"ref-for-dfn-duration"},{"id":"ref-for-dfn-duration\u2460"}],"title":"2.1. PerformanceLongAnimationFrameTiming interface"},{"refs":[{"id":"ref-for-dfn-duration\u2461"}],"title":"2.2. PerformanceScriptTiming interface"},{"refs":[{"id":"ref-for-dfn-duration\u2462"},{"id":"ref-for-dfn-duration\u2463"}],"title":"3.2.1. Long Animation Frame Monitoring {#loaf-monitoring}"},{"refs":[{"id":"ref-for-dfn-duration\u2464"},{"id":"ref-for-dfn-duration\u2465"}],"title":"3.2.2. Long Script Monitoring"}],"url":"https://w3c.github.io/hr-time/#dfn-duration"},
"53275e46": {"dfnID":"53275e46","dfnText":"append","external":true,"refSections":[{"refs":[{"id":"ref-for-list-append"}],"title":"2.1. PerformanceLongAnimationFrameTiming interface"},{"refs":[{"id":"ref-for-list-append\u2460"}],"title":"3.2.1. Long Animation Frame Monitoring {#loaf-monitoring}"},{"refs":[{"id":"ref-for-list-append\u2461"}],"title":"3.2.2. Long Script Monitoring"}],"url":"https://infra.spec.whatwg.org/#list-append"},
"5991ccfb": {"dfnID":"5991ccfb","dfnText":"relevant realm","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-relevant-realm"}],"title":"2.1. PerformanceLongAnimationFrameTiming interface"},{"refs":[{"id":"ref-for-concept-relevant-realm\u2460"}],"title":"3.2.1. Long Animation Frame Monitoring {#loaf-monitoring}"},{"refs":[{"id":"ref-for-concept-relevant-realm\u2461"}],"title":"3.2.2. Long Script Monitoring"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm"},
"5bf9ea61": {"dfnID":"5bf9ea61","dfnText":"attribute","external":true,"refSections":[{"refs":[{"id":"ref-for-dfn-attribute"}],"title":"4.1. Monkey-patches to the WebIDL standard"}],"url":"https://webidl.spec.whatwg.org/#dfn-attribute"},
"5ca8693f": {"dfnID":"5ca8693f","dfnText":"currentTarget","external":true,"refSections":[{"refs":[{"id":"ref-for-dom-event-currenttarget"}],"title":"3.2.2. Long Script Monitoring"}],"url":"https://dom.spec.whatwg.org/#dom-event-currenttarget"},
"5d7209e9": {"dfnID":"5d7209e9","dfnText":"Window","external":true,"refSections":[{"refs":[{"id":"ref-for-window"}],"title":"2.2. PerformanceScriptTiming interface"},{"refs":[{"id":"ref-for-window\u2460"}],"title":"3. Processing model"},{"refs":[{"id":"ref-for-window\u2461"}],"title":"3.1. Frame Timing Info"},{"refs":[{"id":"ref-for-window\u2462"},{"id":"ref-for-window\u2463"},{"id":"ref-for-window\u2464"}],"title":"3.2.2. Long Script Monitoring"}],"url":"https://html.spec.whatwg.org/multipage/nav-history-apis.html#window"},
"622d9f0e": {"dfnID":"622d9f0e","dfnText":"callback","external":true,"refSections":[{"refs":[{"id":"ref-for-event-listener-callback"}],"title":"3.2.2. Long Script Monitoring"}],"url":"https://dom.spec.whatwg.org/#event-listener-callback"},
"649608b9": {"dfnID":"649608b9","dfnText":"list","external":true,"refSections":[{"refs":[{"id":"ref-for-list"}],"title":"2.1. PerformanceLongAnimationFrameTiming interface"},{"refs":[{"id":"ref-for-list\u2460"},{"id":"ref-for-list\u2461"}],"title":"3.1. Frame Timing Info"}],"url":"https://infra.spec.whatwg.org/#list"},
"69ea869d": {"dfnID":"69ea869d","dfnText":"relative high resolution time","external":true,"refSections":[{"refs":[{"id":"ref-for-dfn-relative-high-resolution-time"},{"id":"ref-for-dfn-relative-high-resolution-time\u2460"},{"id":"ref-for-dfn-relative-high-resolution-time\u2461"},{"id":"ref-for-dfn-relative-high-resolution-time\u2462"},{"id":"ref-for-dfn-relative-high-resolution-time\u2463"},{"id":"ref-for-dfn-relative-high-resolution-time\u2464"}],"title":"2.1. PerformanceLongAnimationFrameTiming interface"},{"refs":[{"id":"ref-for-dfn-relative-high-resolution-time\u2465"},{"id":"ref-for-dfn-relative-high-resolution-time\u2466"},{"id":"ref-for-dfn-relative-high-resolution-time\u2467"}],"title":"2.2. PerformanceScriptTiming interface"},{"refs":[{"id":"ref-for-dfn-relative-high-resolution-time\u2468"},{"id":"ref-for-dfn-relative-high-resolution-time\u2460\u24ea"},{"id":"ref-for-dfn-relative-high-resolution-time\u2460\u2460"},{"id":"ref-for-dfn-relative-high-resolution-time\u2460\u2461"}],"title":"3.2.1. Long Animation Frame Monitoring {#loaf-monitoring}"}],"url":"https://w3c.github.io/hr-time/#dfn-relative-high-resolution-time"},
"6ea37aa1": {"dfnID":"6ea37aa1","dfnText":"ID","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-id"}],"title":"3.2.2. Long Script Monitoring"}],"url":"https://dom.spec.whatwg.org/#concept-id"},
"7393da89": {"dfnID":"7393da89","dfnText":"same origin","external":true,"refSections":[{"refs":[{"id":"ref-for-same-origin"}],"title":"3.2.1. Long Animation Frame Monitoring {#loaf-monitoring}"}],"url":"https://html.spec.whatwg.org/multipage/browsers.html#same-origin"},
"7deb6835": {"dfnID":"7deb6835","dfnText":"settings object (for realm)","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-realm-settings-object"}],"title":"3.2.2. Long Script Monitoring"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#concept-realm-settings-object"},
"80bf04ff": {"dfnID":"80bf04ff","dfnText":"coarsen time","external":true,"refSections":[{"refs":[{"id":"ref-for-dfn-coarsen-time"}],"title":"3.1. Frame Timing Info"}],"url":"https://w3c.github.io/hr-time/#dfn-coarsen-time"},
"80e9abc9": {"dfnID":"80e9abc9","dfnText":"CORS cross-origin","external":true,"refSections":[{"refs":[{"id":"ref-for-cors-cross-origin"}],"title":"5.4. PerformanceScriptTiming and opaque scripts"}],"url":"https://html.spec.whatwg.org/multipage/#cors-cross-origin"},
"85394472": {"dfnID":"85394472","dfnText":"Document","external":true,"refSections":[{"refs":[{"id":"ref-for-document"},{"id":"ref-for-document\u2460"},{"id":"ref-for-document\u2461"},{"id":"ref-for-document\u2462"},{"id":"ref-for-document\u2463"},{"id":"ref-for-document\u2464"}],"title":"2.1. PerformanceLongAnimationFrameTiming interface"},{"refs":[{"id":"ref-for-document\u2465"}],"title":"3.1. Frame Timing Info"},{"refs":[{"id":"ref-for-document\u2466"},{"id":"ref-for-document\u2467"},{"id":"ref-for-document\u2468"},{"id":"ref-for-document\u2460\u24ea"},{"id":"ref-for-document\u2460\u2460"},{"id":"ref-for-document\u2460\u2461"}],"title":"3.2.1. Long Animation Frame Monitoring {#loaf-monitoring}"}],"url":"https://dom.spec.whatwg.org/#document"},
"860300d4": {"dfnID":"860300d4","dfnText":"implementation-defined","external":true,"refSections":[{"refs":[{"id":"ref-for-implementation-defined"}],"title":"2.2. PerformanceScriptTiming interface"}],"url":"https://infra.spec.whatwg.org/#implementation-defined"},
"87aba61f": {"dfnID":"87aba61f","dfnText":"nodeName","external":true,"refSections":[{"refs":[{"id":"ref-for-dom-node-nodename"}],"title":"3.2.2. Long Script Monitoring"}],"url":"https://dom.spec.whatwg.org/#dom-node-nodename"},
"8855a9aa": {"dfnID":"8855a9aa","dfnText":"DOMString","external":true,"refSections":[{"refs":[{"id":"ref-for-idl-DOMString"},{"id":"ref-for-idl-DOMString\u2460"}],"title":"2.1. PerformanceLongAnimationFrameTiming interface"},{"refs":[{"id":"ref-for-idl-DOMString\u2461"},{"id":"ref-for-idl-DOMString\u2462"},{"id":"ref-for-idl-DOMString\u2463"},{"id":"ref-for-idl-DOMString\u2464"},{"id":"ref-for-idl-DOMString\u2465"}],"title":"2.2. PerformanceScriptTiming interface"}],"url":"https://webidl.spec.whatwg.org/#idl-DOMString"},
"889e932f": {"dfnID":"889e932f","dfnText":"Exposed","external":true,"refSections":[{"refs":[{"id":"ref-for-Exposed"}],"title":"2.1. PerformanceLongAnimationFrameTiming interface"},{"refs":[{"id":"ref-for-Exposed\u2460"}],"title":"2.2. PerformanceScriptTiming interface"}],"url":"https://webidl.spec.whatwg.org/#Exposed"},
"92000da2": {"dfnID":"92000da2","dfnText":"UIEvent","external":true,"refSections":[{"refs":[{"id":"ref-for-uievent"}],"title":"3.2.2. Long Script Monitoring"}],"url":"https://w3c.github.io/uievents/#uievent"},
"96c16e60": {"dfnID":"96c16e60","dfnText":"Node","external":true,"refSections":[{"refs":[{"id":"ref-for-node"}],"title":"3.2.2. Long Script Monitoring"}],"url":"https://dom.spec.whatwg.org/#node"},
"980252f2": {"dfnID":"980252f2","dfnText":"identifier","external":true,"refSections":[{"refs":[{"id":"ref-for-dfn-identifier"}],"title":"3.2.2. Long Script Monitoring"}],"url":"https://webidl.spec.whatwg.org/#dfn-identifier"},
"984221ca": {"dfnID":"984221ca","dfnText":"struct","external":true,"refSections":[{"refs":[{"id":"ref-for-struct"},{"id":"ref-for-struct\u2460"}],"title":"3.1. Frame Timing Info"}],"url":"https://infra.spec.whatwg.org/#struct"},
"9a31d086": {"dfnID":"9a31d086","dfnText":"unsafe shared current time","external":true,"refSections":[{"refs":[{"id":"ref-for-dfn-unsafe-shared-current-time"}],"title":"3.2.1. Long Animation Frame Monitoring {#loaf-monitoring}"},{"refs":[{"id":"ref-for-dfn-unsafe-shared-current-time\u2460"},{"id":"ref-for-dfn-unsafe-shared-current-time\u2461"},{"id":"ref-for-dfn-unsafe-shared-current-time\u2462"}],"title":"3.2.2. Long Script Monitoring"}],"url":"https://w3c.github.io/hr-time/#dfn-unsafe-shared-current-time"},
"9aeb0a82": {"dfnID":"9aeb0a82","dfnText":"long long","external":true,"refSections":[{"refs":[{"id":"ref-for-idl-long-long"}],"title":"2.2. PerformanceScriptTiming interface"}],"url":"https://webidl.spec.whatwg.org/#idl-long-long"},
"9c4c1e66": {"dfnID":"9c4c1e66","dfnText":"relevant settings object","external":true,"refSections":[{"refs":[{"id":"ref-for-relevant-settings-object"}],"title":"3.2.2. Long Script Monitoring"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object"},
"9d09d04c": {"dfnID":"9d09d04c","dfnText":"type","external":true,"refSections":[{"refs":[{"id":"ref-for-dom-event-type"}],"title":"3.2.2. Long Script Monitoring"}],"url":"https://dom.spec.whatwg.org/#dom-event-type"},
"a1005ed9": {"dfnID":"a1005ed9","dfnText":"module script","external":true,"refSections":[{"refs":[{"id":"ref-for-module-script"}],"title":"3.2.2. Long Script Monitoring"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#module-script"},
"a5c91173": {"dfnID":"a5c91173","dfnText":"SameObject","external":true,"refSections":[{"refs":[{"id":"ref-for-SameObject"}],"title":"2.1. PerformanceLongAnimationFrameTiming interface"}],"url":"https://webidl.spec.whatwg.org/#SameObject"},
"a9ea380f": {"dfnID":"a9ea380f","dfnText":"queue a PerformanceEntry","external":true,"refSections":[{"refs":[{"id":"ref-for-dfn-queue-a-performanceentry"}],"title":"3.2.1. Long Animation Frame Monitoring {#loaf-monitoring}"}],"url":"https://w3c.github.io/performance-timeline/#dfn-queue-a-performanceentry"},
"ae46556f": {"dfnID":"ae46556f","dfnText":"Function","external":true,"refSections":[{"refs":[{"id":"ref-for-Function"},{"id":"ref-for-Function\u2460"},{"id":"ref-for-Function\u2461"}],"title":"3.2.2. Long Script Monitoring"}],"url":"https://webidl.spec.whatwg.org/#Function"},
"ae8def21": {"dfnID":"ae8def21","dfnText":"contain","external":true,"refSections":[{"refs":[{"id":"ref-for-list-contain"},{"id":"ref-for-list-contain\u2460"}],"title":"2.1. PerformanceLongAnimationFrameTiming interface"}],"url":"https://infra.spec.whatwg.org/#list-contain"},
"apply-source-location": {"dfnID":"apply-source-location","dfnText":"apply source location","external":false,"refSections":[{"refs":[{"id":"ref-for-apply-source-location"},{"id":"ref-for-apply-source-location\u2460"},{"id":"ref-for-apply-source-location\u2461"}],"title":"3.2.2. Long Script Monitoring"}],"url":"#apply-source-location"},
"b203675a": {"dfnID":"b203675a","dfnText":"getComputedStyle(elt)","external":true,"refSections":[{"refs":[{"id":"ref-for-dom-window-getcomputedstyle"}],"title":"2.2. PerformanceScriptTiming interface"}],"url":"https://drafts.csswg.org/cssom-1/#dom-window-getcomputedstyle"},
"b254feb4": {"dfnID":"b254feb4","dfnText":"long task","external":true,"refSections":[{"refs":[{"id":"ref-for-long-task"}],"title":"1.2. Long Animation Frames vs. Long Tasks"}],"url":"https://w3c.github.io/longtasks/#long-task"},
"bdbd19d1": {"dfnID":"bdbd19d1","dfnText":"Promise","external":true,"refSections":[{"refs":[{"id":"ref-for-idl-promise"}],"title":"3.2.2. Long Script Monitoring"},{"refs":[{"id":"ref-for-idl-promise\u2460"},{"id":"ref-for-idl-promise\u2461"},{"id":"ref-for-idl-promise\u2462"},{"id":"ref-for-idl-promise\u2463"},{"id":"ref-for-idl-promise\u2464"},{"id":"ref-for-idl-promise\u2465"},{"id":"ref-for-idl-promise\u2466"}],"title":"4.1. Monkey-patches to the WebIDL standard"}],"url":"https://webidl.spec.whatwg.org/#idl-promise"},
"bf77e69a": {"dfnID":"bf77e69a","dfnText":"WeakRef","external":true,"refSections":[{"refs":[{"id":"ref-for-sec-weak-ref-objects"}],"title":"3.1. Frame Timing Info"}],"url":"https://tc39.es/ecma262/multipage/managing-memory.html#sec-weak-ref-objects"},
"c62cd7cf": {"dfnID":"c62cd7cf","dfnText":"origin","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-document-origin"},{"id":"ref-for-concept-document-origin\u2460"}],"title":"3.2.1. Long Animation Frame Monitoring {#loaf-monitoring}"}],"url":"https://dom.spec.whatwg.org/#concept-document-origin"},
"c88f3887": {"dfnID":"c88f3887","dfnText":"item","external":true,"refSections":[{"refs":[{"id":"ref-for-struct-item"},{"id":"ref-for-struct-item\u2460"}],"title":"3.1. Frame Timing Info"}],"url":"https://infra.spec.whatwg.org/#struct-item"},
"caa8344c": {"dfnID":"caa8344c","dfnText":"classic script","external":true,"refSections":[{"refs":[{"id":"ref-for-classic-script"},{"id":"ref-for-classic-script\u2460"}],"title":"3.2.2. Long Script Monitoring"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#classic-script"},
"cc7c9b78": {"dfnID":"cc7c9b78","dfnText":"startTime","external":true,"refSections":[{"refs":[{"id":"ref-for-dom-performanceentry-starttime"}],"title":"2.1. PerformanceLongAnimationFrameTiming interface"}],"url":"https://w3c.github.io/performance-timeline/#dom-performanceentry-starttime"},
"create-script-entry-point": {"dfnID":"create-script-entry-point","dfnText":"create script entry point","external":false,"refSections":[{"refs":[{"id":"ref-for-create-script-entry-point"},{"id":"ref-for-create-script-entry-point\u2460"},{"id":"ref-for-create-script-entry-point\u2461"},{"id":"ref-for-create-script-entry-point\u2462"},{"id":"ref-for-create-script-entry-point\u2463"},{"id":"ref-for-create-script-entry-point\u2464"}],"title":"3.2.2. Long Script Monitoring"}],"url":"#create-script-entry-point"},
"current-frame-timing-info": {"dfnID":"current-frame-timing-info","dfnText":"current frame timing info","external":false,"refSections":[{"refs":[{"id":"ref-for-current-frame-timing-info"},{"id":"ref-for-current-frame-timing-info\u2460"},{"id":"ref-for-current-frame-timing-info\u2461"},{"id":"ref-for-current-frame-timing-info\u2462"},{"id":"ref-for-current-frame-timing-info\u2463"},{"id":"ref-for-current-frame-timing-info\u2464"},{"id":"ref-for-current-frame-timing-info\u2465"}],"title":"3.2.1. Long Animation Frame Monitoring {#loaf-monitoring}"}],"url":"#current-frame-timing-info"},
"d30f4c38": {"dfnID":"d30f4c38","dfnText":"EventListener","external":true,"refSections":[{"refs":[{"id":"ref-for-callbackdef-eventlistener"}],"title":"3.2.2. Long Script Monitoring"}],"url":"https://dom.spec.whatwg.org/#callbackdef-eventlistener"},
"d38f9598": {"dfnID":"d38f9598","dfnText":"getBoundingClientRect()","external":true,"refSections":[{"refs":[{"id":"ref-for-dom-element-getboundingclientrect"}],"title":"2.2. PerformanceScriptTiming interface"}],"url":"https://drafts.csswg.org/cssom-view-1/#dom-element-getboundingclientrect"},
"d4ec1548": {"dfnID":"d4ec1548","dfnText":"timeStamp","external":true,"refSections":[{"refs":[{"id":"ref-for-dom-event-timestamp"}],"title":"3.2.2. Long Script Monitoring"}],"url":"https://dom.spec.whatwg.org/#dom-event-timestamp"},
"d8049b98": {"dfnID":"d8049b98","dfnText":"relevant agent","external":true,"refSections":[{"refs":[{"id":"ref-for-relevant-agent"},{"id":"ref-for-relevant-agent\u2460"}],"title":"3.2.1. Long Animation Frame Monitoring {#loaf-monitoring}"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#relevant-agent"},
"dcf5fafa": {"dfnID":"dcf5fafa","dfnText":"FrozenArray","external":true,"refSections":[{"refs":[{"id":"ref-for-idl-frozen-array"}],"title":"2.1. PerformanceLongAnimationFrameTiming interface"}],"url":"https://webidl.spec.whatwg.org/#idl-frozen-array"},
"dcffbccd": {"dfnID":"dcffbccd","dfnText":"URL","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-url"},{"id":"ref-for-concept-url\u2460"}],"title":"3.2.2. Long Script Monitoring"}],"url":"https://url.spec.whatwg.org/#concept-url"},
"dd6462cb": {"dfnID":"dd6462cb","dfnText":"script","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-script"},{"id":"ref-for-concept-script\u2460"}],"title":"3.2.2. Long Script Monitoring"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#concept-script"},
"de4bb79b": {"dfnID":"de4bb79b","dfnText":"supportedEntryTypes","external":true,"refSections":[{"refs":[{"id":"ref-for-supportedentrytypes-attribute"}],"title":"3. Processing model"}],"url":"https://w3c.github.io/performance-timeline/#supportedentrytypes-attribute"},
"df79032a": {"dfnID":"df79032a","dfnText":"PerformanceEntry","external":true,"refSections":[{"refs":[{"id":"ref-for-the-performanceentry-interface"}],"title":"2.1. PerformanceLongAnimationFrameTiming interface"},{"refs":[{"id":"ref-for-the-performanceentry-interface\u2460"}],"title":"2.2. PerformanceScriptTiming interface"}],"url":"https://w3c.github.io/performance-timeline/#the-performanceentry-interface"},
"dom-performancelonganimationframetiming-blockingduration": {"dfnID":"dom-performancelonganimationframetiming-blockingduration","dfnText":"blockingDuration","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-performancelonganimationframetiming-blockingduration"}],"title":"2.1. PerformanceLongAnimationFrameTiming interface"}],"url":"#dom-performancelonganimationframetiming-blockingduration"},
"dom-performancelonganimationframetiming-duration": {"dfnID":"dom-performancelonganimationframetiming-duration","dfnText":"duration","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-performancelonganimationframetiming-duration"}],"title":"2.1. PerformanceLongAnimationFrameTiming interface"}],"url":"#dom-performancelonganimationframetiming-duration"},
"dom-performancelonganimationframetiming-entrytype": {"dfnID":"dom-performancelonganimationframetiming-entrytype","dfnText":"entryType","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-performancelonganimationframetiming-entrytype"}],"title":"2.1. PerformanceLongAnimationFrameTiming interface"}],"url":"#dom-performancelonganimationframetiming-entrytype"},
"dom-performancelonganimationframetiming-firstuieventtimestamp": {"dfnID":"dom-performancelonganimationframetiming-firstuieventtimestamp","dfnText":"firstUIEventTimestamp","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-performancelonganimationframetiming-firstuieventtimestamp"}],"title":"2.1. PerformanceLongAnimationFrameTiming interface"}],"url":"#dom-performancelonganimationframetiming-firstuieventtimestamp"},
"dom-performancelonganimationframetiming-name": {"dfnID":"dom-performancelonganimationframetiming-name","dfnText":"name","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-performancelonganimationframetiming-name"}],"title":"2.1. PerformanceLongAnimationFrameTiming interface"}],"url":"#dom-performancelonganimationframetiming-name"},
"dom-performancelonganimationframetiming-renderstart": {"dfnID":"dom-performancelonganimationframetiming-renderstart","dfnText":"renderStart","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-performancelonganimationframetiming-renderstart"}],"title":"1.2. Long Animation Frames vs. Long Tasks"},{"refs":[{"id":"ref-for-dom-performancelonganimationframetiming-renderstart\u2460"},{"id":"ref-for-dom-performancelonganimationframetiming-renderstart\u2461"}],"title":"2.1. PerformanceLongAnimationFrameTiming interface"}],"url":"#dom-performancelonganimationframetiming-renderstart"},
"dom-performancelonganimationframetiming-scripts": {"dfnID":"dom-performancelonganimationframetiming-scripts","dfnText":"scripts","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-performancelonganimationframetiming-scripts"}],"title":"2.1. PerformanceLongAnimationFrameTiming interface"}],"url":"#dom-performancelonganimationframetiming-scripts"},
"dom-performancelonganimationframetiming-starttime": {"dfnID":"dom-performancelonganimationframetiming-starttime","dfnText":"startTime","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-performancelonganimationframetiming-starttime"}],"title":"2.1. PerformanceLongAnimationFrameTiming interface"}],"url":"#dom-performancelonganimationframetiming-starttime"},
"dom-performancelonganimationframetiming-styleandlayoutstart": {"dfnID":"dom-performancelonganimationframetiming-styleandlayoutstart","dfnText":"styleAndLayoutStart","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-performancelonganimationframetiming-styleandlayoutstart"}],"title":"1.2. Long Animation Frames vs. Long Tasks"},{"refs":[{"id":"ref-for-dom-performancelonganimationframetiming-styleandlayoutstart\u2460"}],"title":"2.1. PerformanceLongAnimationFrameTiming interface"}],"url":"#dom-performancelonganimationframetiming-styleandlayoutstart"},
"dom-performancelonganimationframetiming-tojson": {"dfnID":"dom-performancelonganimationframetiming-tojson","dfnText":"toJSON","external":false,"refSections":[],"url":"#dom-performancelonganimationframetiming-tojson"},
"dom-performancescripttiming-duration": {"dfnID":"dom-performancescripttiming-duration","dfnText":"duration","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-performancescripttiming-duration"}],"title":"2.2. PerformanceScriptTiming interface"}],"url":"#dom-performancescripttiming-duration"},
"dom-performancescripttiming-entrytype": {"dfnID":"dom-performancescripttiming-entrytype","dfnText":"entryType","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-performancescripttiming-entrytype"}],"title":"2.2. PerformanceScriptTiming interface"}],"url":"#dom-performancescripttiming-entrytype"},
"dom-performancescripttiming-executionstart": {"dfnID":"dom-performancescripttiming-executionstart","dfnText":"executionStart","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-performancescripttiming-executionstart"}],"title":"2.2. PerformanceScriptTiming interface"}],"url":"#dom-performancescripttiming-executionstart"},
"dom-performancescripttiming-forcedstyleandlayoutduration": {"dfnID":"dom-performancescripttiming-forcedstyleandlayoutduration","dfnText":"forcedStyleAndLayoutDuration","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-performancescripttiming-forcedstyleandlayoutduration"}],"title":"2.2. PerformanceScriptTiming interface"}],"url":"#dom-performancescripttiming-forcedstyleandlayoutduration"},
"dom-performancescripttiming-invoker": {"dfnID":"dom-performancescripttiming-invoker","dfnText":"invoker","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-performancescripttiming-invoker"}],"title":"2.2. PerformanceScriptTiming interface"}],"url":"#dom-performancescripttiming-invoker"},
"dom-performancescripttiming-invokertype": {"dfnID":"dom-performancescripttiming-invokertype","dfnText":"invokerType","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-performancescripttiming-invokertype"},{"id":"ref-for-dom-performancescripttiming-invokertype\u2460"},{"id":"ref-for-dom-performancescripttiming-invokertype\u2461"},{"id":"ref-for-dom-performancescripttiming-invokertype\u2462"}],"title":"2.2. PerformanceScriptTiming interface"}],"url":"#dom-performancescripttiming-invokertype"},
"dom-performancescripttiming-name": {"dfnID":"dom-performancescripttiming-name","dfnText":"name","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-performancescripttiming-name"}],"title":"2.2. PerformanceScriptTiming interface"}],"url":"#dom-performancescripttiming-name"},
"dom-performancescripttiming-pauseduration": {"dfnID":"dom-performancescripttiming-pauseduration","dfnText":"pauseDuration","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-performancescripttiming-pauseduration"}],"title":"2.2. PerformanceScriptTiming interface"}],"url":"#dom-performancescripttiming-pauseduration"},
"dom-performancescripttiming-sourcecharposition": {"dfnID":"dom-performancescripttiming-sourcecharposition","dfnText":"sourceCharPosition","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-performancescripttiming-sourcecharposition"}],"title":"2.2. PerformanceScriptTiming interface"}],"url":"#dom-performancescripttiming-sourcecharposition"},
"dom-performancescripttiming-sourcefunctionname": {"dfnID":"dom-performancescripttiming-sourcefunctionname","dfnText":"sourceFunctionName","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-performancescripttiming-sourcefunctionname"}],"title":"2.2. PerformanceScriptTiming interface"}],"url":"#dom-performancescripttiming-sourcefunctionname"},
"dom-performancescripttiming-sourceurl": {"dfnID":"dom-performancescripttiming-sourceurl","dfnText":"sourceURL","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-performancescripttiming-sourceurl"}],"title":"2.2. PerformanceScriptTiming interface"},{"refs":[{"id":"ref-for-dom-performancescripttiming-sourceurl\u2460"}],"title":"5.4. PerformanceScriptTiming and opaque scripts"}],"url":"#dom-performancescripttiming-sourceurl"},
"dom-performancescripttiming-starttime": {"dfnID":"dom-performancescripttiming-starttime","dfnText":"startTime","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-performancescripttiming-starttime"},{"id":"ref-for-dom-performancescripttiming-starttime\u2460"}],"title":"2.2. PerformanceScriptTiming interface"}],"url":"#dom-performancescripttiming-starttime"},
"dom-performancescripttiming-tojson": {"dfnID":"dom-performancescripttiming-tojson","dfnText":"toJSON","external":false,"refSections":[],"url":"#dom-performancescripttiming-tojson"},
"dom-performancescripttiming-window": {"dfnID":"dom-performancescripttiming-window","dfnText":"window","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-performancescripttiming-window"}],"title":"2.2. PerformanceScriptTiming interface"}],"url":"#dom-performancescripttiming-window"},
"dom-performancescripttiming-windowattribution": {"dfnID":"dom-performancescripttiming-windowattribution","dfnText":"windowAttribution","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-performancescripttiming-windowattribution"}],"title":"2.2. PerformanceScriptTiming interface"}],"url":"#dom-performancescripttiming-windowattribution"},
"dom-scriptinvokertype-classic-script": {"dfnID":"dom-scriptinvokertype-classic-script","dfnText":"\"classic-script\"","external":false,"refSections":[],"url":"#dom-scriptinvokertype-classic-script"},
"dom-scriptinvokertype-event-listener": {"dfnID":"dom-scriptinvokertype-event-listener","dfnText":"\"event-listener\"","external":false,"refSections":[],"url":"#dom-scriptinvokertype-event-listener"},
"dom-scriptinvokertype-module-script": {"dfnID":"dom-scriptinvokertype-module-script","dfnText":"\"module-script\"","external":false,"refSections":[],"url":"#dom-scriptinvokertype-module-script"},
"dom-scriptinvokertype-reject-promise": {"dfnID":"dom-scriptinvokertype-reject-promise","dfnText":"\"reject-promise\"","external":false,"refSections":[],"url":"#dom-scriptinvokertype-reject-promise"},
"dom-scriptinvokertype-resolve-promise": {"dfnID":"dom-scriptinvokertype-resolve-promise","dfnText":"\"resolve-promise\"","external":false,"refSections":[],"url":"#dom-scriptinvokertype-resolve-promise"},
"dom-scriptinvokertype-user-callback": {"dfnID":"dom-scriptinvokertype-user-callback","dfnText":"\"user-callback\"","external":false,"refSections":[],"url":"#dom-scriptinvokertype-user-callback"},
"dom-scriptwindowattribution-ancestor": {"dfnID":"dom-scriptwindowattribution-ancestor","dfnText":"\"ancestor\"","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-scriptwindowattribution-ancestor"}],"title":"2.1. PerformanceLongAnimationFrameTiming interface"}],"url":"#dom-scriptwindowattribution-ancestor"},
"dom-scriptwindowattribution-descendant": {"dfnID":"dom-scriptwindowattribution-descendant","dfnText":"\"descendant\"","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-scriptwindowattribution-descendant"}],"title":"2.1. PerformanceLongAnimationFrameTiming interface"}],"url":"#dom-scriptwindowattribution-descendant"},
"dom-scriptwindowattribution-other": {"dfnID":"dom-scriptwindowattribution-other","dfnText":"\"other\"","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-scriptwindowattribution-other"},{"id":"ref-for-dom-scriptwindowattribution-other\u2460"}],"title":"2.1. PerformanceLongAnimationFrameTiming interface"}],"url":"#dom-scriptwindowattribution-other"},
"dom-scriptwindowattribution-same-page": {"dfnID":"dom-scriptwindowattribution-same-page","dfnText":"\"same-page\"","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-scriptwindowattribution-same-page"}],"title":"2.1. PerformanceLongAnimationFrameTiming interface"}],"url":"#dom-scriptwindowattribution-same-page"},
"dom-scriptwindowattribution-self": {"dfnID":"dom-scriptwindowattribution-self","dfnText":"\"self\"","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-scriptwindowattribution-self"}],"title":"2.1. PerformanceLongAnimationFrameTiming interface"}],"url":"#dom-scriptwindowattribution-self"},
"e270bd2a": {"dfnID":"e270bd2a","dfnText":"task","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-task"}],"title":"1.2. Long Animation Frames vs. Long Tasks"},{"refs":[{"id":"ref-for-concept-task\u2460"},{"id":"ref-for-concept-task\u2461"}],"title":"2. Long Animation Frame Timing"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#concept-task"},
"e99bd18e": {"dfnID":"e99bd18e","dfnText":"relevant global object","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-relevant-global"},{"id":"ref-for-concept-relevant-global\u2460"},{"id":"ref-for-concept-relevant-global\u2461"},{"id":"ref-for-concept-relevant-global\u2462"},{"id":"ref-for-concept-relevant-global\u2463"},{"id":"ref-for-concept-relevant-global\u2464"}],"title":"2.1. PerformanceLongAnimationFrameTiming interface"},{"refs":[{"id":"ref-for-concept-relevant-global\u2465"},{"id":"ref-for-concept-relevant-global\u2466"},{"id":"ref-for-concept-relevant-global\u2467"}],"title":"2.2. PerformanceScriptTiming interface"},{"refs":[{"id":"ref-for-concept-relevant-global\u2468"},{"id":"ref-for-concept-relevant-global\u2460\u24ea"},{"id":"ref-for-concept-relevant-global\u2460\u2460"}],"title":"3.2.1. Long Animation Frame Monitoring {#loaf-monitoring}"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global"},
"ece2ee9d": {"dfnID":"ece2ee9d","dfnText":"ancestor navigables","external":true,"refSections":[{"refs":[{"id":"ref-for-ancestor-navigables"},{"id":"ref-for-ancestor-navigables\u2460"}],"title":"2.1. PerformanceLongAnimationFrameTiming interface"},{"refs":[{"id":"ref-for-ancestor-navigables\u2461"}],"title":"3.2.1. Long Animation Frame Monitoring {#loaf-monitoring}"}],"url":"https://html.spec.whatwg.org/multipage/document-sequences.html#ancestor-navigables"},
"efd1ec5d": {"dfnID":"efd1ec5d","dfnText":"object","external":true,"refSections":[{"refs":[{"id":"ref-for-idl-object"}],"title":"2.1. PerformanceLongAnimationFrameTiming interface"},{"refs":[{"id":"ref-for-idl-object\u2460"}],"title":"2.2. PerformanceScriptTiming interface"}],"url":"https://webidl.spec.whatwg.org/#idl-object"},
"enumdef-scriptinvokertype": {"dfnID":"enumdef-scriptinvokertype","dfnText":"ScriptInvokerType","external":false,"refSections":[{"refs":[{"id":"ref-for-enumdef-scriptinvokertype"}],"title":"2.2. PerformanceScriptTiming interface"},{"refs":[{"id":"ref-for-enumdef-scriptinvokertype\u2460"}],"title":"3.1. Frame Timing Info"},{"refs":[{"id":"ref-for-enumdef-scriptinvokertype\u2461"}],"title":"3.2.2. Long Script Monitoring"}],"url":"#enumdef-scriptinvokertype"},
"enumdef-scriptwindowattribution": {"dfnID":"enumdef-scriptwindowattribution","dfnText":"ScriptWindowAttribution","external":false,"refSections":[{"refs":[{"id":"ref-for-enumdef-scriptwindowattribution"},{"id":"ref-for-enumdef-scriptwindowattribution\u2460"}],"title":"2.2. PerformanceScriptTiming interface"}],"url":"#enumdef-scriptwindowattribution"},
"f02cd417": {"dfnID":"f02cd417","dfnText":"iterate","external":true,"refSections":[{"refs":[{"id":"ref-for-list-iterate"},{"id":"ref-for-list-iterate\u2460"}],"title":"2.1. PerformanceLongAnimationFrameTiming interface"},{"refs":[{"id":"ref-for-list-iterate\u2461"}],"title":"3.2.1. Long Animation Frame Monitoring {#loaf-monitoring}"}],"url":"https://infra.spec.whatwg.org/#list-iterate"},
"f1eccc95": {"dfnID":"f1eccc95","dfnText":"settings object (for script)","external":true,"refSections":[{"refs":[{"id":"ref-for-settings-object"},{"id":"ref-for-settings-object\u2460"},{"id":"ref-for-settings-object\u2461"},{"id":"ref-for-settings-object\u2462"},{"id":"ref-for-settings-object\u2463"}],"title":"3.2.2. Long Script Monitoring"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#settings-object"},
"f4531911": {"dfnID":"f4531911","dfnText":"Default","external":true,"refSections":[{"refs":[{"id":"ref-for-Default"}],"title":"2.1. PerformanceLongAnimationFrameTiming interface"},{"refs":[{"id":"ref-for-Default\u2460"}],"title":"2.2. PerformanceScriptTiming interface"}],"url":"https://webidl.spec.whatwg.org/#Default"},
"frame-timing-info": {"dfnID":"frame-timing-info","dfnText":"frame timing info","external":false,"refSections":[{"refs":[{"id":"ref-for-frame-timing-info"},{"id":"ref-for-frame-timing-info\u2460"}],"title":"2.1. PerformanceLongAnimationFrameTiming interface"},{"refs":[{"id":"ref-for-frame-timing-info\u2461"}],"title":"3.1. Frame Timing Info"},{"refs":[{"id":"ref-for-frame-timing-info\u2462"}],"title":"3.2.1. Long Animation Frame Monitoring {#loaf-monitoring}"},{"refs":[{"id":"ref-for-frame-timing-info\u2463"},{"id":"ref-for-frame-timing-info\u2464"}],"title":"3.2.2. Long Script Monitoring"}],"url":"#frame-timing-info"},
"frame-timing-info-current-task-start-time": {"dfnID":"frame-timing-info-current-task-start-time","dfnText":"current task start time","external":false,"refSections":[{"refs":[{"id":"ref-for-frame-timing-info-current-task-start-time"},{"id":"ref-for-frame-timing-info-current-task-start-time\u2460"},{"id":"ref-for-frame-timing-info-current-task-start-time\u2461"}],"title":"3.2.1. Long Animation Frame Monitoring {#loaf-monitoring}"}],"url":"#frame-timing-info-current-task-start-time"},
"frame-timing-info-end-time": {"dfnID":"frame-timing-info-end-time","dfnText":"end time","external":false,"refSections":[{"refs":[{"id":"ref-for-frame-timing-info-end-time"},{"id":"ref-for-frame-timing-info-end-time\u2460"}],"title":"2.1. PerformanceLongAnimationFrameTiming interface"}],"url":"#frame-timing-info-end-time"},
"frame-timing-info-first-ui-event-timestamp": {"dfnID":"frame-timing-info-first-ui-event-timestamp","dfnText":"first ui event timestamp","external":false,"refSections":[{"refs":[{"id":"ref-for-frame-timing-info-first-ui-event-timestamp"}],"title":"2.1. PerformanceLongAnimationFrameTiming interface"},{"refs":[{"id":"ref-for-frame-timing-info-first-ui-event-timestamp\u2460"},{"id":"ref-for-frame-timing-info-first-ui-event-timestamp\u2461"}],"title":"3.2.2. Long Script Monitoring"}],"url":"#frame-timing-info-first-ui-event-timestamp"},
"frame-timing-info-pending-script": {"dfnID":"frame-timing-info-pending-script","dfnText":"pending script","external":false,"refSections":[{"refs":[{"id":"ref-for-frame-timing-info-pending-script"},{"id":"ref-for-frame-timing-info-pending-script\u2460"},{"id":"ref-for-frame-timing-info-pending-script\u2461"},{"id":"ref-for-frame-timing-info-pending-script\u2462"},{"id":"ref-for-frame-timing-info-pending-script\u2463"},{"id":"ref-for-frame-timing-info-pending-script\u2464"},{"id":"ref-for-frame-timing-info-pending-script\u2465"},{"id":"ref-for-frame-timing-info-pending-script\u2466"},{"id":"ref-for-frame-timing-info-pending-script\u2467"}],"title":"3.2.2. Long Script Monitoring"}],"url":"#frame-timing-info-pending-script"},
"frame-timing-info-scripts": {"dfnID":"frame-timing-info-scripts","dfnText":"scripts","external":false,"refSections":[{"refs":[{"id":"ref-for-frame-timing-info-scripts"}],"title":"2.1. PerformanceLongAnimationFrameTiming interface"},{"refs":[{"id":"ref-for-frame-timing-info-scripts\u2460"}],"title":"3.2.2. Long Script Monitoring"}],"url":"#frame-timing-info-scripts"},
"frame-timing-info-start-time": {"dfnID":"frame-timing-info-start-time","dfnText":"start time","external":false,"refSections":[{"refs":[{"id":"ref-for-frame-timing-info-start-time"}],"title":"2.1. PerformanceLongAnimationFrameTiming interface"},{"refs":[{"id":"ref-for-frame-timing-info-start-time\u2460"},{"id":"ref-for-frame-timing-info-start-time\u2461"},{"id":"ref-for-frame-timing-info-start-time\u2462"},{"id":"ref-for-frame-timing-info-start-time\u2463"}],"title":"3.2.1. Long Animation Frame Monitoring {#loaf-monitoring}"}],"url":"#frame-timing-info-start-time"},
"frame-timing-info-style-and-layout-start-time": {"dfnID":"frame-timing-info-style-and-layout-start-time","dfnText":"style and layout start time","external":false,"refSections":[{"refs":[{"id":"ref-for-frame-timing-info-style-and-layout-start-time"}],"title":"2.1. PerformanceLongAnimationFrameTiming interface"},{"refs":[{"id":"ref-for-frame-timing-info-style-and-layout-start-time\u2460"}],"title":"3.2.1. Long Animation Frame Monitoring {#loaf-monitoring}"}],"url":"#frame-timing-info-style-and-layout-start-time"},
"frame-timing-info-task-durations": {"dfnID":"frame-timing-info-task-durations","dfnText":"task durations","external":false,"refSections":[{"refs":[{"id":"ref-for-frame-timing-info-task-durations"}],"title":"2.1. PerformanceLongAnimationFrameTiming interface"},{"refs":[{"id":"ref-for-frame-timing-info-task-durations\u2460"}],"title":"3.2.1. Long Animation Frame Monitoring {#loaf-monitoring}"}],"url":"#frame-timing-info-task-durations"},
"frame-timing-info-update-the-rendering-start-time": {"dfnID":"frame-timing-info-update-the-rendering-start-time","dfnText":"update the rendering start time","external":false,"refSections":[{"refs":[{"id":"ref-for-frame-timing-info-update-the-rendering-start-time"},{"id":"ref-for-frame-timing-info-update-the-rendering-start-time\u2460"}],"title":"2.1. PerformanceLongAnimationFrameTiming interface"},{"refs":[{"id":"ref-for-frame-timing-info-update-the-rendering-start-time\u2461"}],"title":"3.2.1. Long Animation Frame Monitoring {#loaf-monitoring}"}],"url":"#frame-timing-info-update-the-rendering-start-time"},
"long-animation-frame": {"dfnID":"long-animation-frame","dfnText":"long animation frame","external":false,"refSections":[{"refs":[{"id":"ref-for-long-animation-frame"}],"title":"3.2.1. Long Animation Frame Monitoring {#loaf-monitoring}"}],"url":"#long-animation-frame"},
"nearest-same-origin-root": {"dfnID":"nearest-same-origin-root","dfnText":"nearest same-origin root","external":false,"refSections":[{"refs":[{"id":"ref-for-nearest-same-origin-root"},{"id":"ref-for-nearest-same-origin-root\u2460"},{"id":"ref-for-nearest-same-origin-root\u2461"}],"title":"3.2.1. Long Animation Frame Monitoring {#loaf-monitoring}"}],"url":"#nearest-same-origin-root"},
"performancelonganimationframetiming": {"dfnID":"performancelonganimationframetiming","dfnText":"PerformanceLongAnimationFrameTiming","external":false,"refSections":[{"refs":[{"id":"ref-for-performancelonganimationframetiming"},{"id":"ref-for-performancelonganimationframetiming\u2460"}],"title":"2.1. PerformanceLongAnimationFrameTiming interface"},{"refs":[{"id":"ref-for-performancelonganimationframetiming\u2461"}],"title":"3.2.1. Long Animation Frame Monitoring {#loaf-monitoring}"}],"url":"#performancelonganimationframetiming"},
"performancelonganimationframetiming-timing-info": {"dfnID":"performancelonganimationframetiming-timing-info","dfnText":"timing info","external":false,"refSections":[{"refs":[{"id":"ref-for-performancelonganimationframetiming-timing-info"},{"id":"ref-for-performancelonganimationframetiming-timing-info\u2460"},{"id":"ref-for-performancelonganimationframetiming-timing-info\u2461"},{"id":"ref-for-performancelonganimationframetiming-timing-info\u2462"},{"id":"ref-for-performancelonganimationframetiming-timing-info\u2463"},{"id":"ref-for-performancelonganimationframetiming-timing-info\u2464"},{"id":"ref-for-performancelonganimationframetiming-timing-info\u2465"},{"id":"ref-for-performancelonganimationframetiming-timing-info\u2466"}],"title":"2.1. PerformanceLongAnimationFrameTiming interface"},{"refs":[{"id":"ref-for-performancelonganimationframetiming-timing-info\u2467"}],"title":"3.2.1. Long Animation Frame Monitoring {#loaf-monitoring}"}],"url":"#performancelonganimationframetiming-timing-info"},
"performancescripttiming": {"dfnID":"performancescripttiming","dfnText":"PerformanceScriptTiming","external":false,"refSections":[{"refs":[{"id":"ref-for-performancescripttiming"},{"id":"ref-for-performancescripttiming\u2460"}],"title":"2.1. PerformanceLongAnimationFrameTiming interface"},{"refs":[{"id":"ref-for-performancescripttiming\u2461"},{"id":"ref-for-performancescripttiming\u2462"},{"id":"ref-for-performancescripttiming\u2463"}],"title":"2.2. PerformanceScriptTiming interface"},{"refs":[{"id":"ref-for-performancescripttiming\u2464"},{"id":"ref-for-performancescripttiming\u2465"}],"title":"5.4. PerformanceScriptTiming and opaque scripts"}],"url":"#performancescripttiming"},
"performancescripttiming-timing-info": {"dfnID":"performancescripttiming-timing-info","dfnText":"timing info","external":false,"refSections":[{"refs":[{"id":"ref-for-performancescripttiming-timing-info"}],"title":"2.1. PerformanceLongAnimationFrameTiming interface"},{"refs":[{"id":"ref-for-performancescripttiming-timing-info\u2460"},{"id":"ref-for-performancescripttiming-timing-info\u2461"},{"id":"ref-for-performancescripttiming-timing-info\u2462"},{"id":"ref-for-performancescripttiming-timing-info\u2463"},{"id":"ref-for-performancescripttiming-timing-info\u2464"},{"id":"ref-for-performancescripttiming-timing-info\u2465"},{"id":"ref-for-performancescripttiming-timing-info\u2466"},{"id":"ref-for-performancescripttiming-timing-info\u2467"},{"id":"ref-for-performancescripttiming-timing-info\u2468"},{"id":"ref-for-performancescripttiming-timing-info\u2460\u24ea"},{"id":"ref-for-performancescripttiming-timing-info\u2460\u2460"},{"id":"ref-for-performancescripttiming-timing-info\u2460\u2461"},{"id":"ref-for-performancescripttiming-timing-info\u2460\u2462"},{"id":"ref-for-performancescripttiming-timing-info\u2460\u2463"},{"id":"ref-for-performancescripttiming-timing-info\u2460\u2464"},{"id":"ref-for-performancescripttiming-timing-info\u2460\u2465"},{"id":"ref-for-performancescripttiming-timing-info\u2460\u2466"},{"id":"ref-for-performancescripttiming-timing-info\u2460\u2467"},{"id":"ref-for-performancescripttiming-timing-info\u2460\u2468"},{"id":"ref-for-performancescripttiming-timing-info\u2461\u24ea"}],"title":"2.2. PerformanceScriptTiming interface"}],"url":"#performancescripttiming-timing-info"},
"performancescripttiming-window-attribution": {"dfnID":"performancescripttiming-window-attribution","dfnText":"window attribution","external":false,"refSections":[{"refs":[{"id":"ref-for-performancescripttiming-window-attribution"}],"title":"2.1. PerformanceLongAnimationFrameTiming interface"},{"refs":[{"id":"ref-for-performancescripttiming-window-attribution\u2460"}],"title":"2.2. PerformanceScriptTiming interface"}],"url":"#performancescripttiming-window-attribution"},
"promise-invoker-name-when-created": {"dfnID":"promise-invoker-name-when-created","dfnText":"invoker name when created","external":false,"refSections":[{"refs":[{"id":"ref-for-promise-invoker-name-when-created"}],"title":"3.2.2. Long Script Monitoring"},{"refs":[{"id":"ref-for-promise-invoker-name-when-created\u2460"}],"title":"4.1. Monkey-patches to the WebIDL standard"}],"url":"#promise-invoker-name-when-created"},
"promise-script-url-when-created": {"dfnID":"promise-script-url-when-created","dfnText":"script url when created","external":false,"refSections":[{"refs":[{"id":"ref-for-promise-script-url-when-created"}],"title":"3.2.2. Long Script Monitoring"},{"refs":[{"id":"ref-for-promise-script-url-when-created\u2460"}],"title":"4.1. Monkey-patches to the WebIDL standard"}],"url":"#promise-script-url-when-created"},
"record-classic-script-creation-time": {"dfnID":"record-classic-script-creation-time","dfnText":"record classic script creation time","external":false,"refSections":[],"url":"#record-classic-script-creation-time"},
"record-classic-script-execution-start-time": {"dfnID":"record-classic-script-execution-start-time","dfnText":"record classic script execution start time","external":false,"refSections":[],"url":"#record-classic-script-execution-start-time"},
"record-module-script-execution-start-time": {"dfnID":"record-module-script-execution-start-time","dfnText":"record module script execution start time","external":false,"refSections":[],"url":"#record-module-script-execution-start-time"},
"record-pause-duration": {"dfnID":"record-pause-duration","dfnText":"record pause duration","external":false,"refSections":[],"url":"#record-pause-duration"},
"record-rendering-time": {"dfnID":"record-rendering-time","dfnText":"record rendering time","external":false,"refSections":[],"url":"#record-rendering-time"},
"record-task-end-time": {"dfnID":"record-task-end-time","dfnText":"record task end time","external":false,"refSections":[],"url":"#record-task-end-time"},
"record-task-start-time": {"dfnID":"record-task-start-time","dfnText":"record task start time","external":false,"refSections":[],"url":"#record-task-start-time"},
"record-timing-info-for-event-listener": {"dfnID":"record-timing-info-for-event-listener","dfnText":"record timing info for event listener","external":false,"refSections":[],"url":"#record-timing-info-for-event-listener"},
"record-timing-info-for-microtask-checkpoint": {"dfnID":"record-timing-info-for-microtask-checkpoint","dfnText":"record timing info for microtask checkpoint","external":false,"refSections":[],"url":"#record-timing-info-for-microtask-checkpoint"},
"record-timing-info-for-promise-resolver": {"dfnID":"record-timing-info-for-promise-resolver","dfnText":"record timing info for promise resolver","external":false,"refSections":[{"refs":[{"id":"ref-for-record-timing-info-for-promise-resolver"},{"id":"ref-for-record-timing-info-for-promise-resolver\u2460"}],"title":"4.1. Monkey-patches to the WebIDL standard"}],"url":"#record-timing-info-for-promise-resolver"},
"record-timing-info-for-timer-handler": {"dfnID":"record-timing-info-for-timer-handler","dfnText":"record timing info for timer handler","external":false,"refSections":[],"url":"#record-timing-info-for-timer-handler"},
"record-timing-info-for-user-callback": {"dfnID":"record-timing-info-for-user-callback","dfnText":"record timing info for user callback","external":false,"refSections":[{"refs":[{"id":"ref-for-record-timing-info-for-user-callback"}],"title":"4.1. Monkey-patches to the WebIDL standard"}],"url":"#record-timing-info-for-user-callback"},
"relevant-frame-timing-info": {"dfnID":"relevant-frame-timing-info","dfnText":"relevant frame timing info","external":false,"refSections":[{"refs":[{"id":"ref-for-relevant-frame-timing-info"},{"id":"ref-for-relevant-frame-timing-info\u2460"},{"id":"ref-for-relevant-frame-timing-info\u2461"}],"title":"3.2.1. Long Animation Frame Monitoring {#loaf-monitoring}"},{"refs":[{"id":"ref-for-relevant-frame-timing-info\u2462"},{"id":"ref-for-relevant-frame-timing-info\u2463"},{"id":"ref-for-relevant-frame-timing-info\u2464"},{"id":"ref-for-relevant-frame-timing-info\u2465"}],"title":"3.2.2. Long Script Monitoring"}],"url":"#relevant-frame-timing-info"},
"report-frame-timing": {"dfnID":"report-frame-timing","dfnText":"report frame timing","external":false,"refSections":[{"refs":[{"id":"ref-for-report-frame-timing"},{"id":"ref-for-report-frame-timing\u2460"}],"title":"3.2.1. Long Animation Frame Monitoring {#loaf-monitoring}"}],"url":"#report-frame-timing"},
"script-timing-info": {"dfnID":"script-timing-info","dfnText":"script timing info","external":false,"refSections":[{"refs":[{"id":"ref-for-script-timing-info"}],"title":"2.2. PerformanceScriptTiming interface"},{"refs":[{"id":"ref-for-script-timing-info\u2460"},{"id":"ref-for-script-timing-info\u2461"}],"title":"3.1. Frame Timing Info"},{"refs":[{"id":"ref-for-script-timing-info\u2462"},{"id":"ref-for-script-timing-info\u2463"},{"id":"ref-for-script-timing-info\u2464"},{"id":"ref-for-script-timing-info\u2465"},{"id":"ref-for-script-timing-info\u2466"},{"id":"ref-for-script-timing-info\u2467"},{"id":"ref-for-script-timing-info\u2468"},{"id":"ref-for-script-timing-info\u2460\u24ea"},{"id":"ref-for-script-timing-info\u2460\u2460"},{"id":"ref-for-script-timing-info\u2460\u2461"}],"title":"3.2.2. Long Script Monitoring"}],"url":"#script-timing-info"},
"script-timing-info-end-time": {"dfnID":"script-timing-info-end-time","dfnText":"end time","external":false,"refSections":[{"refs":[{"id":"ref-for-script-timing-info-end-time"}],"title":"2.2. PerformanceScriptTiming interface"},{"refs":[{"id":"ref-for-script-timing-info-end-time\u2460"},{"id":"ref-for-script-timing-info-end-time\u2461"}],"title":"3.2.2. Long Script Monitoring"}],"url":"#script-timing-info-end-time"},
"script-timing-info-event-target-element-id": {"dfnID":"script-timing-info-event-target-element-id","dfnText":"event target element id","external":false,"refSections":[{"refs":[{"id":"ref-for-script-timing-info-event-target-element-id"},{"id":"ref-for-script-timing-info-event-target-element-id\u2460"}],"title":"2.2. PerformanceScriptTiming interface"},{"refs":[{"id":"ref-for-script-timing-info-event-target-element-id\u2461"}],"title":"3.2.2. Long Script Monitoring"}],"url":"#script-timing-info-event-target-element-id"},
"script-timing-info-event-target-element-src-attribute": {"dfnID":"script-timing-info-event-target-element-src-attribute","dfnText":"event target element src attribute","external":false,"refSections":[{"refs":[{"id":"ref-for-script-timing-info-event-target-element-src-attribute"},{"id":"ref-for-script-timing-info-event-target-element-src-attribute\u2460"}],"title":"2.2. PerformanceScriptTiming interface"},{"refs":[{"id":"ref-for-script-timing-info-event-target-element-src-attribute\u2461"}],"title":"3.2.2. Long Script Monitoring"}],"url":"#script-timing-info-event-target-element-src-attribute"},
"script-timing-info-event-type": {"dfnID":"script-timing-info-event-type","dfnText":"event type","external":false,"refSections":[{"refs":[{"id":"ref-for-script-timing-info-event-type"}],"title":"2.2. PerformanceScriptTiming interface"},{"refs":[{"id":"ref-for-script-timing-info-event-type\u2460"}],"title":"3.2.2. Long Script Monitoring"}],"url":"#script-timing-info-event-type"},
"script-timing-info-execution-start-time": {"dfnID":"script-timing-info-execution-start-time","dfnText":"execution start time","external":false,"refSections":[{"refs":[{"id":"ref-for-script-timing-info-execution-start-time"},{"id":"ref-for-script-timing-info-execution-start-time\u2460"}],"title":"2.2. PerformanceScriptTiming interface"},{"refs":[{"id":"ref-for-script-timing-info-execution-start-time\u2461"},{"id":"ref-for-script-timing-info-execution-start-time\u2462"}],"title":"3.2.2. Long Script Monitoring"}],"url":"#script-timing-info-execution-start-time"},
"script-timing-info-invoker-name": {"dfnID":"script-timing-info-invoker-name","dfnText":"invoker name","external":false,"refSections":[{"refs":[{"id":"ref-for-script-timing-info-invoker-name"},{"id":"ref-for-script-timing-info-invoker-name\u2460"},{"id":"ref-for-script-timing-info-invoker-name\u2461"},{"id":"ref-for-script-timing-info-invoker-name\u2462"}],"title":"2.2. PerformanceScriptTiming interface"},{"refs":[{"id":"ref-for-script-timing-info-invoker-name\u2463"},{"id":"ref-for-script-timing-info-invoker-name\u2464"},{"id":"ref-for-script-timing-info-invoker-name\u2465"},{"id":"ref-for-script-timing-info-invoker-name\u2466"},{"id":"ref-for-script-timing-info-invoker-name\u2467"}],"title":"3.2.2. Long Script Monitoring"}],"url":"#script-timing-info-invoker-name"},
"script-timing-info-invoker-type": {"dfnID":"script-timing-info-invoker-type","dfnText":"invoker type","external":false,"refSections":[{"refs":[{"id":"ref-for-script-timing-info-invoker-type"}],"title":"2.2. PerformanceScriptTiming interface"},{"refs":[{"id":"ref-for-script-timing-info-invoker-type\u2460"},{"id":"ref-for-script-timing-info-invoker-type\u2461"}],"title":"3.2.2. Long Script Monitoring"}],"url":"#script-timing-info-invoker-type"},
"script-timing-info-pause-duration": {"dfnID":"script-timing-info-pause-duration","dfnText":"pause duration","external":false,"refSections":[{"refs":[{"id":"ref-for-script-timing-info-pause-duration"}],"title":"2.2. PerformanceScriptTiming interface"},{"refs":[{"id":"ref-for-script-timing-info-pause-duration\u2460"}],"title":"3.2.2. Long Script Monitoring"}],"url":"#script-timing-info-pause-duration"},
"script-timing-info-source-character-position": {"dfnID":"script-timing-info-source-character-position","dfnText":"source character position","external":false,"refSections":[{"refs":[{"id":"ref-for-script-timing-info-source-character-position"}],"title":"2.2. PerformanceScriptTiming interface"},{"refs":[{"id":"ref-for-script-timing-info-source-character-position\u2460"},{"id":"ref-for-script-timing-info-source-character-position\u2461"}],"title":"3.2.2. Long Script Monitoring"}],"url":"#script-timing-info-source-character-position"},
"script-timing-info-source-function-name": {"dfnID":"script-timing-info-source-function-name","dfnText":"source function name","external":false,"refSections":[{"refs":[{"id":"ref-for-script-timing-info-source-function-name"}],"title":"2.2. PerformanceScriptTiming interface"},{"refs":[{"id":"ref-for-script-timing-info-source-function-name\u2460"},{"id":"ref-for-script-timing-info-source-function-name\u2461"}],"title":"3.2.2. Long Script Monitoring"}],"url":"#script-timing-info-source-function-name"},
"script-timing-info-source-url": {"dfnID":"script-timing-info-source-url","dfnText":"source url","external":false,"refSections":[{"refs":[{"id":"ref-for-script-timing-info-source-url"},{"id":"ref-for-script-timing-info-source-url\u2460"}],"title":"2.2. PerformanceScriptTiming interface"},{"refs":[{"id":"ref-for-script-timing-info-source-url\u2461"},{"id":"ref-for-script-timing-info-source-url\u2462"},{"id":"ref-for-script-timing-info-source-url\u2463"},{"id":"ref-for-script-timing-info-source-url\u2464"},{"id":"ref-for-script-timing-info-source-url\u2465"}],"title":"3.2.2. Long Script Monitoring"}],"url":"#script-timing-info-source-url"},
"script-timing-info-start-time": {"dfnID":"script-timing-info-start-time","dfnText":"start time","external":false,"refSections":[{"refs":[{"id":"ref-for-script-timing-info-start-time"}],"title":"2.2. PerformanceScriptTiming interface"},{"refs":[{"id":"ref-for-script-timing-info-start-time\u2460"},{"id":"ref-for-script-timing-info-start-time\u2461"},{"id":"ref-for-script-timing-info-start-time\u2462"}],"title":"3.2.2. Long Script Monitoring"}],"url":"#script-timing-info-start-time"},
"script-timing-info-window": {"dfnID":"script-timing-info-window","dfnText":"window","external":false,"refSections":[{"refs":[{"id":"ref-for-script-timing-info-window"}],"title":"2.1. PerformanceLongAnimationFrameTiming interface"},{"refs":[{"id":"ref-for-script-timing-info-window\u2460"}],"title":"2.2. PerformanceScriptTiming interface"},{"refs":[{"id":"ref-for-script-timing-info-window\u2461"}],"title":"3.2.2. Long Script Monitoring"}],"url":"#script-timing-info-window"},
"set-source-url-for-script-block": {"dfnID":"set-source-url-for-script-block","dfnText":"set source url for script block","external":false,"refSections":[{"refs":[{"id":"ref-for-set-source-url-for-script-block"},{"id":"ref-for-set-source-url-for-script-block\u2460"}],"title":"3.2.2. Long Script Monitoring"}],"url":"#set-source-url-for-script-block"},
};

document.addEventListener("DOMContentLoaded", ()=>{
    genAllDfnPanels();

    document.body.addEventListener("click", (e) => {
        // If not handled already, just hide all dfn panels.
        hideAllDfnPanels();
    });
});

window.addEventListener("resize", () => {
    // Pin any visible dfn panel
    queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(el=>positionDfnPanel(el));
});

function genAllDfnPanels() {
    for(const panelData of Object.values(dfnPanelData)) {
        const dfnID = panelData.dfnID;
        const dfn = document.getElementById(dfnID);
        if(!dfn) {
            console.log(`Can't find dfn#${dfnID}.`, panelData);
            continue;
        }
        dfn.panelData = panelData;
        insertDfnPopupAction(dfn);
    }
}

function genDfnPanel(dfn, { dfnID, url, dfnText, refSections, external }) {
    const dfnPanel = mk.aside({
        class: "dfn-panel on",
        id: `infopanel-for-${dfnID}`,
        "data-for": dfnID,
        "aria-labelled-by":`infopaneltitle-for-${dfnID}`,
        },
        mk.span({id:`infopaneltitle-for-${dfnID}`, style:"display:none"},
            `Info about the '${dfnText}' ${external?"external":""} reference.`),
        mk.a({href:url, class:"dfn-link"}, url),
        refSections.length == 0 ? [] :
            mk.b({}, "Referenced in:"),
            mk.ul({},
                ...refSections.map(section=>
                    mk.li({},
                        ...section.refs.map((ref, refI)=>
                            [
                                mk.a({ href: `#${ref.id}` },
                                    (refI == 0) ? section.title : `(${refI + 1})`
                                ),
                                " ",
                            ]
                        ),
                    ),
                ),
            ),
        genLinkingSyntaxes(dfn),
    );

    dfnPanel.addEventListener('click', (event) => {
        if (event.target.nodeName == 'A') {
            scrollToTargetAndHighlight(event);
            pinDfnPanel(dfnPanel);
        }
        event.stopPropagation();
        refocusOnTarget(event);
    });
    dfnPanel.addEventListener('keydown', (event) => {
        if(event.keyCode == 27) { // Escape key
            hideDfnPanel({dfnPanel});
            event.stopPropagation();
            event.preventDefault();
        }
    });

    dfnPanel.dfn = dfn;
    dfn.dfnPanel = dfnPanel;
    return dfnPanel;
}



function hideAllDfnPanels() {
    // Delete the currently-active dfn panel.
    queryAll(".dfn-panel").forEach(dfnPanel=>hideDfnPanel({dfnPanel}));
}

function showDfnPanel(dfn) {
    hideAllDfnPanels(); // Only display one at a time.

    dfn.setAttribute("aria-expanded", "true");

    const dfnPanel = genDfnPanel(dfn, dfn.panelData);

    // Give the dfn a unique tabindex, and then
    // give all the tabbable panel bits successive indexes.
    let tabIndex = 100;
    dfn.tabIndex = tabIndex++;
    const tabbable = dfnPanel.querySelectorAll(":is(a, button)");
    for (const el of tabbable) {
        el.tabIndex = tabIndex++;
    }

    append(document.body, dfnPanel);
    positionDfnPanel(dfnPanel);
}

function positionDfnPanel(dfnPanel) {
    const dfn = dfnPanel.dfn;
    const dfnPos = getBounds(dfn);
    dfnPanel.style.top = dfnPos.bottom + "px";
    dfnPanel.style.left = dfnPos.left + "px";

    const panelPos = dfnPanel.getBoundingClientRect();
    const panelMargin = 8;
    const maxRight = document.body.parentNode.clientWidth - panelMargin;
    if (panelPos.right > maxRight) {
        const overflowAmount = panelPos.right - maxRight;
        const newLeft = Math.max(panelMargin, dfnPos.left - overflowAmount);
        dfnPanel.style.left = newLeft + "px";
    }
}

function pinDfnPanel(dfnPanel) {
    // Switch it to "activated" state, which pins it.
    dfnPanel.classList.add("activated");
    dfnPanel.style.position = "fixed";
    dfnPanel.style.left = null;
    dfnPanel.style.top = null;
}

function hideDfnPanel({dfn, dfnPanel}) {
    if(!dfnPanel) dfnPanel = dfn.dfnPanel;
    if(!dfn) dfn = dfnPanel.dfn;
    dfn.dfnPanel = undefined;
    dfnPanel.dfn = undefined;
    dfn.setAttribute("aria-expanded", "false");
    dfn.tabIndex = undefined;
    dfnPanel.remove()
}

function toggleDfnPanel(dfn) {
    if(dfn.dfnPanel) {
        hideDfnPanel(dfn);
    } else {
        showDfnPanel(dfn);
    }
}

function insertDfnPopupAction(dfn) {
    dfn.setAttribute('role', 'button');
    dfn.setAttribute('aria-expanded', 'false')
    dfn.tabIndex = 0;
    dfn.classList.add('has-dfn-panel');
    dfn.addEventListener('click', (event) => {
        toggleDfnPanel(dfn);
        event.stopPropagation();
    });
    dfn.addEventListener('keypress', (event) => {
        const kc = event.keyCode;
        // 32->Space, 13->Enter
        if(kc == 32 || kc == 13) {
            toggleDfnPanel(dfn);
            event.stopPropagation();
            event.preventDefault();
        }
    });
}

function refocusOnTarget(event) {
    const target = event.target;
    setTimeout(() => {
        // Refocus on the event.target element.
        // This is needed after browser scrolls to the destination.
        target.focus();
    });
}

// TODO: shared util
// Returns the root-level absolute position {left and top} of element.
function getBounds(el, relativeTo=document.body) {
    const relativeRect = relativeTo.getBoundingClientRect();
    const elRect = el.getBoundingClientRect();
    const top = elRect.top - relativeRect.top;
    const left = elRect.left - relativeRect.left;
    return {
        top,
        left,
        bottom: top + elRect.height,
        right: left + elRect.width,
    }
}

function scrollToTargetAndHighlight(event) {
    let hash = event.target.hash;
    if (hash) {
        hash = decodeURIComponent(hash.substring(1));
        const dest = document.getElementById(hash);
        if (dest) {
            dest.classList.add('highlighted');
            setTimeout(() => dest.classList.remove('highlighted'), 1000);
        }
    }
}

// Functions, divided by link type, that wrap an autolink's
// contents with the appropriate outer syntax.
// Alternately, a string naming another type they format
// the same as.
function needsFor(type) {
    switch(type) {
        case "descriptor":
        case "value":
        case "element-attr":
        case "attr-value":
        case "element-state":
        case "method":
        case "constructor":
        case "argument":
        case "attribute":
        case "const":
        case "dict-member":
        case "event":
        case "enum-value":
        case "stringifier":
        case "serializer":
        case "iterator":
        case "maplike":
        case "setlike":
        case "state":
        case "mode":
        case "context":
        case "facet": return true;

        default: return false;
    }
}
function refusesFor(type) {
    switch(type) {
        case "property":
        case "element":
        case "interface":
        case "namespace":
        case "callback":
        case "dictionary":
        case "enum":
        case "exception":
        case "typedef":
        case "http-header":
        case "permission": return true;

        default: return false;
    }
}
function linkFormatterFromType(type) {
    switch(type) {
        case 'scheme':
        case 'permission':
        case 'dfn': return (text) => `[=${text}=]`;

        case 'abstract-op': return (text) => `[\$${text}\$]`;

        case 'function':
        case 'at-rule':
        case 'selector':
        case 'value': return (text) => `''${text}''`;

        case 'http-header': return (text) => `[:${text}:]`;

        case 'interface':
        case 'constructor':
        case 'method':
        case 'argument':
        case 'attribute':
        case 'callback':
        case 'dictionary':
        case 'dict-member':
        case 'enum':
        case 'enum-value':
        case 'exception':
        case 'const':
        case 'typedef':
        case 'stringifier':
        case 'serializer':
        case 'iterator':
        case 'maplike':
        case 'setlike':
        case 'extended-attribute':
        case 'event':
        case 'idl': return (text) => `{{${text}}}`;

        case 'element-state':
        case 'element-attr':
        case 'attr-value':
        case 'element': return (element) => `<{${element}}>`;

        case 'grammar': return (text) => `${text} (within a <pre class=prod>)`;

        case 'type': return (text)=> `<<${text}>>`;

        case 'descriptor':
        case 'property': return (text) => `'${text}'`;

        default: return;
    };
};

function genLinkingSyntaxes(dfn) {
    if(dfn.tagName != "DFN") return;

    const type = dfn.getAttribute('data-dfn-type');
    if(!type) {
        console.log(`<dfn> doesn't have a data-dfn-type:`, dfn);
        return [];
    }

    // Return a function that wraps link text based on the type
    const linkFormatter = linkFormatterFromType(type);
    if(!linkFormatter) {
        console.log(`<dfn> has an unknown data-dfn-type:`, dfn);
        return [];
    }

    let ltAlts;
    if(dfn.hasAttribute('data-lt')) {
        ltAlts = dfn.getAttribute('data-lt')
            .split("|")
            .map(x=>x.trim());
    } else {
        ltAlts = [dfn.textContent.trim()];
    }
    if(type == "type") {
        // lt of "<foo>", but "foo" is the interior;
        // <<foo/bar>> is how you write it with a for,
        // not <foo/<bar>> or whatever.
        for(var i = 0; i < ltAlts.length; i++) {
            const lt = ltAlts[i];
            const match = /<(.*)>/.exec(lt);
            if(match) { ltAlts[i] = match[1]; }
        }
    }

    let forAlts;
    if(dfn.hasAttribute('data-dfn-for')) {
        forAlts = dfn.getAttribute('data-dfn-for')
            .split(",")
            .map(x=>x.trim());
    } else {
        forAlts = [''];
    }

    let linkingSyntaxes = [];
    if(!needsFor(type)) {
        for(const lt of ltAlts) {
            linkingSyntaxes.push(linkFormatter(lt));
        }
    }
    if(!refusesFor(type)) {
        for(const f of forAlts) {
            linkingSyntaxes.push(linkFormatter(`${f}/${ltAlts[0]}`))
        }
    }
    return [
        mk.b({}, 'Possible linking syntaxes:'),
        mk.ul({},
            ...linkingSyntaxes.map(link => {
                const copyLink = async () =>
                    await navigator.clipboard.writeText(link);
                return mk.li({},
                    mk.div({ class: 'link-item' },
                        mk.button({
                            class: 'copy-icon', title: 'Copy',
                            type: 'button',
                            _onclick: copyLink,
                            tabindex: 0,
                        }, mk.span({ class: 'icon' }) ),
                        mk.span({}, link)
                    )
                );
            })
        )
    ];
}
}
</script>
<script>/* Boilerplate: script-ref-hints */
"use strict";
{
let refsData = {
"#apply-source-location": {"displayText":"apply source location","export":true,"for_":[],"level":"1","normative":true,"shortname":"long-animation-frames","spec":"long-animation-frames-1","status":"local","text":"apply source location","type":"dfn","url":"#apply-source-location"},
"#create-script-entry-point": {"displayText":"create script entry point","export":true,"for_":[],"level":"1","normative":true,"shortname":"long-animation-frames","spec":"long-animation-frames-1","status":"local","text":"create script entry point","type":"dfn","url":"#create-script-entry-point"},
"#current-frame-timing-info": {"displayText":"current frame timing info","export":true,"for_":[],"level":"1","normative":true,"shortname":"long-animation-frames","spec":"long-animation-frames-1","status":"local","text":"current frame timing info","type":"dfn","url":"#current-frame-timing-info"},
"#dom-performancelonganimationframetiming-blockingduration": {"displayText":"blockingDuration","export":true,"for_":["PerformanceLongAnimationFrameTiming"],"level":"1","normative":true,"shortname":"long-animation-frames","spec":"long-animation-frames-1","status":"local","text":"blockingDuration","type":"attribute","url":"#dom-performancelonganimationframetiming-blockingduration"},
"#dom-performancelonganimationframetiming-duration": {"displayText":"duration","export":true,"for_":["PerformanceLongAnimationFrameTiming"],"level":"1","normative":true,"shortname":"long-animation-frames","spec":"long-animation-frames-1","status":"local","text":"duration","type":"attribute","url":"#dom-performancelonganimationframetiming-duration"},
"#dom-performancelonganimationframetiming-entrytype": {"displayText":"entryType","export":true,"for_":["PerformanceLongAnimationFrameTiming"],"level":"1","normative":true,"shortname":"long-animation-frames","spec":"long-animation-frames-1","status":"local","text":"entryType","type":"attribute","url":"#dom-performancelonganimationframetiming-entrytype"},
"#dom-performancelonganimationframetiming-firstuieventtimestamp": {"displayText":"firstUIEventTimestamp","export":true,"for_":["PerformanceLongAnimationFrameTiming"],"level":"1","normative":true,"shortname":"long-animation-frames","spec":"long-animation-frames-1","status":"local","text":"firstUIEventTimestamp","type":"attribute","url":"#dom-performancelonganimationframetiming-firstuieventtimestamp"},
"#dom-performancelonganimationframetiming-name": {"displayText":"name","export":true,"for_":["PerformanceLongAnimationFrameTiming"],"level":"1","normative":true,"shortname":"long-animation-frames","spec":"long-animation-frames-1","status":"local","text":"name","type":"attribute","url":"#dom-performancelonganimationframetiming-name"},
"#dom-performancelonganimationframetiming-renderstart": {"displayText":"renderStart","export":true,"for_":["PerformanceLongAnimationFrameTiming"],"level":"1","normative":true,"shortname":"long-animation-frames","spec":"long-animation-frames-1","status":"local","text":"renderStart","type":"attribute","url":"#dom-performancelonganimationframetiming-renderstart"},
"#dom-performancelonganimationframetiming-scripts": {"displayText":"scripts","export":true,"for_":["PerformanceLongAnimationFrameTiming"],"level":"1","normative":true,"shortname":"long-animation-frames","spec":"long-animation-frames-1","status":"local","text":"scripts","type":"attribute","url":"#dom-performancelonganimationframetiming-scripts"},
"#dom-performancelonganimationframetiming-starttime": {"displayText":"startTime","export":true,"for_":["PerformanceLongAnimationFrameTiming"],"level":"1","normative":true,"shortname":"long-animation-frames","spec":"long-animation-frames-1","status":"local","text":"startTime","type":"attribute","url":"#dom-performancelonganimationframetiming-starttime"},
"#dom-performancelonganimationframetiming-styleandlayoutstart": {"displayText":"styleAndLayoutStart","export":true,"for_":["PerformanceLongAnimationFrameTiming"],"level":"1","normative":true,"shortname":"long-animation-frames","spec":"long-animation-frames-1","status":"local","text":"styleAndLayoutStart","type":"attribute","url":"#dom-performancelonganimationframetiming-styleandlayoutstart"},
"#dom-performancescripttiming-duration": {"displayText":"duration","export":true,"for_":["PerformanceScriptTiming"],"level":"1","normative":true,"shortname":"long-animation-frames","spec":"long-animation-frames-1","status":"local","text":"duration","type":"attribute","url":"#dom-performancescripttiming-duration"},
"#dom-performancescripttiming-entrytype": {"displayText":"entryType","export":true,"for_":["PerformanceScriptTiming"],"level":"1","normative":true,"shortname":"long-animation-frames","spec":"long-animation-frames-1","status":"local","text":"entryType","type":"attribute","url":"#dom-performancescripttiming-entrytype"},
"#dom-performancescripttiming-executionstart": {"displayText":"executionStart","export":true,"for_":["PerformanceScriptTiming"],"level":"1","normative":true,"shortname":"long-animation-frames","spec":"long-animation-frames-1","status":"local","text":"executionStart","type":"attribute","url":"#dom-performancescripttiming-executionstart"},
"#dom-performancescripttiming-forcedstyleandlayoutduration": {"displayText":"forcedStyleAndLayoutDuration","export":true,"for_":["PerformanceScriptTiming"],"level":"1","normative":true,"shortname":"long-animation-frames","spec":"long-animation-frames-1","status":"local","text":"forcedStyleAndLayoutDuration","type":"attribute","url":"#dom-performancescripttiming-forcedstyleandlayoutduration"},
"#dom-performancescripttiming-invoker": {"displayText":"invoker","export":true,"for_":["PerformanceScriptTiming"],"level":"1","normative":true,"shortname":"long-animation-frames","spec":"long-animation-frames-1","status":"local","text":"invoker","type":"attribute","url":"#dom-performancescripttiming-invoker"},
"#dom-performancescripttiming-invokertype": {"displayText":"invokerType","export":true,"for_":["PerformanceScriptTiming"],"level":"1","normative":true,"shortname":"long-animation-frames","spec":"long-animation-frames-1","status":"local","text":"invokerType","type":"attribute","url":"#dom-performancescripttiming-invokertype"},
"#dom-performancescripttiming-name": {"displayText":"name","export":true,"for_":["PerformanceScriptTiming"],"level":"1","normative":true,"shortname":"long-animation-frames","spec":"long-animation-frames-1","status":"local","text":"name","type":"attribute","url":"#dom-performancescripttiming-name"},
"#dom-performancescripttiming-pauseduration": {"displayText":"pauseDuration","export":true,"for_":["PerformanceScriptTiming"],"level":"1","normative":true,"shortname":"long-animation-frames","spec":"long-animation-frames-1","status":"local","text":"pauseDuration","type":"attribute","url":"#dom-performancescripttiming-pauseduration"},
"#dom-performancescripttiming-sourcecharposition": {"displayText":"sourceCharPosition","export":true,"for_":["PerformanceScriptTiming"],"level":"1","normative":true,"shortname":"long-animation-frames","spec":"long-animation-frames-1","status":"local","text":"sourceCharPosition","type":"attribute","url":"#dom-performancescripttiming-sourcecharposition"},
"#dom-performancescripttiming-sourcefunctionname": {"displayText":"sourceFunctionName","export":true,"for_":["PerformanceScriptTiming"],"level":"1","normative":true,"shortname":"long-animation-frames","spec":"long-animation-frames-1","status":"local","text":"sourceFunctionName","type":"attribute","url":"#dom-performancescripttiming-sourcefunctionname"},
"#dom-performancescripttiming-sourceurl": {"displayText":"sourceURL","export":true,"for_":["PerformanceScriptTiming"],"level":"1","normative":true,"shortname":"long-animation-frames","spec":"long-animation-frames-1","status":"local","text":"sourceURL","type":"attribute","url":"#dom-performancescripttiming-sourceurl"},
"#dom-performancescripttiming-starttime": {"displayText":"startTime","export":true,"for_":["PerformanceScriptTiming"],"level":"1","normative":true,"shortname":"long-animation-frames","spec":"long-animation-frames-1","status":"local","text":"startTime","type":"attribute","url":"#dom-performancescripttiming-starttime"},
"#dom-performancescripttiming-window": {"displayText":"window","export":true,"for_":["PerformanceScriptTiming"],"level":"1","normative":true,"shortname":"long-animation-frames","spec":"long-animation-frames-1","status":"local","text":"window","type":"attribute","url":"#dom-performancescripttiming-window"},
"#dom-performancescripttiming-windowattribution": {"displayText":"windowAttribution","export":true,"for_":["PerformanceScriptTiming"],"level":"1","normative":true,"shortname":"long-animation-frames","spec":"long-animation-frames-1","status":"local","text":"windowAttribution","type":"attribute","url":"#dom-performancescripttiming-windowattribution"},
"#dom-scriptwindowattribution-ancestor": {"displayText":"\"ancestor\"","export":true,"for_":["ScriptWindowAttribution"],"level":"1","normative":true,"shortname":"long-animation-frames","spec":"long-animation-frames-1","status":"local","text":"\"ancestor\"","type":"enum-value","url":"#dom-scriptwindowattribution-ancestor"},
"#dom-scriptwindowattribution-descendant": {"displayText":"\"descendant\"","export":true,"for_":["ScriptWindowAttribution"],"level":"1","normative":true,"shortname":"long-animation-frames","spec":"long-animation-frames-1","status":"local","text":"\"descendant\"","type":"enum-value","url":"#dom-scriptwindowattribution-descendant"},
"#dom-scriptwindowattribution-other": {"displayText":"\"other\"","export":true,"for_":["ScriptWindowAttribution"],"level":"1","normative":true,"shortname":"long-animation-frames","spec":"long-animation-frames-1","status":"local","text":"\"other\"","type":"enum-value","url":"#dom-scriptwindowattribution-other"},
"#dom-scriptwindowattribution-same-page": {"displayText":"\"same-page\"","export":true,"for_":["ScriptWindowAttribution"],"level":"1","normative":true,"shortname":"long-animation-frames","spec":"long-animation-frames-1","status":"local","text":"\"same-page\"","type":"enum-value","url":"#dom-scriptwindowattribution-same-page"},
"#dom-scriptwindowattribution-self": {"displayText":"\"self\"","export":true,"for_":["ScriptWindowAttribution"],"level":"1","normative":true,"shortname":"long-animation-frames","spec":"long-animation-frames-1","status":"local","text":"\"self\"","type":"enum-value","url":"#dom-scriptwindowattribution-self"},
"#enumdef-scriptinvokertype": {"displayText":"ScriptInvokerType","export":true,"for_":[],"level":"1","normative":true,"shortname":"long-animation-frames","spec":"long-animation-frames-1","status":"local","text":"ScriptInvokerType","type":"enum","url":"#enumdef-scriptinvokertype"},
"#enumdef-scriptwindowattribution": {"displayText":"ScriptWindowAttribution","export":true,"for_":[],"level":"1","normative":true,"shortname":"long-animation-frames","spec":"long-animation-frames-1","status":"local","text":"ScriptWindowAttribution","type":"enum","url":"#enumdef-scriptwindowattribution"},
"#frame-timing-info": {"displayText":"frame timing info","export":true,"for_":[],"level":"1","normative":true,"shortname":"long-animation-frames","spec":"long-animation-frames-1","status":"local","text":"frame timing info","type":"dfn","url":"#frame-timing-info"},
"#frame-timing-info-current-task-start-time": {"displayText":"current task start time","export":true,"for_":["frame timing info"],"level":"1","normative":true,"shortname":"long-animation-frames","spec":"long-animation-frames-1","status":"local","text":"current task start time","type":"dfn","url":"#frame-timing-info-current-task-start-time"},
"#frame-timing-info-end-time": {"displayText":"end time","export":true,"for_":["frame timing info"],"level":"1","normative":true,"shortname":"long-animation-frames","spec":"long-animation-frames-1","status":"local","text":"end time","type":"dfn","url":"#frame-timing-info-end-time"},
"#frame-timing-info-first-ui-event-timestamp": {"displayText":"first ui event timestamp","export":true,"for_":["frame timing info"],"level":"1","normative":true,"shortname":"long-animation-frames","spec":"long-animation-frames-1","status":"local","text":"first ui event timestamp","type":"dfn","url":"#frame-timing-info-first-ui-event-timestamp"},
"#frame-timing-info-pending-script": {"displayText":"pending script","export":true,"for_":["frame timing info"],"level":"1","normative":true,"shortname":"long-animation-frames","spec":"long-animation-frames-1","status":"local","text":"pending script","type":"dfn","url":"#frame-timing-info-pending-script"},
"#frame-timing-info-scripts": {"displayText":"scripts","export":true,"for_":["frame timing info"],"level":"1","normative":true,"shortname":"long-animation-frames","spec":"long-animation-frames-1","status":"local","text":"scripts","type":"dfn","url":"#frame-timing-info-scripts"},
"#frame-timing-info-start-time": {"displayText":"start time","export":true,"for_":["frame timing info"],"level":"1","normative":true,"shortname":"long-animation-frames","spec":"long-animation-frames-1","status":"local","text":"start time","type":"dfn","url":"#frame-timing-info-start-time"},
"#frame-timing-info-style-and-layout-start-time": {"displayText":"style and layout start time","export":true,"for_":["frame timing info"],"level":"1","normative":true,"shortname":"long-animation-frames","spec":"long-animation-frames-1","status":"local","text":"style and layout start time","type":"dfn","url":"#frame-timing-info-style-and-layout-start-time"},
"#frame-timing-info-task-durations": {"displayText":"task durations","export":true,"for_":["frame timing info"],"level":"1","normative":true,"shortname":"long-animation-frames","spec":"long-animation-frames-1","status":"local","text":"task durations","type":"dfn","url":"#frame-timing-info-task-durations"},
"#frame-timing-info-update-the-rendering-start-time": {"displayText":"update the rendering start time","export":true,"for_":["frame timing info"],"level":"1","normative":true,"shortname":"long-animation-frames","spec":"long-animation-frames-1","status":"local","text":"update the rendering start time","type":"dfn","url":"#frame-timing-info-update-the-rendering-start-time"},
"#long-animation-frame": {"displayText":"long animation frame","export":true,"for_":[],"level":"1","normative":true,"shortname":"long-animation-frames","spec":"long-animation-frames-1","status":"local","text":"long animation frame","type":"dfn","url":"#long-animation-frame"},
"#nearest-same-origin-root": {"displayText":"nearest same-origin root","export":true,"for_":[],"level":"1","normative":true,"shortname":"long-animation-frames","spec":"long-animation-frames-1","status":"local","text":"nearest same-origin root","type":"dfn","url":"#nearest-same-origin-root"},
"#performancelonganimationframetiming": {"displayText":"PerformanceLongAnimationFrameTiming","export":true,"for_":[],"level":"1","normative":true,"shortname":"long-animation-frames","spec":"long-animation-frames-1","status":"local","text":"PerformanceLongAnimationFrameTiming","type":"interface","url":"#performancelonganimationframetiming"},
"#performancelonganimationframetiming-timing-info": {"displayText":"timing info","export":true,"for_":["PerformanceLongAnimationFrameTiming"],"level":"1","normative":true,"shortname":"long-animation-frames","spec":"long-animation-frames-1","status":"local","text":"timing info","type":"dfn","url":"#performancelonganimationframetiming-timing-info"},
"#performancescripttiming": {"displayText":"PerformanceScriptTiming","export":true,"for_":[],"level":"1","normative":true,"shortname":"long-animation-frames","spec":"long-animation-frames-1","status":"local","text":"PerformanceScriptTiming","type":"interface","url":"#performancescripttiming"},
"#performancescripttiming-timing-info": {"displayText":"timing info","export":true,"for_":["PerformanceScriptTiming"],"level":"1","normative":true,"shortname":"long-animation-frames","spec":"long-animation-frames-1","status":"local","text":"timing info","type":"dfn","url":"#performancescripttiming-timing-info"},
"#performancescripttiming-window-attribution": {"displayText":"window attribution","export":true,"for_":["PerformanceScriptTiming"],"level":"1","normative":true,"shortname":"long-animation-frames","spec":"long-animation-frames-1","status":"local","text":"window attribution","type":"dfn","url":"#performancescripttiming-window-attribution"},
"#promise-invoker-name-when-created": {"displayText":"invoker name when created","export":true,"for_":["Promise"],"level":"1","normative":true,"shortname":"long-animation-frames","spec":"long-animation-frames-1","status":"local","text":"invoker name when created","type":"dfn","url":"#promise-invoker-name-when-created"},
"#promise-script-url-when-created": {"displayText":"script url when created","export":true,"for_":["Promise"],"level":"1","normative":true,"shortname":"long-animation-frames","spec":"long-animation-frames-1","status":"local","text":"script url when created","type":"dfn","url":"#promise-script-url-when-created"},
"#record-timing-info-for-promise-resolver": {"displayText":"record timing info for promise resolver","export":true,"for_":[],"level":"1","normative":true,"shortname":"long-animation-frames","spec":"long-animation-frames-1","status":"local","text":"record timing info for promise resolver","type":"dfn","url":"#record-timing-info-for-promise-resolver"},
"#record-timing-info-for-user-callback": {"displayText":"record timing info for user callback","export":true,"for_":[],"level":"1","normative":true,"shortname":"long-animation-frames","spec":"long-animation-frames-1","status":"local","text":"record timing info for user callback","type":"dfn","url":"#record-timing-info-for-user-callback"},
"#relevant-frame-timing-info": {"displayText":"relevant frame timing info","export":true,"for_":[],"level":"1","normative":true,"shortname":"long-animation-frames","spec":"long-animation-frames-1","status":"local","text":"relevant frame timing info","type":"dfn","url":"#relevant-frame-timing-info"},
"#report-frame-timing": {"displayText":"report frame timing","export":true,"for_":[],"level":"1","normative":true,"shortname":"long-animation-frames","spec":"long-animation-frames-1","status":"local","text":"report frame timing","type":"dfn","url":"#report-frame-timing"},
"#script-timing-info": {"displayText":"script timing info","export":true,"for_":[],"level":"1","normative":true,"shortname":"long-animation-frames","spec":"long-animation-frames-1","status":"local","text":"script timing info","type":"dfn","url":"#script-timing-info"},
"#script-timing-info-end-time": {"displayText":"end time","export":true,"for_":["script timing info"],"level":"1","normative":true,"shortname":"long-animation-frames","spec":"long-animation-frames-1","status":"local","text":"end time","type":"dfn","url":"#script-timing-info-end-time"},
"#script-timing-info-event-target-element-id": {"displayText":"event target element id","export":true,"for_":["script timing info"],"level":"1","normative":true,"shortname":"long-animation-frames","spec":"long-animation-frames-1","status":"local","text":"event target element id","type":"dfn","url":"#script-timing-info-event-target-element-id"},
"#script-timing-info-event-target-element-src-attribute": {"displayText":"event target element src attribute","export":true,"for_":["script timing info"],"level":"1","normative":true,"shortname":"long-animation-frames","spec":"long-animation-frames-1","status":"local","text":"event target element src attribute","type":"dfn","url":"#script-timing-info-event-target-element-src-attribute"},
"#script-timing-info-event-type": {"displayText":"event type","export":true,"for_":["script timing info"],"level":"1","normative":true,"shortname":"long-animation-frames","spec":"long-animation-frames-1","status":"local","text":"event type","type":"dfn","url":"#script-timing-info-event-type"},
"#script-timing-info-execution-start-time": {"displayText":"execution start time","export":true,"for_":["script timing info"],"level":"1","normative":true,"shortname":"long-animation-frames","spec":"long-animation-frames-1","status":"local","text":"execution start time","type":"dfn","url":"#script-timing-info-execution-start-time"},
"#script-timing-info-invoker-name": {"displayText":"invoker name","export":true,"for_":["script timing info"],"level":"1","normative":true,"shortname":"long-animation-frames","spec":"long-animation-frames-1","status":"local","text":"invoker name","type":"dfn","url":"#script-timing-info-invoker-name"},
"#script-timing-info-invoker-type": {"displayText":"invoker type","export":true,"for_":["script timing info"],"level":"1","normative":true,"shortname":"long-animation-frames","spec":"long-animation-frames-1","status":"local","text":"invoker type","type":"dfn","url":"#script-timing-info-invoker-type"},
"#script-timing-info-pause-duration": {"displayText":"pause duration","export":true,"for_":["script timing info"],"level":"1","normative":true,"shortname":"long-animation-frames","spec":"long-animation-frames-1","status":"local","text":"pause duration","type":"dfn","url":"#script-timing-info-pause-duration"},
"#script-timing-info-source-character-position": {"displayText":"source character position","export":true,"for_":["script timing info"],"level":"1","normative":true,"shortname":"long-animation-frames","spec":"long-animation-frames-1","status":"local","text":"source character position","type":"dfn","url":"#script-timing-info-source-character-position"},
"#script-timing-info-source-function-name": {"displayText":"source function name","export":true,"for_":["script timing info"],"level":"1","normative":true,"shortname":"long-animation-frames","spec":"long-animation-frames-1","status":"local","text":"source function name","type":"dfn","url":"#script-timing-info-source-function-name"},
"#script-timing-info-source-url": {"displayText":"source url","export":true,"for_":["script timing info"],"level":"1","normative":true,"shortname":"long-animation-frames","spec":"long-animation-frames-1","status":"local","text":"source url","type":"dfn","url":"#script-timing-info-source-url"},
"#script-timing-info-start-time": {"displayText":"start time","export":true,"for_":["script timing info"],"level":"1","normative":true,"shortname":"long-animation-frames","spec":"long-animation-frames-1","status":"local","text":"start time","type":"dfn","url":"#script-timing-info-start-time"},
"#script-timing-info-window": {"displayText":"window","export":true,"for_":["script timing info"],"level":"1","normative":true,"shortname":"long-animation-frames","spec":"long-animation-frames-1","status":"local","text":"window","type":"dfn","url":"#script-timing-info-window"},
"#set-source-url-for-script-block": {"displayText":"set source url for script block","export":true,"for_":[],"level":"1","normative":true,"shortname":"long-animation-frames","spec":"long-animation-frames-1","status":"local","text":"set source url for script block","type":"dfn","url":"#set-source-url-for-script-block"},
"https://dom.spec.whatwg.org/#callbackdef-eventlistener": {"displayText":"EventListener","export":true,"for_":[],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"EventListener","type":"callback","url":"https://dom.spec.whatwg.org/#callbackdef-eventlistener"},
"https://dom.spec.whatwg.org/#concept-document-origin": {"displayText":"origin","export":true,"for_":["Document"],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"origin","type":"dfn","url":"https://dom.spec.whatwg.org/#concept-document-origin"},
"https://dom.spec.whatwg.org/#concept-element-attributes-get-by-name": {"displayText":"get an attribute by name","export":true,"for_":[],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"get an attribute by name","type":"dfn","url":"https://dom.spec.whatwg.org/#concept-element-attributes-get-by-name"},
"https://dom.spec.whatwg.org/#concept-id": {"displayText":"ID","export":true,"for_":["Element"],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"id","type":"dfn","url":"https://dom.spec.whatwg.org/#concept-id"},
"https://dom.spec.whatwg.org/#document": {"displayText":"Document","export":true,"for_":[],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"Document","type":"interface","url":"https://dom.spec.whatwg.org/#document"},
"https://dom.spec.whatwg.org/#dom-event-currenttarget": {"displayText":"currentTarget","export":true,"for_":["Event"],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"currentTarget","type":"attribute","url":"https://dom.spec.whatwg.org/#dom-event-currenttarget"},
"https://dom.spec.whatwg.org/#dom-event-timestamp": {"displayText":"timeStamp","export":true,"for_":["Event"],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"timeStamp","type":"attribute","url":"https://dom.spec.whatwg.org/#dom-event-timestamp"},
"https://dom.spec.whatwg.org/#dom-event-type": {"displayText":"type","export":true,"for_":["Event"],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"type","type":"attribute","url":"https://dom.spec.whatwg.org/#dom-event-type"},
"https://dom.spec.whatwg.org/#dom-node-nodename": {"displayText":"nodeName","export":true,"for_":["Node"],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"nodeName","type":"attribute","url":"https://dom.spec.whatwg.org/#dom-node-nodename"},
"https://dom.spec.whatwg.org/#element": {"displayText":"Element","export":true,"for_":[],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"Element","type":"interface","url":"https://dom.spec.whatwg.org/#element"},
"https://dom.spec.whatwg.org/#event": {"displayText":"Event","export":true,"for_":[],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"Event","type":"interface","url":"https://dom.spec.whatwg.org/#event"},
"https://dom.spec.whatwg.org/#event-listener-callback": {"displayText":"callback","export":true,"for_":["event listener"],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"callback","type":"dfn","url":"https://dom.spec.whatwg.org/#event-listener-callback"},
"https://dom.spec.whatwg.org/#node": {"displayText":"Node","export":true,"for_":[],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"Node","type":"interface","url":"https://dom.spec.whatwg.org/#node"},
"https://drafts.csswg.org/cssom-1/#dom-window-getcomputedstyle": {"displayText":"getComputedStyle(elt)","export":true,"for_":["Window"],"level":"1","normative":true,"shortname":"cssom","spec":"cssom-1","status":"current","text":"getComputedStyle(elt)","type":"method","url":"https://drafts.csswg.org/cssom-1/#dom-window-getcomputedstyle"},
"https://drafts.csswg.org/cssom-view-1/#dom-element-getboundingclientrect": {"displayText":"getBoundingClientRect()","export":true,"for_":["Element"],"level":"1","normative":true,"shortname":"cssom-view","spec":"cssom-view-1","status":"current","text":"getBoundingClientRect()","type":"method","url":"https://drafts.csswg.org/cssom-view-1/#dom-element-getboundingclientrect"},
"https://html.spec.whatwg.org/multipage/#cors-cross-origin": {"displayText":"CORS cross-origin","export":true,"for_":[],"level":"","normative":true,"shortname":"html","spec":"html","status":"anchor-block","text":"cors cross-origin","type":"dfn","url":"https://html.spec.whatwg.org/multipage/#cors-cross-origin"},
"https://html.spec.whatwg.org/multipage/#muted-errors": {"displayText":"muted errors","export":true,"for_":["classic script"],"level":"","normative":true,"shortname":"html","spec":"html","status":"anchor-block","text":"muted errors","type":"dfn","url":"https://html.spec.whatwg.org/multipage/#muted-errors"},
"https://html.spec.whatwg.org/multipage/#running-script": {"displayText":"running script","export":true,"for_":[],"level":"","normative":true,"shortname":"html","spec":"html","status":"anchor-block","text":"running script","type":"dfn","url":"https://html.spec.whatwg.org/multipage/#running-script"},
"https://html.spec.whatwg.org/multipage/browsers.html#same-origin": {"displayText":"same origin","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"same origin","type":"dfn","url":"https://html.spec.whatwg.org/multipage/browsers.html#same-origin"},
"https://html.spec.whatwg.org/multipage/document-sequences.html#ancestor-navigables": {"displayText":"ancestor navigables","export":true,"for_":["Document"],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"ancestor navigables","type":"dfn","url":"https://html.spec.whatwg.org/multipage/document-sequences.html#ancestor-navigables"},
"https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active": {"displayText":"fully active","export":true,"for_":["Document"],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"fully active","type":"dfn","url":"https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active"},
"https://html.spec.whatwg.org/multipage/document-sequences.html#nav-document": {"displayText":"active document","export":true,"for_":["navigable"],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"active document","type":"dfn","url":"https://html.spec.whatwg.org/multipage/document-sequences.html#nav-document"},
"https://html.spec.whatwg.org/multipage/document-sequences.html#nav-top": {"displayText":"top-level traversable","export":true,"for_":["navigable"],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"top-level traversable","type":"dfn","url":"https://html.spec.whatwg.org/multipage/document-sequences.html#nav-top"},
"https://html.spec.whatwg.org/multipage/document-sequences.html#node-navigable": {"displayText":"node navigable","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"node navigable","type":"dfn","url":"https://html.spec.whatwg.org/multipage/document-sequences.html#node-navigable"},
"https://html.spec.whatwg.org/multipage/interaction.html#dom-document-hidden": {"displayText":"hidden","export":true,"for_":["Document"],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"hidden","type":"attribute","url":"https://html.spec.whatwg.org/multipage/interaction.html#dom-document-hidden"},
"https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-document-2": {"displayText":"document","export":true,"for_":["Window"],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"document","type":"attribute","url":"https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-document-2"},
"https://html.spec.whatwg.org/multipage/nav-history-apis.html#window": {"displayText":"Window","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"Window","type":"interface","url":"https://html.spec.whatwg.org/multipage/nav-history-apis.html#window"},
"https://html.spec.whatwg.org/multipage/webappapis.html#classic-script": {"displayText":"classic script","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"classic script","type":"dfn","url":"https://html.spec.whatwg.org/multipage/webappapis.html#classic-script"},
"https://html.spec.whatwg.org/multipage/webappapis.html#concept-realm-settings-object": {"displayText":"settings object","export":true,"for_":["realm"],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"settings object","type":"dfn","url":"https://html.spec.whatwg.org/multipage/webappapis.html#concept-realm-settings-object"},
"https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global": {"displayText":"relevant global object","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"relevant global object","type":"dfn","url":"https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global"},
"https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm": {"displayText":"relevant realm","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"relevant realm","type":"dfn","url":"https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm"},
"https://html.spec.whatwg.org/multipage/webappapis.html#concept-script": {"displayText":"script","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"script","type":"dfn","url":"https://html.spec.whatwg.org/multipage/webappapis.html#concept-script"},
"https://html.spec.whatwg.org/multipage/webappapis.html#concept-script-base-url": {"displayText":"base URL","export":true,"for_":["script"],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"base url","type":"dfn","url":"https://html.spec.whatwg.org/multipage/webappapis.html#concept-script-base-url"},
"https://html.spec.whatwg.org/multipage/webappapis.html#concept-task": {"displayText":"task","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"task","type":"dfn","url":"https://html.spec.whatwg.org/multipage/webappapis.html#concept-task"},
"https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object": {"displayText":"environment settings object","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"environment settings object","type":"dfn","url":"https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object"},
"https://html.spec.whatwg.org/multipage/webappapis.html#module-script": {"displayText":"module script","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"module script","type":"dfn","url":"https://html.spec.whatwg.org/multipage/webappapis.html#module-script"},
"https://html.spec.whatwg.org/multipage/webappapis.html#relevant-agent": {"displayText":"relevant agent","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"relevant agent","type":"dfn","url":"https://html.spec.whatwg.org/multipage/webappapis.html#relevant-agent"},
"https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object": {"displayText":"relevant settings object","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"relevant settings object","type":"dfn","url":"https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object"},
"https://html.spec.whatwg.org/multipage/webappapis.html#settings-object": {"displayText":"settings object","export":true,"for_":["script"],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"settings object","type":"dfn","url":"https://html.spec.whatwg.org/multipage/webappapis.html#settings-object"},
"https://infra.spec.whatwg.org/#implementation-defined": {"displayText":"implementation-defined","export":true,"for_":[],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"implementation-defined","type":"dfn","url":"https://infra.spec.whatwg.org/#implementation-defined"},
"https://infra.spec.whatwg.org/#list": {"displayText":"list","export":true,"for_":[],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"list","type":"dfn","url":"https://infra.spec.whatwg.org/#list"},
"https://infra.spec.whatwg.org/#list-append": {"displayText":"append","export":true,"for_":["list"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"append","type":"dfn","url":"https://infra.spec.whatwg.org/#list-append"},
"https://infra.spec.whatwg.org/#list-contain": {"displayText":"contain","export":true,"for_":["list","stack","queue","set"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"contain","type":"dfn","url":"https://infra.spec.whatwg.org/#list-contain"},
"https://infra.spec.whatwg.org/#list-iterate": {"displayText":"iterate","export":true,"for_":["list","set"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"iterate","type":"dfn","url":"https://infra.spec.whatwg.org/#list-iterate"},
"https://infra.spec.whatwg.org/#list-sort-in-descending-order": {"displayText":"sort in descending order","export":true,"for_":["list","stack","queue","set"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"sort in descending order","type":"dfn","url":"https://infra.spec.whatwg.org/#list-sort-in-descending-order"},
"https://infra.spec.whatwg.org/#string-concatenate": {"displayText":"concatenate","export":true,"for_":["string"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"concatenate","type":"dfn","url":"https://infra.spec.whatwg.org/#string-concatenate"},
"https://infra.spec.whatwg.org/#struct": {"displayText":"struct","export":true,"for_":[],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"struct","type":"dfn","url":"https://infra.spec.whatwg.org/#struct"},
"https://infra.spec.whatwg.org/#struct-item": {"displayText":"item","export":true,"for_":["struct","tuple"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"item","type":"dfn","url":"https://infra.spec.whatwg.org/#struct-item"},
"https://tc39.es/ecma262/multipage/managing-memory.html#sec-weak-ref-objects": {"displayText":"WeakRef","export":true,"for_":[],"level":"1","normative":true,"shortname":"ecmascript","spec":"ecmascript","status":"current","text":"WeakRef","type":"interface","url":"https://tc39.es/ecma262/multipage/managing-memory.html#sec-weak-ref-objects"},
"https://tc39.es/ecma262/multipage/managing-memory.html#sec-weakrefderef": {"displayText":"weakrefderef","export":true,"for_":[],"level":"1","normative":true,"shortname":"long-animation-frames","spec":"","status":"anchor-block","text":"weakrefderef","type":"dfn","url":"https://tc39.es/ecma262/multipage/managing-memory.html#sec-weakrefderef"},
"https://url.spec.whatwg.org/#concept-url": {"displayText":"URL","export":true,"for_":[],"level":"1","normative":true,"shortname":"url","spec":"url","status":"current","text":"url","type":"dfn","url":"https://url.spec.whatwg.org/#concept-url"},
"https://url.spec.whatwg.org/#concept-url-scheme": {"displayText":"scheme","export":true,"for_":["url"],"level":"1","normative":true,"shortname":"url","spec":"url","status":"current","text":"scheme","type":"dfn","url":"https://url.spec.whatwg.org/#concept-url-scheme"},
"https://w3c.github.io/hr-time/#dfn-coarsen-time": {"displayText":"coarsen time","export":true,"for_":[],"level":"3","normative":true,"shortname":"hr-time","spec":"hr-time-3","status":"current","text":"coarsen time","type":"dfn","url":"https://w3c.github.io/hr-time/#dfn-coarsen-time"},
"https://w3c.github.io/hr-time/#dfn-duration": {"displayText":"duration","export":true,"for_":[],"level":"3","normative":true,"shortname":"hr-time","spec":"hr-time-3","status":"current","text":"duration","type":"dfn","url":"https://w3c.github.io/hr-time/#dfn-duration"},
"https://w3c.github.io/hr-time/#dfn-relative-high-resolution-time": {"displayText":"relative high resolution time","export":true,"for_":[],"level":"3","normative":true,"shortname":"hr-time","spec":"hr-time-3","status":"current","text":"relative high resolution time","type":"dfn","url":"https://w3c.github.io/hr-time/#dfn-relative-high-resolution-time"},
"https://w3c.github.io/hr-time/#dfn-unsafe-shared-current-time": {"displayText":"unsafe shared current time","export":true,"for_":[],"level":"3","normative":true,"shortname":"hr-time","spec":"hr-time-3","status":"current","text":"unsafe shared current time","type":"dfn","url":"https://w3c.github.io/hr-time/#dfn-unsafe-shared-current-time"},
"https://w3c.github.io/hr-time/#idl-def-domhighrestimestamp": {"displayText":"DOMHighResTimeStamp","export":true,"for_":[],"level":"2","normative":true,"shortname":"hr-time","spec":"hr-time-2","status":"anchor-block","text":"DOMHighResTimeStamp","type":"typedef","url":"https://w3c.github.io/hr-time/#idl-def-domhighrestimestamp"},
"https://w3c.github.io/longtasks/#long-task": {"displayText":"long task","export":true,"for_":[],"level":"1","normative":true,"shortname":"longtasks","spec":"longtasks-1","status":"current","text":"long task","type":"dfn","url":"https://w3c.github.io/longtasks/#long-task"},
"https://w3c.github.io/performance-timeline/#dfn-queue-a-performanceentry": {"displayText":"queue a PerformanceEntry","export":true,"for_":[],"level":"1","normative":true,"shortname":"performance-timeline","spec":"performance-timeline","status":"current","text":"queue a performanceentry","type":"dfn","url":"https://w3c.github.io/performance-timeline/#dfn-queue-a-performanceentry"},
"https://w3c.github.io/performance-timeline/#dom-performanceentry-starttime": {"displayText":"startTime","export":true,"for_":["PerformanceEntry"],"level":"2","normative":true,"shortname":"performance-timeline","spec":"performance-timeline-2","status":"anchor-block","text":"startTime","type":"attribute","url":"https://w3c.github.io/performance-timeline/#dom-performanceentry-starttime"},
"https://w3c.github.io/performance-timeline/#supportedentrytypes-attribute": {"displayText":"supportedEntryTypes","export":true,"for_":["PerformanceObserver"],"level":"2","normative":true,"shortname":"performance-timeline","spec":"performance-timeline-2","status":"anchor-block","text":"supportedEntryTypes","type":"attribute","url":"https://w3c.github.io/performance-timeline/#supportedentrytypes-attribute"},
"https://w3c.github.io/performance-timeline/#the-performanceentry-interface": {"displayText":"PerformanceEntry","export":true,"for_":[],"level":"2","normative":true,"shortname":"performance-timeline","spec":"performance-timeline-2","status":"anchor-block","text":"PerformanceEntry","type":"interface","url":"https://w3c.github.io/performance-timeline/#the-performanceentry-interface"},
"https://w3c.github.io/uievents/#uievent": {"displayText":"UIEvent","export":true,"for_":[],"level":"1","normative":true,"shortname":"uievents","spec":"uievents","status":"current","text":"UIEvent","type":"interface","url":"https://w3c.github.io/uievents/#uievent"},
"https://webidl.spec.whatwg.org/#Default": {"displayText":"Default","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"Default","type":"extended-attribute","url":"https://webidl.spec.whatwg.org/#Default"},
"https://webidl.spec.whatwg.org/#Exposed": {"displayText":"Exposed","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"Exposed","type":"extended-attribute","url":"https://webidl.spec.whatwg.org/#Exposed"},
"https://webidl.spec.whatwg.org/#Function": {"displayText":"Function","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"Function","type":"callback","url":"https://webidl.spec.whatwg.org/#Function"},
"https://webidl.spec.whatwg.org/#SameObject": {"displayText":"SameObject","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"SameObject","type":"extended-attribute","url":"https://webidl.spec.whatwg.org/#SameObject"},
"https://webidl.spec.whatwg.org/#dfn-attribute": {"displayText":"attribute","export":true,"for_":[],"level":"","normative":true,"shortname":"webidl","spec":"webidl","status":"anchor-block","text":"attribute","type":"dfn","url":"https://webidl.spec.whatwg.org/#dfn-attribute"},
"https://webidl.spec.whatwg.org/#dfn-callback-function": {"displayText":"callback function","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"callback function","type":"dfn","url":"https://webidl.spec.whatwg.org/#dfn-callback-function"},
"https://webidl.spec.whatwg.org/#dfn-identifier": {"displayText":"identifier","export":true,"for_":[],"level":"","normative":true,"shortname":"webidl","spec":"webidl","status":"anchor-block","text":"identifier","type":"dfn","url":"https://webidl.spec.whatwg.org/#dfn-identifier"},
"https://webidl.spec.whatwg.org/#dfn-interface": {"displayText":"interface","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"interface","type":"dfn","url":"https://webidl.spec.whatwg.org/#dfn-interface"},
"https://webidl.spec.whatwg.org/#idl-DOMString": {"displayText":"DOMString","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"DOMString","type":"interface","url":"https://webidl.spec.whatwg.org/#idl-DOMString"},
"https://webidl.spec.whatwg.org/#idl-frozen-array": {"displayText":"FrozenArray","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"FrozenArray","type":"interface","url":"https://webidl.spec.whatwg.org/#idl-frozen-array"},
"https://webidl.spec.whatwg.org/#idl-long-long": {"displayText":"long long","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"long long","type":"interface","url":"https://webidl.spec.whatwg.org/#idl-long-long"},
"https://webidl.spec.whatwg.org/#idl-object": {"displayText":"object","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"object","type":"interface","url":"https://webidl.spec.whatwg.org/#idl-object"},
"https://webidl.spec.whatwg.org/#idl-promise": {"displayText":"Promise","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"Promise","type":"interface","url":"https://webidl.spec.whatwg.org/#idl-promise"},
"https://webidl.spec.whatwg.org/#this": {"displayText":"this","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"this","type":"dfn","url":"https://webidl.spec.whatwg.org/#this"},
};

function mkRefHint(link, ref) {
    const linkText = link.textContent;
    let dfnTextElements = '';
    if (ref.displayText.toLowerCase() != linkText.toLowerCase()) {
        // Give the original term if it's being displayed in a different way.
        // But allow casing differences, they're insignificant.
        dfnTextElements =
            mk.li({},
                mk.b({}, "Term: "),
                mk.span({}, ref.displayText)
            );
    }
    const forList = ref.for_;
    let forListElements;
    if(forList.length == 0) {
        forListElements = [];
    } else if(forList.length == 1) {
        forListElements = mk.li({},
            mk.b({}, "For: "),
            mk.span({}, forList[0]),
        );
    } else {
        forListElements = mk.li({},
            mk.b({}, "For: "),
            mk.ul({},
                ...forList.map(forItem =>
                    mk.li({},
                        mk.span({}, forItem)
                    ),
                ),
            ),
        );
    }
    const url = ref.url;
    const safeUrl = encodeURIComponent(url);
    const hintPanel = mk.aside({
        class: "ref-hint",
        id: `ref-hint-for-${safeUrl}`,
        "data-for": url,
        "aria-labelled-by": `ref-hint-for-${safeUrl}`,
    },
        mk.ul({},
            dfnTextElements,
            mk.li({},
                mk.b({}, "URL: "),
                mk.a({ href: url, class: "ref" }, url),
            ),
            mk.li({},
                mk.b({}, "Type: "),
                mk.span({}, `${ref.type}`),
            ),
            mk.li({},
                mk.b({}, "Spec: "),
                mk.span({}, `${ref.spec ? ref.spec : ''}`),
            ),
            forListElements
        ),
    );
    hintPanel.forLink = link;
    setupRefHintEventListeners(link, hintPanel);
    return hintPanel;
}

function hideAllRefHints() {
    queryAll(".ref-hint").forEach(el=>hideRefHint(el));
}

function hideRefHint(refHint) {
    const link = refHint.forLink;
    link.setAttribute("aria-expanded", "false");
    if(refHint.teardownEventListeners) {
        refHint.teardownEventListeners();
    }
    refHint.remove();
}

function showRefHint(link) {
    if(link.classList.contains("dfn-link")) return;
    const url = link.getAttribute("href");
    const ref = refsData[url];
    if(!ref) return;

    hideAllRefHints(); // Only display one at this time.

    const refHint = mkRefHint(link, ref);
    append(document.body, refHint);
    link.setAttribute("aria-expanded", "true");
    positionRefHint(refHint);
}

function setupRefHintEventListeners(link, refHint) {
    if (refHint.teardownEventListeners) return;
    // Add event handlers to hide the refHint after the user moves away
    // from both the link and refHint, if not hovering either within one second.
    let timeout = null;
    const startHidingRefHint = (event) => {
        if (timeout) {
            clearTimeout(timeout);
        }
        timeout = setTimeout(() => {
            hideRefHint(refHint);
        }, 1000);
    }
    const resetHidingRefHint = (event) => {
        if (timeout) clearTimeout(timeout);
        timeout = null;
    };
    link.addEventListener("mouseleave", startHidingRefHint);
    link.addEventListener("mouseenter", resetHidingRefHint);
    link.addEventListener("blur", startHidingRefHint);
    link.addEventListener("focus", resetHidingRefHint);
    refHint.addEventListener("mouseleave", startHidingRefHint);
    refHint.addEventListener("mouseenter", resetHidingRefHint);
    refHint.addEventListener("blur", startHidingRefHint);
    refHint.addEventListener("focus", resetHidingRefHint);

    refHint.teardownEventListeners = () => {
        // remove event listeners
        resetHidingRefHint();
        link.removeEventListener("mouseleave", startHidingRefHint);
        link.removeEventListener("mouseenter", resetHidingRefHint);
        link.removeEventListener("blur", startHidingRefHint);
        link.removeEventListener("focus", resetHidingRefHint);
        refHint.removeEventListener("mouseleave", startHidingRefHint);
        refHint.removeEventListener("mouseenter", resetHidingRefHint);
        refHint.removeEventListener("blur", startHidingRefHint);
        refHint.removeEventListener("focus", resetHidingRefHint);
    };
}

function positionRefHint(refHint) {
    const link = refHint.forLink;
    const linkPos = getBounds(link);
    refHint.style.top = linkPos.bottom + "px";
    refHint.style.left = linkPos.left + "px";

    const panelPos = refHint.getBoundingClientRect();
    const panelMargin = 8;
    const maxRight = document.body.parentNode.clientWidth - panelMargin;
    if (panelPos.right > maxRight) {
        const overflowAmount = panelPos.right - maxRight;
        const newLeft = Math.max(panelMargin, linkPos.left - overflowAmount);
        refHint.style.left = newLeft + "px";
    }
}

// TODO: shared util
// Returns the root-level absolute position {left and top} of element.
function getBounds(el, relativeTo=document.body) {
    const relativeRect = relativeTo.getBoundingClientRect();
    const elRect = el.getBoundingClientRect();
    const top = elRect.top - relativeRect.top;
    const left = elRect.left - relativeRect.left;
    return {
        top,
        left,
        bottom: top + elRect.height,
        right: left + elRect.width,
    }
}

function showRefHintListener(e) {
    // If the target isn't in a link (or is a link),
    // just ignore it.
    let link = e.target.closest("a");
    if(!link) return;

    // If the target is in a ref-hint panel
    // (aka a link in the already-open one),
    // also just ignore it.
    if(link.closest(".ref-hint")) return;

    // Otherwise, show the panel for the link.
    showRefHint(link);
}

function hideAllHintsListener(e) {
    // If the click is inside a ref-hint panel, ignore it.
    if(e.target.closest(".ref-hint")) return;
    // Otherwise, close all the current panels.
    hideAllRefHints();
}

document.addEventListener("DOMContentLoaded", () => {
    document.body.addEventListener("mousedown", showRefHintListener);
    document.body.addEventListener("focus", showRefHintListener);

    document.body.addEventListener("click", hideAllHintsListener);
});

window.addEventListener("resize", () => {
    // Hide any open ref hint.
    hideAllRefHints();
});
}
</script>
<script>/* Boilerplate: script-var-click-highlighting */
"use strict";
{
/*
Color-choosing design:

* Colors are ordered by goodness.
* On clicking a var, give it the earliest color
    with the lowest usage in the algorithm.
* On re-clicking, re-use the var's most recent color
    if that's not currently being used elsewhere.
*/

const COLOR_COUNT = 7;

document.addEventListener("click", e=>{
    if(e.target.nodeName == "VAR") {
        highlightSameAlgoVars(e.target);
    }
});

function highlightSameAlgoVars(v) {
    // Find the algorithm container.
    let algoContainer = findAlgoContainer(v);

    // Not highlighting document-global vars,
    // too likely to be unrelated.
    if(algoContainer == null) return;

    const varName = nameFromVar(v);
    if(!v.hasAttribute("data-var-color")) {
        const newColor = chooseHighlightColor(algoContainer, v);
        for(const el of algoContainer.querySelectorAll("var")) {
            if(nameFromVar(el) == varName) {
                el.setAttribute("data-var-color", newColor);
                el.setAttribute("data-var-last-color", newColor);
            }
        }
    } else {
        for(const el of algoContainer.querySelectorAll("var")) {
            if(nameFromVar(el) == varName) {
                el.removeAttribute("data-var-color");
            }
        }
    }
}
function findAlgoContainer(el) {
    while(el != document.body) {
        if(el.hasAttribute("data-algorithm")) return el;
        el = el.parentNode;
    }
    return null;
}
function nameFromVar(el) {
    return el.textContent.replace(/(\s|\xa0)+/g, " ").trim();
}
function colorCountsFromContainer(container) {
    const namesFromColor = Array.from({length:COLOR_COUNT}, x=>new Set());
    for(let v of container.querySelectorAll("var[data-var-color]")) {
        let color = +v.getAttribute("data-var-color");
        namesFromColor[color].add(nameFromVar(v));
    }

    return namesFromColor.map(x=>x.size);
}
function leastUsedColor(colors) {
    // Find the earliest color with the lowest count.
    let minCount = Infinity;
    let minColor = null;
    for(var i = 0; i < colors.length; i++) {
        if(colors[i] < minCount) {
            minColor = i;
            minCount = colors[i];
        }
    }
    return minColor;
}
function chooseHighlightColor(container, v) {
    const colorCounts = colorCountsFromContainer(container);
    if(v.hasAttribute("data-var-last-color")) {
        let color = +v.getAttribute("data-var-last-color");
        if(colorCounts[color] == 0) return color;
    }
    return leastUsedColor(colorCounts);
}
}
</script>